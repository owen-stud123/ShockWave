This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
BackEnd/app.js
BackEnd/check-db.js
BackEnd/check-emails.js
BackEnd/config/database.js
BackEnd/controllers/adminController.js
BackEnd/controllers/authController.js
BackEnd/controllers/dashboardController.js
BackEnd/controllers/invoiceController.js
BackEnd/controllers/listingsController.js
BackEnd/controllers/messagesController.js
BackEnd/controllers/ordersController.js
BackEnd/controllers/profileController.js
BackEnd/controllers/progressUpdateController.js
BackEnd/controllers/reviewsController.js
BackEnd/controllers/uploadController.js
BackEnd/database.sqlite
BackEnd/middleware/auth.js
BackEnd/middleware/errorHandler.js
BackEnd/models/invoiceModel.js
BackEnd/models/listingModel.js
BackEnd/models/messageModel.js
BackEnd/models/orderModel.js
BackEnd/models/placeholder.txt
BackEnd/models/portfolioItemModel.js
BackEnd/models/progressUpdateModel.js
BackEnd/models/proposalModel.js
BackEnd/models/reviewModel.js
BackEnd/models/userModel.js
BackEnd/package.json
BackEnd/routes/adminRoutes.js
BackEnd/routes/authRoutes.js
BackEnd/routes/dashboardRoutes.js
BackEnd/routes/invoiceRoutes.js
BackEnd/routes/listingsRoutes.js
BackEnd/routes/messagesRoutes.js
BackEnd/routes/ordersRoutes.js
BackEnd/routes/paymentsRoutes.js
BackEnd/routes/profileRoutes.js
BackEnd/routes/reviewsRoutes.js
BackEnd/routes/uploadRoutes.js
BackEnd/scripts/init.js
BackEnd/services/emailService.js
BackEnd/services/placeholder.txt
BackEnd/uploads/avatar-1762325296812-221264594.JPG
BackEnd/uploads/avatar-1762325682386-937779326.JPG
BackEnd/uploads/avatar-1762325760099-964931611.JPG
BackEnd/uploads/avatar-1762326265889-544456786.JPG
BackEnd/uploads/avatar-1762326390458-480307754.JPG
BackEnd/uploads/avatar-1762326715135-467890813.JPG
BackEnd/uploads/avatar-1762326816877-298001955.JPG
BackEnd/uploads/avatar-1762326931039-344859974.JPG
BackEnd/uploads/avatar-1762329535231-384055876.JPG
BackEnd/uploads/avatar-1762329627915-477332700.JPG
BackEnd/uploads/avatar-1762330256237-488604816.png
BackEnd/uploads/avatar-1762330770888-104961900.JPG
BackEnd/uploads/avatar-1762353879366-516174905.JPG
BackEnd/uploads/avatar-1763371852306-188029841.JPG
BackEnd/uploads/avatar-1763371899107-410775161.JPG
BackEnd/uploads/avatar-1763458642071-157695608.JPG
BackEnd/uploads/avatar-1763458693488-138196184.JPG
BackEnd/uploads/avatar-1763460740010-338458188.JPG
BackEnd/uploads/avatar-1763552628250-668970585.JPG
BackEnd/utils/placeholder.txt
BackEnd/utils/tokenUtils.js
DOCUMENTATION_INDEX.md
ERROR_CHECK_REPORT.md
eslint.config.js
FrontEnd/App.jsx
FrontEnd/components/Footer.jsx
FrontEnd/components/Navbar.jsx
FrontEnd/components/PrivateRoute.jsx
FrontEnd/components/ReviewForm.jsx
FrontEnd/context/AuthContext.jsx
FrontEnd/index.html
FrontEnd/main.jsx
FrontEnd/package.json
FrontEnd/pages/AdminMessagesView.jsx
FrontEnd/pages/AdminPanel.jsx
FrontEnd/pages/Browse.jsx
FrontEnd/pages/CreateListing.jsx
FrontEnd/pages/Dashboard.jsx
FrontEnd/pages/ForgotPassword.jsx
FrontEnd/pages/Home.jsx
FrontEnd/pages/InvoiceDetail.jsx
FrontEnd/pages/Invoices.jsx
FrontEnd/pages/ListingDetail.jsx
FrontEnd/pages/Listings.jsx
FrontEnd/pages/Login.jsx
FrontEnd/pages/Messages.jsx
FrontEnd/pages/OrderDetail.jsx
FrontEnd/pages/Profile.jsx
FrontEnd/pages/ProfileEdit.jsx
FrontEnd/pages/Register.jsx
FrontEnd/pages/ResetPassword.jsx
FrontEnd/pages/SavedProjects.jsx
FrontEnd/postcss.config.js
FrontEnd/services/api.js
FrontEnd/styles/App.css
FrontEnd/styles/index.css
FrontEnd/tailwind.config.js
FrontEnd/vite.config.js
index.html
package.json
PLATFORM_FLOW_DIAGRAM.md
postcss.config.js
README.md
tailwind.config.js
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="FrontEnd/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåä</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="ShockWave - Connect graphic designers with businesses. A marketplace for creative talent." />
    <title>ShockWave - Digital Marketplace for Designers</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/main.jsx"></script>
  </body>
</html>
</file>

<file path="FrontEnd/package.json">
{
  "name": "shockwave-frontend",
  "private": true,
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.7.9",
    "chart.js": "^4.4.3",
    "framer-motion": "^11.15.0",
    "lucide-react": "^0.554.0",
    "react": "^19.1.1",
    "react-chartjs-2": "^5.2.0",
    "react-dom": "^19.1.1",
    "react-router-dom": "^6.28.0",
    "socket.io-client": "^4.7.5"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^5.0.4",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.14",
    "vite": "^7.1.7"
  }
}
</file>

<file path="FrontEnd/postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="FrontEnd/tailwind.config.js">
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        charcoal: {
          DEFAULT: '#2D3436',
          light: '#3d4547',
          dark: '#1d2426',
        },
        lightgray: {
          DEFAULT: '#DFE6E9',
          light: '#F5F7F8',
          dark: '#B2BEC3',
        },
        mint: {
          DEFAULT: '#00CEC9',
          light: '#55EFC4',
          dark: '#00B894',
        },
        primary: {
          50: '#e6fffe',
          100: '#b3fffc',
          200: '#80fffa',
          300: '#4dffef',
          400: '#1afff7',
          500: '#00CEC9',
          600: '#00b5b0',
          700: '#009c98',
          800: '#008380',
          900: '#006a68',
        }
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { transform: 'translateY(10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        }
      }
    },
  },
  plugins: [],
}
</file>

<file path="FrontEnd/vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5174
  }
})
</file>

<file path="BackEnd/check-emails.js">
import mongoose from 'mongoose';
import dotenv from 'dotenv';
import connectDB from './config/database.js';
import User from './models/userModel.js';

dotenv.config();

const checkEmails = async () => {
  try {
    await connectDB();
    console.log('\n‚úÖ CHECKING USER EMAILS\n');
    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');

    const users = await User.find({}).select('name email role');

    console.log(`üìä Total Users: ${users.length}\n`);

    users.forEach((user, index) => {
      console.log(`User #${index + 1}:`);
      console.log(`   Name: ${user.name}`);
      console.log(`   Role: ${user.role}`);
      console.log(`   Email: ${user.email || 'NO EMAIL FIELD'}`);
      console.log('');
    });

    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');
  } catch (error) {
    console.error('‚ùå Failed:', error);
  } finally {
    await mongoose.disconnect();
    process.exit(0);
  }
};

checkEmails();
</file>

<file path="BackEnd/controllers/adminController.js">
import User from '../models/userModel.js';
import Listing from '../models/listingModel.js';
import Order from '../models/orderModel.js';
import Message from '../models/messageModel.js';

// @desc    Get all users with stats
// @route   GET /api/admin/users
// @access  Admin
export const getAllUsers = async (req, res, next) => {
  try {
    const users = await User.find({}).select('name email role is_active created_at').lean();
    res.json(users);
  } catch (error) {
    next(error);
  }
};

// @desc    Suspend or reactivate a user
// @route   PATCH /api/admin/users/:id/status
// @access  Admin
export const updateUserStatus = async (req, res, next) => {
  try {
    const { id } = req.params;
    const { is_active } = req.body;
    if (typeof is_active !== 'boolean') return res.status(400).json({ error: 'is_active must be a boolean' });

    const user = await User.findByIdAndUpdate(id, { is_active }, { new: true }).select('id name email role is_active');
    if (!user) return res.status(404).json({ error: 'User not found' });

    res.json({ message: `User status updated successfully`, user });
  } catch (error) {
    next(error);
  }
};

// @desc    Get platform analytics
// @route   GET /api/admin/analytics
// @access  Admin
export const getPlatformAnalytics = async (req, res, next) => {
  try {
    const [totalUsers, totalDesigners, totalBusinesses, totalProjects] = await Promise.all([
        User.countDocuments(),
        User.countDocuments({ role: 'designer' }),
        User.countDocuments({ role: 'business' }),
        Listing.countDocuments()
    ]);

    const thirtyDaysAgo = new Date();
    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

    const userGrowth = await User.aggregate([
      { $match: { created_at: { $gte: thirtyDaysAgo } } },
      { $group: { _id: { $dateToString: { format: '%Y-%m-%d', date: '$created_at' } }, count: { $sum: 1 } } },
      { $sort: { _id: 1 } },
    ]);
    
    const projectGrowth = await Listing.aggregate([
      { $match: { createdAt: { $gte: thirtyDaysAgo } } },
      { $group: { _id: { $dateToString: { format: '%Y-%m-%d', date: '$createdAt' } }, count: { $sum: 1 } } },
      { $sort: { _id: 1 } },
    ]);

    res.json({
      summary: { totalUsers, totalDesigners, totalBusinesses, totalProjects },
      charts: { userGrowth, projectGrowth }
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Get all message threads for moderation
// @route   GET /api/admin/messages
// @access  Admin
export const getAllMessageThreads = async (req, res, next) => {
    try {
        const allMessages = await Message.find({})
            .sort({ created_at: -1 })
            .populate('sender', 'name')
            .populate('recipient', 'name')
            .lean();

        const threadMap = new Map();
        allMessages.forEach(msg => {
            if (!threadMap.has(msg.thread_id)) {
                threadMap.set(msg.thread_id, {
                    thread_id: msg.thread_id,
                    participants: [
                        { id: msg.sender._id, name: msg.sender.name },
                        { id: msg.recipient._id, name: msg.recipient.name }
                    ],
                    last_message: msg.body,
                    last_message_date: msg.created_at,
                    is_flagged: msg.is_flagged, // Include the flag status
                });
            }
        });

        const threads = Array.from(threadMap.values());
        res.json(threads);
    } catch (error) {
        next(error);
    }
};

// @desc    Get all messages in a specific thread (for moderation)
// @route   GET /api/admin/messages/:threadId
// @access  Admin
export const getMessagesForModeration = async (req, res, next) => {
    try {
        const { threadId } = req.params;
        const messages = await Message.find({ thread_id: threadId })
            .populate('sender', 'name role')
            .sort({ created_at: 'asc' })
            .lean();
            
        if (!messages.length) return res.status(404).json({ error: 'Message thread not found.' });
        
        res.json(messages);
    } catch (error) {
        next(error);
    }
};

// @desc    Flag or unflag a message thread
// @route   PATCH /api/admin/messages/:threadId/flag
// @access  Admin
export const toggleFlagMessageThread = async (req, res, next) => {
    try {
        const { threadId } = req.params;
        const firstMessage = await Message.findOne({ thread_id: threadId });
        if (!firstMessage) return res.status(404).json({ error: 'Message thread not found.' });

        const newFlagState = !firstMessage.is_flagged;
        await Message.updateMany({ thread_id: threadId }, { $set: { is_flagged: newFlagState } });

        res.json({ message: `Thread has been ${newFlagState ? 'flagged' : 'unflagged'}.`, is_flagged: newFlagState });
    } catch (error) {
        next(error);
    }
};
</file>

<file path="BackEnd/controllers/invoiceController.js">
import Invoice from '../models/invoiceModel.js';
import Order from '../models/orderModel.js';
import { validationResult } from 'express-validator';

// @desc    Create a new invoice for a completed order (Designer only)
// @route   POST /api/invoices
// @access  Private (Designer)
export const createInvoice = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { order_id, due_date, notes } = req.body;
    const designerId = req.user.id;

    const order = await Order.findById(order_id)
      .populate('buyer', 'name email')
      .populate('seller', 'name email')
      .populate('listing', 'title');

    if (!order) {
      return res.status(404).json({ error: 'Order not found' });
    }
    if (order.seller.toString() !== designerId) {
      return res.status(403).json({ error: 'You are not the designer for this order' });
    }
    if (order.status !== 'completed') {
      return res.status(400).json({ error: 'Invoice can only be created for completed orders' });
    }

    const existingInvoice = await Invoice.findOne({ order: order_id });
    if (existingInvoice) {
      return res.status(409).json({ error: 'An invoice already exists for this order' });
    }

    const invoice = new Invoice({
      order: order_id,
      designer: designerId,
      business: order.buyer._id,
      amount: order.amount,
      due_date: due_date || new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days default
      notes: notes?.trim() || '',
      status: 'sent', // sent ‚Üí paid / overdue handled by cron later if you want
    });

    await invoice.save();

    const populated = await Invoice.findById(invoice._id)
      .populate('designer', 'name email')
      .populate('business', 'name email')
      .populate({
        path: 'order',
        populate: { path: 'listing', select: 'title' },
      });

    res.status(201).json({
      message: 'Invoice created successfully',
      invoice: {
        id: populated._id,
        invoice_number: `INV-${populated._id.toString().slice(-8).toUpperCase()}`,
        order_id: populated.order._id,
        listing_title: populated.order.listing.title,
        designer: populated.designer,
        business: populated.business,
        amount: populated.amount,
        status: populated.status,
        due_date: populated.due_date,
        notes: populated.notes,
        created_at: populated.created_at,
      },
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Get all invoices (for logged-in user)
// @route   GET /api/invoices
// @access  Private
export const getUserInvoices = async (req, res, next) => {
  try {
    const userId = req.user.id;
    const role = req.user.role;

    const query = role === 'designer' ? { designer: userId } : { business: userId };

    const invoices = await Invoice.find(query)
      .populate('designer', 'name')
      .populate('business', 'name')
      .populate({
        path: 'order',
        populate: { path: 'listing', select: 'title' },
      })
      .sort({ created_at: -1 })
      .lean();

    const formatted = invoices.map((inv) => ({
      id: inv._id,
      invoice_number: `INV-${inv._id.toString().slice(-8).toUpperCase()}`,
      order_id: inv.order._id,
      listing_title: inv.order.listing?.title || 'N/A',
      amount: inv.amount,
      status: inv.status,
      due_date: inv.due_date,
      created_at: inv.created_at,
      designer_name: inv.designer.name,
      business_name: inv.business.name,
      notes: inv.notes || '',
    }));

    res.json(formatted);
  } catch (error) {
    next(error);
  }
};

// @desc    Get single invoice by ID
// @route   GET /api/invoices/:id
// @access  Private (Designer or Business on invoice)
export const getInvoiceById = async (req, res, next) => {
  try {
    const { id } = req.params;
    const userId = req.user.id;

    const invoice = await Invoice.findById(id)
      .populate('designer', 'name email profile')
      .populate('business', 'name email profile')
      .populate({
        path: 'order',
        populate: { path: 'listing', select: 'title description' },
      })
      .lean();

    if (!invoice) return res.status(404).json({ error: 'Invoice not found' });

    const isParticipant = 
      invoice.designer._id.toString() === userId || 
      invoice.business._id.toString() === userId;

    if (!isParticipant && req.user.role !== 'admin') {
      return res.status(403).json({ error: 'Access denied' });
    }

    res.json({
      id: invoice._id,
      invoice_number: `INV-${invoice._id.toString().slice(-8).toUpperCase()}`,
      order_id: invoice.order._id,
      listing_title: invoice.order.listing.title,
      listing_description: invoice.order.listing.description,
      amount: invoice.amount,
      status: invoice.status,
      due_date: invoice.due_date,
      notes: invoice.notes || '',
      created_at: invoice.created_at,
      designer: {
        name: invoice.designer.name,
        email: invoice.designer.email,
        avatar_url: invoice.designer.profile?.avatar_url || '',
      },
      business: {
        name: invoice.business.name,
        email: invoice.business.email,
        avatar_url: invoice.business.profile?.avatar_url || '',
      },
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Mark invoice as paid (Business or Admin only)
// @route   PATCH /api/invoices/:id/pay
// @access  Private
export const markInvoiceAsPaid = async (req, res, next) => {
  try {
    const { id } = req.params;
    const userId = req.user.id;
    const role = req.user.role;

    const invoice = await Invoice.findById(id);
    if (!invoice) return res.status(404).json({ error: 'Invoice not found' });

    const isBusiness = invoice.business.toString() === userId;
    const isAdmin = role === 'admin';

    if (!isBusiness && !isAdmin) {
      return res.status(403).json({ error: 'Only the client or admin can mark as paid' });
    }

    if (invoice.status === 'paid') {
      return res.status(400).json({ error: 'Invoice already marked as paid' });
    }

    invoice.status = 'paid';
    await invoice.save();

    res.json({ message: 'Invoice marked as paid successfully', invoice });
  } catch (error) {
    next(error);
  }
};
</file>

<file path="BackEnd/controllers/progressUpdateController.js">
import { validationResult } from 'express-validator';
import ProgressUpdate from '../models/progressUpdateModel.js';
import Order from '../models/orderModel.js';

// @desc    Create a new progress update for an order
// @route   POST /api/orders/:orderId/updates
// @access  Private (Designer only)
export const createProgressUpdate = async (req, res, next) => {
    try {
        const errors = validationResult(req);
        if (!errors.isEmpty()) {
            return res.status(400).json({ errors: errors.array() });
        }

        const { orderId } = req.params;
        const { message } = req.body;
        const authorId = req.user.id;

        const order = await Order.findById(orderId);

        if (!order) {
            return res.status(404).json({ error: 'Order not found' });
        }

        // Ensure the person posting the update is the seller (designer) on the order
        if (order.seller.toString() !== authorId) {
            return res.status(403).json({ error: 'You are not authorized to post an update to this order.' });
        }
        
        // Ensure updates can only be posted while the project is active
        if (order.status !== 'in_progress' && order.status !== 'delivered') {
            return res.status(400).json({ error: 'Progress updates can only be added to active or delivered projects.' });
        }

        const newUpdate = new ProgressUpdate({
            order: orderId,
            author: authorId,
            message,
            // Attachments can be handled here in the future if you add file uploads for updates
        });

        await newUpdate.save();
        
        // Populate author info for the immediate response to the client
        const populatedUpdate = await ProgressUpdate.findById(newUpdate._id)
            .populate('author', 'name role')
            .lean();

        res.status(201).json({ message: 'Progress update posted successfully', update: populatedUpdate });
    } catch (error) {
        next(error);
    }
};
</file>

<file path="BackEnd/models/invoiceModel.js">
import mongoose from 'mongoose';

const invoiceSchema = new mongoose.Schema({
  order: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'Order',
    unique: true, // One invoice per order
  },
  designer: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  business: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  amount: {
    type: Number,
    required: true,
  },
  status: {
    type: String,
    enum: ['draft', 'sent', 'paid', 'overdue'],
    default: 'sent',
  },
  due_date: {
    type: Date,
    required: true,
  },
}, {
  timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' },
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

invoiceSchema.virtual('id').get(function() {
  return this._id.toHexString();
});

const Invoice = mongoose.model('Invoice', invoiceSchema);

export default Invoice;
</file>

<file path="BackEnd/models/listingModel.js">
import mongoose from 'mongoose';

const listingSchema = new mongoose.Schema({
  owner: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  title: {
    type: String,
    required: true,
  },
  description: {
    type: String,
    required: true,
  },
  budget_min: {
    type: Number,
  },
  budget_max: {
    type: Number,
  },
  deadline: {
    type: Date,
  },
  tags: {
    type: [String],
    default: [],
  },
  attachments: {
    type: [String], // Array of URLs
    default: [],
  },
  status: {
    type: String,
    enum: ['open', 'in_progress', 'completed', 'cancelled'],
    default: 'open',
  },
}, {
  timestamps: true, // Adds createdAt and updatedAt automatically
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

listingSchema.virtual('id').get(function() {
  return this._id.toHexString();
});

const Listing = mongoose.model('Listing', listingSchema);

export default Listing;
</file>

<file path="BackEnd/models/placeholder.txt">
// placeholder
</file>

<file path="BackEnd/models/portfolioItemModel.js">
import mongoose from 'mongoose';

const portfolioItemSchema = new mongoose.Schema({
  designer: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  title: {
    type: String,
    required: true,
  },
  description: {
    type: String,
  },
  file_url: {
    type: String,
    required: true,
  },
  file_type: {
    type: String, // e.g., 'png', 'pdf', 'docx'
    required: true,
  },
}, {
  timestamps: true,
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

portfolioItemSchema.virtual('id').get(function() {
  return this._id.toHexString();
});

const PortfolioItem = mongoose.model('PortfolioItem', portfolioItemSchema);

export default PortfolioItem;
</file>

<file path="BackEnd/models/progressUpdateModel.js">
import mongoose from 'mongoose';

const progressUpdateSchema = new mongoose.Schema({
  order: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'Order',
  },
  author: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  message: {
    type: String,
    required: true,
  },
  attachments: {
    type: [String], // Array of file URLs
    default: [],
  },
}, {
  timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' },
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

progressUpdateSchema.virtual('id').get(function() {
  return this._id.toHexString();
});

const ProgressUpdate = mongoose.model('ProgressUpdate', progressUpdateSchema);

export default ProgressUpdate;
</file>

<file path="BackEnd/models/reviewModel.js">
import mongoose from 'mongoose';

const reviewSchema = new mongoose.Schema({
  order: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'Order',
  },
  reviewer: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  reviewee: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  rating: {
    type: Number,
    required: true,
    min: 1,
    max: 5,
  },
  comment: {
    type: String,
  },
}, {
  timestamps: true,
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

reviewSchema.virtual('id').get(function() {
  return this._id.toHexString();
});

// Ensure a user can only review a specific order once
reviewSchema.index({ order: 1, reviewer: 1 }, { unique: true });

const Review = mongoose.model('Review', reviewSchema);

export default Review;
</file>

<file path="BackEnd/routes/dashboardRoutes.js">
import express from 'express';
import { getDashboardStats } from '../controllers/dashboardController.js';
import { authenticateToken } from '../middleware/auth.js';

const router = express.Router();

router.get('/stats', authenticateToken, getDashboardStats);

export default router;
</file>

<file path="BackEnd/routes/invoiceRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import {
  createInvoice,
  getUserInvoices,
  getInvoiceById,
  markInvoiceAsPaid,
} from '../controllers/invoiceController.js';
import { authenticateToken, requireRole } from '../middleware/auth.js';

const router = express.Router();

const createInvoiceValidation = [
  body('order_id').isMongoId().withMessage('Valid order ID required'),
  body('due_date').optional().isISO8601().toDate(),
  body('notes').optional().isString().trim(),
];

// Designer creates invoice
router.post(
  '/',
  authenticateToken,
  requireRole(['designer']),
  createInvoiceValidation,
  createInvoice
);

// Get all invoices for user
router.get('/', authenticateToken, getUserInvoices);

// Get single invoice
router.get('/:id', authenticateToken, getInvoiceById);

// Business marks invoice as paid
router.patch('/:id/pay', authenticateToken, markInvoiceAsPaid);

export default router;
</file>

<file path="BackEnd/routes/paymentsRoutes.js">
import express from 'express';
import { authenticateToken } from '../middleware/auth.js';

const router = express.Router();

// Create payment intent
router.post('/checkout', authenticateToken, (req, res) => {
  res.json({ message: 'Payment checkout - TODO' });
});

// Stripe webhook
router.post('/webhook', express.raw({ type: 'application/json' }), (req, res) => {
  res.json({ message: 'Payment webhook - TODO' });
});

export default router;
</file>

<file path="BackEnd/services/emailService.js">
import nodemailer from 'nodemailer';
import dotenv from 'dotenv';

dotenv.config();

const transporter = nodemailer.createTransport({
  host: process.env.SMTP_HOST,
  port: process.env.SMTP_PORT,
  secure: false, // true for 465, false for other ports
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASS,
  },
});

const sendEmail = async (to, subject, html) => {
  try {
    await transporter.sendMail({
      from: `"ShockWave Platform" <${process.env.SMTP_USER}>`,
      to,
      subject,
      html,
    });
    console.log(`‚úÖ Email sent to ${to} via ${process.env.SMTP_HOST}`);
  } catch (error) {
    console.error(`‚ùå Error sending email to ${to}:`, error.message);
    throw error;
  }
};


export const sendVerificationEmail = async (userEmail, token) => {
  const verificationUrl = `${process.env.CLIENT_URL}/verify-email/${token}`;
  const subject = 'Verify Your Email Address for ShockWave';
  const html = `
    <h1>Welcome to ShockWave!</h1>
    <p>Please click the link below to verify your email address:</p>
    <a href="${verificationUrl}" target="_blank">Verify My Email</a>
    <p>If you did not sign up for an account, you can safely ignore this email.</p>
  `;
  await sendEmail(userEmail, subject, html);
};


export const sendPasswordResetEmail = async (userEmail, token) => {
  const resetUrl = `${process.env.CLIENT_URL}/reset-password/${token}`;
  const subject = 'Password Reset Request for ShockWave';
  const html = `
    <h1>Password Reset Request</h1>
    <p>You requested a password reset for your ShockWave account. Please click the link below to set a new password:</p>
    <a href="${resetUrl}" target="_blank">Reset My Password</a>
    <p>This link will expire in one hour.</p>
    <p>If you did not request a password reset, please ignore this email.</p>
  `;
  await sendEmail(userEmail, subject, html);
};
</file>

<file path="BackEnd/services/placeholder.txt">
// placeholder
</file>

<file path="BackEnd/utils/placeholder.txt">
// placeholder
</file>

<file path="BackEnd/utils/tokenUtils.js">
import crypto from 'crypto';

// Generate a random token for email verification
export const generateVerificationToken = () => {
  return crypto.randomBytes(32).toString('hex');
};

// Generate a random token for password reset
export const generateResetToken = () => {
    return crypto.randomBytes(32).toString('hex');
};
</file>

<file path="DOCUMENTATION_INDEX.md">
# üìñ ShockWave Documentation Index

Welcome to the ShockWave platform documentation! This index will help you find the information you need quickly.

---

## üìë Available Documentation

### 1. [README.md](./README.md) 
**Start Here** - Main project documentation
- üìå Project overview
- ‚öôÔ∏è Tech stack
- üöÄ Quick start guide
- üîë Default test accounts
- üé® Design system overview
- üó∫Ô∏è Route summary

**Best For**: Getting started, understanding project setup, first-time setup

---

### 2. [USER_FLOW.md](./USER_FLOW.md)
**Complete User Journey Guide** - Detailed flow documentation
- üéØ First-time visitor flows
- üé® Designer complete workflow
- üíº Business hiring process  
- üîê Admin panel operations
- üîÑ Common user actions
- üì± Real-world journey examples

**Best For**: Understanding user behavior, planning features, UX design, testing scenarios

**Contents Include**:
- Registration & login processes
- Designer: Setup profile, find work, manage projects
- Business: Browse designers, post projects, hire & pay
- Admin: User management, monitoring, dispute resolution
- Messaging system flows
- Payment & escrow processes

---

### 3. [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md)
**Visual Flow Diagrams** - ASCII art visualizations
- üèóÔ∏è System architecture
- üîê Authentication flows
- üó∫Ô∏è Page navigation maps
- üí∞ Payment & escrow system
- üîç Search & filter flows
- üì± Mobile navigation
- üîî Notification system
- üìä Data flow architecture

**Best For**: Visual learners, system design, architecture planning, presentations

**Diagrams Include**:
```
‚úì High-level platform architecture
‚úì User authentication flow
‚úì Designer complete journey
‚úì Business complete journey
‚úì Page navigation map
‚úì Messaging system flow
‚úì Project lifecycle
‚úì Payment & escrow flow
‚úì Search & filter flow
‚úì Responsive mobile navigation
‚úì User states & permissions matrix
‚úì Error handling flows
‚úì Notification triggers
‚úì Data flow architecture
```

---

### 4. [QUICK_REFERENCE.md](./QUICK_REFERENCE.md)
**Developer Quick Reference** - Fast lookup guide
- üõ£Ô∏è All routes & components
- üë• User roles & permissions
- üé® Color palette reference
- üéØ Common UI patterns
- üîå API endpoints
- üì± Responsive breakpoints
- ‚úÖ Testing checklist
- üíª Development tips

**Best For**: Development work, quick lookups, code reference, debugging

**Quick Access To**:
- Route table with access levels
- User capabilities matrix
- Color hex codes & usage
- Button/card/input styles
- Auth context functions
- Feature status tracker
- Useful commands

---

## üéØ How to Use This Documentation

### I'm New to the Project
**Start Here**: 
1. Read [README.md](./README.md) for setup
2. Review [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) for routes
3. Check [USER_FLOW.md](./USER_FLOW.md) for user journeys

### I'm a Developer
**Start Here**:
1. [README.md](./README.md) - Setup & tech stack
2. [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Routes, API, patterns
3. [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Architecture

### I'm a Designer/UX
**Start Here**:
1. [USER_FLOW.md](./USER_FLOW.md) - Complete user journeys
2. [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Visual flows
3. [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Color palette & UI patterns

### I'm a Product Manager
**Start Here**:
1. [USER_FLOW.md](./USER_FLOW.md) - User stories & scenarios
2. [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Feature status
3. [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - System overview

### I'm Testing the Platform
**Start Here**:
1. [README.md](./README.md) - Test accounts
2. [USER_FLOW.md](./USER_FLOW.md) - Complete journey examples
3. [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Testing checklist

---

## üîç Find Information By Topic

### Authentication & Users
- **Setup & Login**: [README.md](./README.md) - Default accounts
- **Flow Details**: [USER_FLOW.md](./USER_FLOW.md) - Login/Register process
- **Visual Diagrams**: [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Auth flow
- **Developer Info**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Auth context

### User Roles & Permissions
- **Overview**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Role matrix
- **Designer Journey**: [USER_FLOW.md](./USER_FLOW.md) - Designer section
- **Business Journey**: [USER_FLOW.md](./USER_FLOW.md) - Business section
- **Visual Flow**: [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Complete journeys

### Navigation & Routes
- **Route List**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Routes table
- **Navigation Flow**: [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Nav map
- **Public vs Protected**: [README.md](./README.md) - Route summary

### Design & UI
- **Color Palette**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Colors reference
- **UI Patterns**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Common patterns
- **Design System**: [README.md](./README.md) - Design overview

### Features & Workflows
- **Browse Designers**: [USER_FLOW.md](./USER_FLOW.md) - Browse flow
- **Messaging**: [USER_FLOW.md](./USER_FLOW.md) - Messaging section
- **Payments**: [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Payment flow
- **Feature Status**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Status table

### Development
- **Setup Guide**: [README.md](./README.md) - Quick start
- **API Reference**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - API endpoints
- **Code Patterns**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - UI patterns
- **Architecture**: [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Data flow

---

## üìä Documentation Stats

| Document | Pages | Focus | Audience |
|----------|-------|-------|----------|
| README.md | 1 | Setup & Overview | Everyone |
| USER_FLOW.md | 10+ | User Journeys | UX/PM/QA |
| PLATFORM_FLOW_DIAGRAM.md | 8+ | Visual Diagrams | Devs/Designers |
| QUICK_REFERENCE.md | 6+ | Quick Lookup | Developers |

**Total Documentation**: 25+ pages of comprehensive guides

---

## üé® Visual Legend

Throughout the documentation, you'll see these symbols:

- ‚úÖ **Active/Working** - Feature is live and functional
- üöß **In Progress** - Currently being developed
- üìã **Planned** - On the roadmap
- ‚ùå **Not Allowed** - Permission denied
- üîí **Secure** - Security feature
- üí¨ **Communication** - Messaging/chat feature
- ‚≠ê **Rating** - Review system
- üí∞ **Payment** - Financial transaction
- üì± **Mobile** - Mobile-specific feature
- üéØ **Goal** - End objective

---

## üîÑ Documentation Updates

**Current Version**: 1.0.0  
**Last Updated**: November 3, 2025  
**Status**: Complete & Current

### Recent Updates
- ‚úÖ Complete user flow documentation
- ‚úÖ Visual flow diagrams added
- ‚úÖ Quick reference guide created
- ‚úÖ Color scheme updated to Charcoal/LightGray/Mint
- ‚úÖ Full-screen page layouts implemented

### Planned Updates
- üìã API documentation (when backend is finalized)
- üìã Component library documentation
- üìã Testing strategy guide
- üìã Deployment guide
- üìã Performance optimization guide

---

## üí° Tips for Using This Documentation

1. **Bookmark This Index** - Come back when you need to find something
2. **Use Ctrl+F** - Search within documents for specific terms
3. **Follow Links** - Each document cross-references others
4. **Check Version Dates** - Ensure you're reading current info
5. **Contribute Updates** - Keep docs current as features evolve

---

## ü§ù Contributing to Documentation

Found something unclear or outdated?

1. Check the document date at the bottom
2. Verify current codebase matches documentation
3. Update the relevant `.md` file
4. Update the "Last Updated" date
5. Note changes in this index

---

## üìû Need Help?

If you can't find what you're looking for:

1. **Search all docs** - Use your editor's search across files
2. **Check code comments** - Look at component files
3. **Review test files** - See implementation examples
4. **Ask the team** - Someone may know the answer
5. **Update docs** - Add what you learned for others

---

## üéì Learning Path

### Week 1: Basics
1. Read [README.md](./README.md)
2. Set up the project
3. Explore the UI
4. Test with default accounts

### Week 2: User Flows
1. Read [USER_FLOW.md](./USER_FLOW.md)
2. Follow designer journey
3. Follow business journey
4. Test all flows

### Week 3: Development
1. Read [QUICK_REFERENCE.md](./QUICK_REFERENCE.md)
2. Study code patterns
3. Review [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md)
4. Build a feature

### Week 4: Mastery
1. Review all documentation
2. Update outdated sections
3. Add new features
4. Share knowledge

---

## üåü Documentation Highlights

### Most Useful Sections

**For Quick Answers**:
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Page-by-page breakdown
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Color palette
- [README.md](./README.md) - Test accounts

**For Understanding Flow**:
- [USER_FLOW.md](./USER_FLOW.md) - Complete user journey examples
- [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Project lifecycle
- [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Payment flow

**For Development**:
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - API endpoints
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - UI patterns
- [PLATFORM_FLOW_DIAGRAM.md](./PLATFORM_FLOW_DIAGRAM.md) - Data architecture

---

## üì± Mobile Optimization

All documentation is optimized for reading on:
- Desktop screens (recommended)
- Tablets (readable)
- Mobile phones (scroll-friendly)

Use markdown viewers for best experience!

---

## üîó External Resources

While our docs are comprehensive, you might also find these helpful:
- **React Docs**: https://react.dev
- **Tailwind CSS**: https://tailwindcss.com
- **Framer Motion**: https://www.framer.com/motion
- **Vite**: https://vitejs.dev

---

**Happy Building!** üåäüöÄ

*ShockWave - Connect. Create. Collaborate.*

---

**Document Info**:
- **File**: DOCUMENTATION_INDEX.md
- **Purpose**: Central navigation for all documentation
- **Audience**: All team members
- **Version**: 1.0.0
- **Last Updated**: November 3, 2025
</file>

<file path="ERROR_CHECK_REPORT.md">
# ‚úÖ SHOCKWAVE - ERROR CHECK RESULTS

## Date: October 28, 2025

---

## üîç CODE ERRORS CHECK

### Backend Files:
- ‚úÖ `server/config/database.js` - No errors
- ‚úÖ `server/routes/auth.js` - No errors  
- ‚úÖ `server/middleware/auth.js` - No errors
- ‚úÖ `server/scripts/init.js` - No errors
- ‚úÖ `server/package.json` - No errors

### Frontend Files:
- ‚úÖ `src/pages/Login.jsx` - No errors
- ‚úÖ `src/pages/Register.jsx` - No errors
- ‚úÖ `src/context/AuthContext.jsx` - No errors
- ‚úÖ `src/services/api.js` - No errors

---

## üóÑÔ∏è DATABASE VERIFICATION

‚úÖ **Database Created Successfully**
- Location: `server/database.sqlite`
- Schema: Updated with `username` field (no email)

‚úÖ **Test Accounts Created**:
```
üë®‚Äçüé® DESIGNER
   ID: 1
   Username: designer_creative
   Password: design2024
   Name: Creative Designer
   Status: Active

üíº BUSINESS
   ID: 2
   Username: business_startup
   Password: startup2024
   Name: Tech Startup Co
   Status: Active

üîê ADMIN
   ID: 3
   Username: admin_master
   Password: admin2024
   Name: System Administrator
   Status: Active
```

---

## üöÄ SERVER STATUS

‚úÖ **Backend Server**: Running successfully
- Port: 5000
- Environment: development
- Started with: `npm run dev` (nodemon)
- Status: No startup errors

---

## üìã CHANGES SUMMARY

### What Was Changed:

1. **Authentication System**
   - ‚úÖ Changed from email-based to username-based login
   - ‚úÖ Simplified for testing (removed email verification)

2. **Database Schema**
   - ‚úÖ Removed `email` field
   - ‚úÖ Added `username` field (UNIQUE)
   - ‚úÖ Removed `email_verified` field

3. **Test Accounts**
   - ‚úÖ All previous users cleared
   - ‚úÖ 3 new test accounts created
   - ‚úÖ Clear, memorable usernames and passwords

4. **Login UI**
   - ‚úÖ Modern card-based design
   - ‚úÖ Test credentials displayed on login page
   - ‚úÖ Click-to-fill functionality added
   - ‚úÖ Visual role indicators

5. **Scripts**
   - ‚úÖ Added `npm run db:init` command
   - ‚úÖ Database initialization script updated

---

## ‚úÖ EVERYTHING IS READY FOR TESTING

### To Start Testing:

1. **Backend** (already running):
   ```bash
   cd server
   npm run dev
   ```

2. **Frontend** (start in new terminal):
   ```bash
   npm run dev
   ```

3. **Login**:
   - Go to http://localhost:5173/login
   - Click any test account card
   - Credentials auto-fill
   - Click "Sign In"

---

## üéØ NO ERRORS FOUND

All files compile successfully with no syntax or runtime errors. The authentication system is fully functional and ready for testing.

### Files Verified:
- ‚úÖ 8 JavaScript files (no errors)
- ‚úÖ 2 JSX files (no errors)
- ‚úÖ 1 Database schema (valid)
- ‚úÖ 1 Package.json (valid)
- ‚úÖ Server starts successfully
- ‚úÖ Database initialized correctly
- ‚úÖ Test accounts created

---

## üìù NOTES

- Server is running on port 5000 ‚úÖ
- Database has exactly 3 users ‚úÖ
- All passwords are hashed with bcrypt ‚úÖ
- JWT tokens configured ‚úÖ
- CORS enabled for localhost:5173 ‚úÖ
- Test credentials visible on login page ‚úÖ

**Status: READY FOR PRODUCTION TESTING** üöÄ
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])
</file>

<file path="FrontEnd/components/Footer.jsx">
import { Link } from 'react-router-dom';

const Footer = () => {
  return (
    <footer className="bg-charcoal text-white mt-auto">
      <div className="max-w-7xl mx-auto py-8 sm:py-10 md:py-12 px-4 sm:px-6 lg:px-8">
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8">
          <div className="col-span-1 sm:col-span-2 lg:col-span-2">
            <h3 className="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-mint">ShockWave</h3>
            <p className="text-sm sm:text-base text-lightgray mb-4 max-w-md">
              Connecting talented graphic designers with businesses worldwide. 
              Create, collaborate, and grow your design career.
            </p>
            <div className="flex space-x-4 mt-4">
              <a href="#" className="text-lightgray-dark hover:text-mint transition-colors" aria-label="Facebook">
                <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
              </a>
              <a href="#" className="text-lightgray-dark hover:text-mint transition-colors" aria-label="Twitter">
                <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
              </a>
              <a href="#" className="text-lightgray-dark hover:text-mint transition-colors" aria-label="LinkedIn">
                <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
              </a>
            </div>
          </div>
          
          <div>
            <h4 className="text-sm sm:text-base font-semibold mb-3 sm:mb-4 text-white">For Designers</h4>
            <ul className="space-y-2 text-xs sm:text-sm text-lightgray">
              <li>
                <Link to="/browse" className="hover:text-mint transition-colors inline-block">
                  Find Work
                </Link>
              </li>
              <li>
                <Link to="/dashboard" className="hover:text-mint transition-colors inline-block">
                  Build Portfolio
                </Link>
              </li>
              <li>
                <a href="#" className="hover:text-mint transition-colors inline-block">
                  Success Stories
                </a>
              </li>
              <li>
                <a href="#" className="hover:text-mint transition-colors inline-block">
                  Resources
                </a>
              </li>
            </ul>
          </div>
          
          <div>
            <h4 className="text-sm sm:text-base font-semibold mb-3 sm:mb-4 text-white">For Businesses</h4>
            <ul className="space-y-2 text-xs sm:text-sm text-lightgray">
              <li>
                <a href="#" className="hover:text-mint transition-colors inline-block">
                  Post a Job
                </a>
              </li>
              <li>
                <Link to="/browse" className="hover:text-mint transition-colors inline-block">
                  Browse Designers
                </Link>
              </li>
              <li>
                <a href="#" className="hover:text-mint transition-colors inline-block">
                  Enterprise
                </a>
              </li>
              <li>
                <a href="#" className="hover:text-mint transition-colors inline-block">
                  Pricing
                </a>
              </li>
            </ul>
          </div>
        </div>
        
        <div className="mt-6 sm:mt-8 pt-6 sm:pt-8 border-t border-charcoal-light">
          <div className="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
            <p className="text-xs sm:text-sm text-lightgray-dark text-center sm:text-left">
              &copy; 2025 ShockWave. All rights reserved.
            </p>
            <div className="flex flex-wrap justify-center gap-4 sm:gap-6 text-xs sm:text-sm text-lightgray-dark">
              <a href="#" className="hover:text-mint transition-colors">Privacy Policy</a>
              <a href="#" className="hover:text-mint transition-colors">Terms of Service</a>
              <a href="#" className="hover:text-mint transition-colors">Contact</a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  );
};

export default Footer;
</file>

<file path="FrontEnd/components/PrivateRoute.jsx">
import { Navigate, useLocation } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

const PrivateRoute = ({ children, roles }) => {
  const { isAuthenticated, user, loading } = useAuth();
  const location = useLocation();

  if (loading) {
    // You can add a loading spinner here
    return <div>Loading...</div>;
  }

  if (!isAuthenticated) {
    // Redirect them to the /login page, but save the current location they were
    // trying to go to. This allows us to send them along to that page after they login.
    return <Navigate to="/login" state={{ from: location }} replace />;
  }

  if (roles && !roles.includes(user.role)) {
    // Redirect them to a "not authorized" page or the home page
    return <Navigate to="/" replace />;
  }

  return children;
};

export default PrivateRoute;
</file>

<file path="FrontEnd/main.jsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
// Correct the path to the CSS file
import './styles/index.css' 
import App from './App.jsx'

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
</file>

<file path="FrontEnd/pages/AdminMessagesView.jsx">
import { useState, useEffect } from 'react';
import { adminAPI } from '../services/api';

const AdminMessagesView = () => {
    const [threads, setThreads] = useState([]);
    const [activeThread, setActiveThread] = useState(null);
    const [messages, setMessages] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState('');

    const fetchThreads = async () => {
        try {
            setLoading(true);
            const res = await adminAPI.getAllMessageThreads();
            setThreads(res.data);
        } catch (err) {
            setError("Failed to fetch message threads.");
            console.error(err);
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        fetchThreads();
    }, []);

    const handleThreadClick = async (thread) => {
        setActiveThread(thread);
        setMessages([]); // Clear previous messages
        try {
            const res = await adminAPI.getMessagesForModeration(thread.thread_id);
            setMessages(res.data);
        } catch (err) {
            setError(`Failed to fetch messages for thread ${thread.thread_id}.`);
            console.error(err);
        }
    };

    const handleToggleFlag = async () => {
        if (!activeThread) return;
        try {
            const res = await adminAPI.toggleFlagThread(activeThread.thread_id);
            // Update the flag status in the UI immediately
            const updatedThread = { ...activeThread, is_flagged: res.data.is_flagged };
            setActiveThread(updatedThread);
            setThreads(prevThreads => prevThreads.map(t => 
                t.thread_id === activeThread.thread_id ? updatedThread : t
            ));
        } catch (error) {
            alert('Failed to update flag status.');
        }
    };

    if (loading) return <p>Loading message threads...</p>;
    if (error) return <p className="text-red-500">{error}</p>;

    return (
        <div className="h-[calc(100vh-12rem)] flex bg-white rounded-lg shadow-lg border overflow-hidden">
            {/* Left Panel: Conversation Threads */}
            <div className="w-full md:w-1/3 border-r flex flex-col">
                <div className="p-4 border-b flex justify-between items-center">
                    <h2 className="text-xl font-bold">All Conversations</h2>
                </div>
                <div className="overflow-y-auto">
                    {threads.map(thread => (
                        <div key={thread.thread_id} onClick={() => handleThreadClick(thread)} className={`p-4 cursor-pointer hover:bg-gray-100 border-b ${activeThread?.thread_id === thread.thread_id ? 'bg-blue-50' : ''} ${thread.is_flagged ? 'border-l-4 border-red-500 pl-3' : ''}`}>
                            <p className="font-semibold text-sm">{thread.participants.map(p => p.name).join(' & ')}</p>
                            <p className="text-sm text-gray-600 truncate">{thread.last_message}</p>
                            <p className="text-xs text-gray-400 mt-1">{new Date(thread.last_message_date).toLocaleString()}</p>
                        </div>
                    ))}
                </div>
            </div>
            
            {/* Right Panel: Active Chat */}
            <div className="hidden md:flex w-2/3 flex-col">
                {activeThread ? (
                    <>
                        <div className="p-4 border-b bg-gray-50 flex justify-between items-center">
                            <h2 className="text-xl font-bold">{activeThread.participants.map(p => p.name).join(' & ')}</h2>
                            <button onClick={handleToggleFlag} className={`px-3 py-1 text-sm font-semibold rounded ${activeThread.is_flagged ? 'bg-yellow-500 text-white' : 'bg-red-500 text-white'}`}>
                                {activeThread.is_flagged ? 'Unflag Thread' : 'Flag Thread'}
                            </button>
                        </div>
                        <div className="flex-1 p-4 overflow-y-auto bg-gray-100">
                            {messages.map(msg => (
                                <div key={msg._id} className="mb-4">
                                    <p className="font-bold">{msg.sender.name} <span className="text-xs text-gray-500">({msg.sender.role})</span></p>
                                    <div className="p-3 bg-white rounded-lg shadow-sm whitespace-pre-wrap">{msg.body}</div>
                                    <p className="text-xs text-gray-400 text-right mt-1">{new Date(msg.created_at).toLocaleString()}</p>
                                </div>
                            ))}
                        </div>
                    </>
                ) : <div className="flex-1 flex items-center justify-center text-gray-500">Select a conversation to view its content.</div>}
            </div>
        </div>
    );
};

export default AdminMessagesView;
</file>

<file path="FrontEnd/pages/CreateListing.jsx">
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { motion } from 'framer-motion';
import { listingAPI } from '../services/api';

const CreateListing = () => {
  const navigate = useNavigate();
  const [formData, setFormData] = useState({
    title: '',
    description: '',
    budget_min: '',
    budget_max: '',
  });
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    try {
      await listingAPI.createListing(formData);
      navigate('/listings');
    } catch (err) {
      const errorMessage = err.response?.data?.errors?.[0]?.msg || err.response?.data?.error || 'Failed to create listing.';
      setError(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-lightgray-light py-12 px-4 sm:px-6 lg:px-8">
      <motion.div
        className="max-w-3xl mx-auto"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
      >
        <div className="bg-white rounded-2xl shadow-xl p-8 border-2 border-mint/20">
          <h1 className="text-3xl font-bold text-charcoal mb-6">Post a New Project</h1>
          <form onSubmit={handleSubmit} className="space-y-6">
            {error && <div className="text-red-500 bg-red-100 p-3 rounded-md">{error}</div>}
            
            <div>
              <label htmlFor="title" className="block text-sm font-medium text-charcoal mb-2">Project Title</label>
              <input id="title" name="title" type="text" required value={formData.title} onChange={handleChange} className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" placeholder="e.g., Logo for a new coffee shop" />
            </div>
            
            <div>
              <label htmlFor="description" className="block text-sm font-medium text-charcoal mb-2">Project Description</label>
              <textarea id="description" name="description" rows="5" required value={formData.description} onChange={handleChange} className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" placeholder="Describe the project requirements in detail..."></textarea>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label htmlFor="budget_min" className="block text-sm font-medium text-charcoal mb-2">Minimum Budget ($)</label>
                <input id="budget_min" name="budget_min" type="number" required value={formData.budget_min} onChange={handleChange} className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" placeholder="e.g., 500" />
              </div>
              <div>
                <label htmlFor="budget_max" className="block text-sm font-medium text-charcoal mb-2">Maximum Budget ($)</label>
                <input id="budget_max" name="budget_max" type="number" required value={formData.budget_max} onChange={handleChange} className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" placeholder="e.g., 1500" />
              </div>
            </div>

            <div className="flex justify-end gap-4 pt-4">
              <button type="button" onClick={() => navigate('/dashboard')} className="px-6 py-2 rounded-lg text-charcoal bg-lightgray hover:bg-lightgray-dark">Cancel</button>
              <button type="submit" disabled={isLoading} className="px-6 py-2 rounded-lg text-white bg-mint hover:bg-mint-dark disabled:opacity-50">{isLoading ? 'Submitting...' : 'Post Project'}</button>
            </div>
          </form>
        </div>
      </motion.div>
    </div>
  );
};

export default CreateListing;
</file>

<file path="FrontEnd/pages/ForgotPassword.jsx">
import { useState } from 'react';
import { Link } from 'react-router-dom';
import { authAPI } from '../services/api';
import { motion } from 'framer-motion';

const ForgotPassword = () => {
  const [email, setEmail] = useState('');
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    setError('');
    setMessage('');
    try {
      const res = await authAPI.forgotPassword(email);
      setMessage(res.data.message);
    } catch (err) {
      setError(err.response?.data?.error || 'Failed to send reset email.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-lightgray-light py-12 px-4">
      <motion.div
        className="max-w-md w-full"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
      >
        <div className="bg-white rounded-2xl shadow-xl p-8 border-2 border-mint/20">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold text-charcoal">Forgot Password</h2>
            <p className="text-sm text-charcoal-light mt-2">
              Enter your email and we'll send you a link to reset your password.
            </p>
          </div>
          <form onSubmit={handleSubmit} className="space-y-6">
            {error && <div className="bg-red-100 text-red-700 p-3 rounded-md text-sm">{error}</div>}
            {message && <div className="bg-green-100 text-green-700 p-3 rounded-md text-sm">{message}</div>}
            <div>
              <label htmlFor="email" className="block text-sm font-medium text-charcoal mb-2">
                Email Address
              </label>
              <input
                id="email"
                name="email"
                type="email"
                required
                className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint"
                placeholder="you@example.com"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
              />
            </div>
            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-mint text-white py-3 rounded-lg font-medium hover:bg-mint-dark disabled:opacity-50"
            >
              {isLoading ? 'Sending...' : 'Send Reset Link'}
            </button>
          </form>
          <div className="mt-6 text-center">
            <p className="text-sm text-charcoal-light">
              Remember your password?{' '}
              <Link to="/login" className="font-medium text-mint hover:text-mint-dark">
                Sign In
              </Link>
            </p>
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export default ForgotPassword;
</file>

<file path="FrontEnd/pages/Home.jsx">
import { Link } from 'react-router-dom';
import { motion } from 'framer-motion';

const Home = () => {
  return (
    <div className="min-h-screen bg-lightgray-light">
      {/* Hero Section */}
      <motion.section 
        className="bg-gradient-to-br from-charcoal via-charcoal-light to-charcoal-dark text-white min-h-screen flex items-center justify-center"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.8 }}
      >
        {/* Hero Content */}
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center py-12 sm:py-16">
          {/* Hero Content */}
          <motion.h1 
            className="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-6 sm:mb-8 leading-tight"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8, delay: 0.2 }}
          >
            Connect. Create. Collaborate.
          </motion.h1>
          <motion.p 
            className="text-lg sm:text-xl md:text-2xl lg:text-3xl mb-8 sm:mb-10 text-lightgray max-w-3xl mx-auto px-4"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8, delay: 0.4 }}
          >
            The marketplace where graphic designers and businesses thrive together
          </motion.p>
          <motion.div 
            className="flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center items-center px-4"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8, delay: 0.6 }}
          >
            <Link 
              to="/login" 
              className="w-full sm:w-auto bg-mint text-charcoal px-8 sm:px-10 py-4 rounded-lg text-base sm:text-lg font-semibold hover:bg-mint-light transition-all shadow-lg hover:shadow-xl transform hover:scale-105"
            >
              Get Started
            </Link>
            <Link 
              to="/browse" 
              className="w-full sm:w-auto border-2 border-mint text-mint px-8 sm:px-10 py-4 rounded-lg text-base sm:text-lg font-semibold hover:bg-mint hover:text-charcoal transition-all"
            >
              Browse Designers
            </Link>
          </motion.div>
        </div>
      </motion.section>

      {/* Features Section */}
      <section className="py-16 sm:py-20 md:py-24 bg-white min-h-screen flex items-center">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
          <div className="text-center mb-16 sm:mb-20">
            <h2 className="text-3xl sm:text-4xl md:text-5xl font-bold text-charcoal mb-4 sm:mb-6">
              Why Choose ShockWave?
            </h2>
            <p className="text-lg sm:text-xl md:text-2xl text-charcoal-light px-4">
              Everything you need to succeed in the design marketplace
            </p>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 sm:gap-10">
            <motion.div 
              className="text-center p-6 sm:p-8 rounded-lg hover:bg-lightgray-light transition-colors border-2 border-transparent hover:border-mint"
              whileHover={{ scale: 1.05 }}
              transition={{ duration: 0.2 }}
            >
              <div className="bg-mint/10 w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6">
                <svg className="w-8 h-8 sm:w-10 sm:h-10 text-mint" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
              </div>
              <h3 className="text-xl sm:text-2xl font-semibold mb-3 sm:mb-4 text-charcoal">Easy Discovery</h3>
              <p className="text-base sm:text-lg text-charcoal-light">
                Find the perfect designer or project with our advanced search and filtering system
              </p>
            </motion.div>

            <motion.div 
              className="text-center p-6 sm:p-8 rounded-lg hover:bg-lightgray-light transition-colors border-2 border-transparent hover:border-mint"
              whileHover={{ scale: 1.05 }}
              transition={{ duration: 0.2 }}
            >
              <div className="bg-mint/10 w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6">
                <svg className="w-8 h-8 sm:w-10 sm:h-10 text-mint" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
              </div>
              <h3 className="text-xl sm:text-2xl font-semibold mb-3 sm:mb-4 text-charcoal">Secure Payments</h3>
              <p className="text-base sm:text-lg text-charcoal-light">
                Safe and secure payment processing with escrow protection for all transactions
              </p>
            </motion.div>

            <motion.div 
              className="text-center p-6 sm:p-8 rounded-lg hover:bg-lightgray-light transition-colors sm:col-span-2 md:col-span-1 border-2 border-transparent hover:border-mint"
              whileHover={{ scale: 1.05 }}
              transition={{ duration: 0.2 }}
            >
              <div className="bg-mint/10 w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6">
                <svg className="w-8 h-8 sm:w-10 sm:h-10 text-mint" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
              </div>
              <h3 className="text-xl sm:text-2xl font-semibold mb-3 sm:mb-4 text-charcoal">Direct Communication</h3>
              <p className="text-base sm:text-lg text-charcoal-light">
                Built-in messaging system to collaborate effectively throughout the project
              </p>
            </motion.div>
          </div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-16 sm:py-20 md:py-24 bg-lightgray min-h-screen flex items-center">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center w-full">
          <h2 className="text-3xl sm:text-4xl md:text-5xl font-bold text-charcoal mb-4 sm:mb-6">
            Ready to Start Your Journey?
          </h2>
          <p className="text-lg sm:text-xl md:text-2xl text-charcoal-light mb-8 sm:mb-10 px-4">
            Join thousands of designers and businesses already using ShockWave
          </p>
          <div className="flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center items-center px-4">
            <Link 
              to="/login" 
              className="w-full sm:w-auto bg-mint text-white px-8 sm:px-10 py-4 rounded-lg text-base sm:text-lg font-semibold hover:bg-mint-dark transition-all shadow-md hover:shadow-lg transform hover:scale-105"
            >
              Join as Designer
            </Link>
            <Link 
              to="/login" 
              className="w-full sm:w-auto bg-charcoal text-white px-8 sm:px-10 py-4 rounded-lg text-base sm:text-lg font-semibold hover:bg-charcoal-light transition-all shadow-md hover:shadow-lg transform hover:scale-105"
            >
              Hire Designers
            </Link>
          </div>
        </div>
      </section>
    </div>
  );
};

export default Home;
</file>

<file path="FrontEnd/pages/InvoiceDetail.jsx">
import { useParams, useNavigate } from "react-router-dom";
import { useState, useEffect } from "react";

function InvoiceDetail() {
  const { id } = useParams();
  const navigate = useNavigate();
  const [invoice, setInvoice] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // TODO: Fetch invoice details from API
    // For now, using placeholder data
    setInvoice({
      id,
      invoiceNumber: `INV-${id}`,
      date: new Date().toLocaleDateString(),
      dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString(),
      amount: 0,
      status: "pending",
      items: []
    });
    setLoading(false);
  }, [id]);

  if (loading) {
    return <div className="container mx-auto p-6">Loading...</div>;
  }

  return (
    <div className="container mx-auto p-6">
      <button
        onClick={() => navigate(-1)}
        className="mb-6 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded"
      >
        ‚Üê Back
      </button>

      <div className="bg-white shadow-md rounded-lg p-6">
        <h1 className="text-3xl font-bold mb-6">Invoice Detail</h1>
        
        <div className="grid grid-cols-2 gap-4 mb-6">
          <div>
            <p className="text-gray-600">Invoice Number</p>
            <p className="font-semibold">{invoice.invoiceNumber}</p>
          </div>
          <div>
            <p className="text-gray-600">Status</p>
            <p className="font-semibold capitalize">{invoice.status}</p>
          </div>
          <div>
            <p className="text-gray-600">Date</p>
            <p className="font-semibold">{invoice.date}</p>
          </div>
          <div>
            <p className="text-gray-600">Due Date</p>
            <p className="font-semibold">{invoice.dueDate}</p>
          </div>
        </div>

        <div className="border-t pt-4">
          <h2 className="text-xl font-semibold mb-4">Items</h2>
          {invoice.items.length === 0 ? (
            <p className="text-gray-500">No items</p>
          ) : (
            <table className="w-full">
              <thead>
                <tr className="border-b">
                  <th className="text-left py-2">Description</th>
                  <th className="text-right py-2">Amount</th>
                </tr>
              </thead>
              <tbody>
                {invoice.items.map((item, index) => (
                  <tr key={index} className="border-b">
                    <td className="py-2">{item.description}</td>
                    <td className="text-right py-2">${item.amount}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          )}
        </div>

        <div className="mt-6 text-right">
          <p className="text-2xl font-bold">
            Total: ${invoice.amount}
          </p>
        </div>
      </div>
    </div>
  );
}

export default InvoiceDetail;
</file>

<file path="FrontEnd/pages/Invoices.jsx">
import { useState, useEffect } from 'react';
import { invoiceAPI } from '../services/api';
import { useAuth } from '../context/AuthContext';
import { Link } from 'react-router-dom';

const Invoices = () => {
    const [invoices, setInvoices] = useState([]);
    const [loading, setLoading] = useState(true);
    const { user } = useAuth();

    useEffect(() => {
        const fetchInvoices = async () => {
            try {
                const res = await invoiceAPI.getInvoices();
                setInvoices(res.data);
            } catch (error) {
                console.error("Failed to fetch invoices", error);
            } finally {
                setLoading(false);
            }
        };
        fetchInvoices();
    }, []);

    if (loading) {
        return <div className="p-8 text-center">Loading invoices...</div>;
    }

    return (
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <h1 className="text-3xl font-bold text-gray-900 mb-6">Invoices</h1>
            <div className="bg-white p-4 rounded-lg shadow overflow-x-auto">
                {invoices.length === 0 ? (
                    <div className="text-center py-10">
                        <p className="text-gray-600">You have no invoices to display.</p>
                        {user.role === 'designer' && <p className="text-sm text-gray-500 mt-2">Invoices can be generated from a completed order page.</p>}
                    </div>
                ) : (
                    <table className="w-full text-left">
                        <thead className="bg-gray-50">
                            <tr>
                                <th className="p-3">Invoice ID</th>
                                <th className="p-3">Project</th>
                                <th className="p-3">{user.role === 'designer' ? 'Client' : 'Designer'}</th>
                                <th className="p-3">Amount</th>
                                <th className="p-3">Status</th>
                                <th className="p-3">Due Date</th>
                                <th className="p-3">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {invoices.map(invoice => (
                                <tr key={invoice.id} className="border-b hover:bg-gray-50">
                                    <td className="p-3 text-sm text-gray-500 font-mono">#{invoice.id.slice(-6)}</td>
                                    <td className="p-3 font-medium text-charcoal">{invoice.listing_title}</td>
                                    <td className="p-3">{user.role === 'designer' ? invoice.business.name : invoice.designer.name}</td>
                                    <td className="p-3 font-semibold text-mint">${invoice.amount.toFixed(2)}</td>
                                    <td className="p-3">
                                        <span className={`px-2 py-1 text-xs rounded-full capitalize ${invoice.status === 'paid' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`}>
                                            {invoice.status}
                                        </span>
                                    </td>
                                    <td className="p-3">{new Date(invoice.due_date).toLocaleDateString()}</td>
                                    <td className="p-3">
                                     <Link to={`/invoice/${invoice.id}`} className="text-sm text-blue-600 hover:underline">
                                         View Details
                                       </Link>
                                     </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                )}
            </div>
        </div>
    );
};

export default Invoices;
</file>

<file path="FrontEnd/pages/Listings.jsx">
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { motion } from 'framer-motion';
import { listingAPI } from '../services/api';

const Listings = () => {
  const [listings, setListings] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchListings = async () => {
      try {
        const response = await listingAPI.getListings();
        setListings(response.data);
      } catch (error) {
        console.error('Failed to fetch listings:', error);
      } finally {
        setLoading(false);
      }
    };
    fetchListings();
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-lightgray-light">
        <div className="animate-spin rounded-full h-32 w-32 border-b-4 border-mint"></div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-lightgray-light">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="flex justify-between items-center mb-8">
          <div>
            <h1 className="text-3xl font-bold text-charcoal">Find Work</h1>
            <p className="text-charcoal-light mt-1">Browse and apply to the latest design projects.</p>
          </div>
        </div>

        <div className="space-y-6">
          {listings.length === 0 ? (
            <div className="text-center py-16 bg-white rounded-lg shadow-md">
              <h3 className="text-xl font-semibold text-charcoal">No Open Projects</h3>
              <p className="text-charcoal-light mt-2">Check back later for new opportunities!</p>
            </div>
          ) : (
            listings.map((listing, index) => (
              <motion.div
                key={listing.id}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: index * 0.05 }}
              >
                <Link to={`/listing/${listing.id}`} className="block bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-2 border-transparent hover:border-mint">
                  <div className="flex flex-col sm:flex-row justify-between">
                    <div>
                      <h2 className="text-xl font-semibold text-charcoal hover:text-mint">{listing.title}</h2>
                      <p className="text-sm text-charcoal-light mt-1">Posted by {listing.owner_name}</p>
                    </div>
                    <div className="mt-4 sm:mt-0 text-left sm:text-right">
                      <p className="text-lg font-bold text-mint">${listing.budget_min} - ${listing.budget_max}</p>
                      <p className="text-sm text-charcoal-light">Budget</p>
                    </div>
                  </div>
                  <p className="mt-4 text-charcoal line-clamp-2">{listing.description}</p>
                  <div className="mt-4 flex items-center justify-between text-sm text-charcoal-light">
                    <span>Deadline: {listing.deadline ? new Date(listing.deadline).toLocaleDateString() : 'Not specified'}</span>
                    <span className="text-mint font-semibold">View Details &rarr;</span>
                  </div>
                </Link>
              </motion.div>
            ))
          )}
        </div>
      </div>
    </div>
  );
};

export default Listings;
</file>

<file path="FrontEnd/pages/OrderDetail.jsx">
import { useState, useEffect, useCallback } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { orderAPI, reviewAPI, invoiceAPI } from '../services/api';
import { useAuth } from '../context/AuthContext';
import ReviewForm from '../components/ReviewForm';
import { motion } from 'framer-motion';

const OrderDetail = () => {
    const { id } = useParams();
    const { user } = useAuth();
    const navigate = useNavigate();

    const [order, setOrder] = useState(null);
    const [loading, setLoading] = useState(true);
    const [reviews, setReviews] = useState([]);
    const [hasUserReviewed, setHasUserReviewed] = useState(false);
    const [progressUpdate, setProgressUpdate] = useState('');
    const [isSubmittingUpdate, setIsSubmittingUpdate] = useState(false);

    const fetchOrderData = useCallback(async () => {
        try {
            const orderRes = await orderAPI.getOrder(id);
            setOrder(orderRes.data);

            if (orderRes.data.status === 'completed') {
                const reviewRes = await reviewAPI.getReviewsForUser(orderRes.data.seller._id);
                const buyerReviews = await reviewAPI.getReviewsForUser(orderRes.data.buyer._id);
                const allReviews = [...reviewRes.data, ...buyerReviews.data];
                const orderReviews = allReviews.filter(r => r.order_id === id);
                setReviews(orderReviews);
                setHasUserReviewed(orderReviews.some(r => r.reviewer_id === user.id));
            }
        } catch (error) {
            navigate('/dashboard');
        } finally {
            setLoading(false);
        }
    }, [id, navigate, user.id]);

    useEffect(() => {
        fetchOrderData();
    }, [fetchOrderData]);

    const handleStatusUpdate = async (status) => {
        if (!window.confirm(`Are you sure you want to mark this order as ${status}?`)) return;
        try {
            const res = await orderAPI.updateOrderStatus(id, status);
            setOrder(prev => ({ ...prev, ...res.data.order }));
        } catch (error) {
            alert(`Failed to update status: ${error.response?.data?.error || 'Server error'}`);
        }
    };

    const handleInvoiceCreation = async () => {
        if (!window.confirm("This will generate a formal invoice for this completed project. Continue?")) return;
        try {
            await invoiceAPI.createInvoice({ order_id: id });
            alert("Invoice created successfully!");
            navigate('/invoices');
        } catch (error) {
             alert(`Failed to create invoice: ${error.response?.data?.error || 'Server error'}`);
        }
    };

    const handlePostUpdate = async (e) => {
        e.preventDefault();
        if (progressUpdate.trim() === '') return;
        setIsSubmittingUpdate(true);
        try {
            const res = await orderAPI.postProgressUpdate(id, { message: progressUpdate });
            setOrder(prev => ({
                ...prev,
                progress_updates: [...prev.progress_updates, res.data.update]
            }));
            setProgressUpdate('');
        } catch (error) {
            alert(`Failed to post update: ${error.response?.data?.error || 'Server error'}`);
        } finally {
            setIsSubmittingUpdate(false);
        }
    };

    if (loading) return <div className="p-8 text-center">Loading order details...</div>;
    if (!order) return <div className="p-8 text-center">Order not found.</div>;

    const isDesigner = user.id === order.seller._id;
    const isBusiness = user.id === order.buyer._id;
    const revieweeId = isDesigner ? order.buyer._id : order.seller._id;
    const showReviewForm = order.status === 'completed' && !hasUserReviewed;
    
    return (
        <div className="max-w-4xl mx-auto py-8 px-4">
            <motion.div initial={{ opacity: 0, y:20 }} animate={{ opacity: 1, y:0 }} className="bg-white shadow-lg rounded-lg p-8 mb-8">
                <h1 className="text-3xl font-bold mb-2">{order.listing.title}</h1>
                <p className="text-gray-500 mb-6">Order ID: #{order.id.slice(-8)}</p>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                    <div>
                        <h2 className="font-bold text-lg mb-2">Project Details</h2>
                        <p><strong>Seller (Designer):</strong> {order.seller.name}</p>
                        <p><strong>Buyer (Business):</strong> {order.buyer.name}</p>
                        <p><strong>Amount:</strong> <span className="font-bold text-mint">${order.amount.toFixed(2)}</span></p>
                        <p><strong>Status:</strong> <span className="font-semibold capitalize">{order.status.replace('_', ' ')}</span></p>
                    </div>
                    <div className="bg-gray-50 p-4 rounded-lg">
                        <h2 className="font-bold text-lg mb-2">Actions</h2>
                        {isDesigner && order.status === 'in_progress' && <button onClick={() => handleStatusUpdate('delivered')} className="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">Mark as Delivered</button>}
                        {isBusiness && order.status === 'delivered' && <button onClick={() => handleStatusUpdate('completed')} className="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600">Accept Delivery & Mark Complete</button>}
                        {isDesigner && order.status === 'completed' && <button onClick={handleInvoiceCreation} className="w-full bg-purple-500 text-white py-2 rounded hover:bg-purple-600">Create Invoice</button>}
                    </div>
                </div>
            </motion.div>

            <motion.div initial={{ opacity: 0, y:20 }} animate={{ opacity: 1, y:0 }} transition={{ delay: 0.1 }} className="bg-white shadow-lg rounded-lg p-8 mb-8">
                <h2 className="text-2xl font-bold mb-4">Project Progress</h2>
                <div className="space-y-6">
                    {order.progress_updates.map(update => (
                        <div key={update._id} className="flex gap-4"><div className="flex flex-col items-center"><span className="w-3 h-3 bg-mint rounded-full mt-1"></span><div className="w-px flex-grow bg-gray-200"></div></div><div><p className="text-sm text-gray-500">{new Date(update.created_at).toLocaleString()}</p><p className="font-semibold">{update.author.name} posted:</p><div className="mt-1 p-3 bg-gray-100 rounded-md">{update.message}</div></div></div>
                    ))}
                </div>
                {isDesigner && (order.status === 'in_progress' || order.status === 'delivered') && (
                    <form onSubmit={handlePostUpdate} className="mt-6 pt-6 border-t"><h3 className="text-lg font-semibold mb-2">Post a New Update</h3><textarea value={progressUpdate} onChange={(e) => setProgressUpdate(e.target.value)} placeholder="Share your progress..." className="w-full p-2 border rounded-md" rows="4" required /><button type="submit" disabled={isSubmittingUpdate} className="mt-2 bg-mint text-white px-4 py-2 rounded-md disabled:opacity-50">{isSubmittingUpdate ? 'Posting...' : 'Post Update'}</button></form>
                )}
            </motion.div>

            {order.status === 'completed' && (
                <motion.div initial={{ opacity: 0, y:20 }} animate={{ opacity: 1, y:0 }} transition={{ delay: 0.2 }} className="bg-white shadow-lg rounded-lg p-8">
                    <h2 className="text-2xl font-bold mb-4">Reviews</h2>
                    {reviews.length > 0 ? reviews.map(r => <div key={r.id} className="border-t py-2"><p><strong>{r.reviewer_name}:</strong> {r.comment} ({r.rating} stars)</p></div>) : <p>No reviews yet.</p>}
                    {showReviewForm && <ReviewForm orderId={id} revieweeId={revieweeId} onReviewSubmitted={fetchOrderData} />}
                </motion.div>
            )}
        </div>
    );
};

export default OrderDetail;
</file>

<file path="FrontEnd/pages/ResetPassword.jsx">
import { useState, useEffect } from 'react';
import { useParams, useNavigate, Link } from 'react-router-dom';
import { authAPI } from '../services/api';
import { motion } from 'framer-motion';
import { Eye, EyeOff, Check, X, Lock, ShieldCheck, ArrowLeft } from 'lucide-react';

const ResetPassword = () => {
  const { token } = useParams();
  const navigate = useNavigate();
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [passwordStrength, setPasswordStrength] = useState({
    score: 0,
    label: '',
    color: '',
  });
  const [validations, setValidations] = useState({
    minLength: false,
    hasUpperCase: false,
    hasLowerCase: false,
    hasNumber: false,
    hasSpecialChar: false,
  });

  // Password strength checker
  useEffect(() => {
    if (!password) {
      setPasswordStrength({ score: 0, label: '', color: '' });
      return;
    }

    const checks = {
      minLength: password.length >= 8,
      hasUpperCase: /[A-Z]/.test(password),
      hasLowerCase: /[a-z]/.test(password),
      hasNumber: /[0-9]/.test(password),
      hasSpecialChar: /[!@#$%^&*(),.?":{}|<>]/.test(password),
    };

    setValidations(checks);

    const score = Object.values(checks).filter(Boolean).length;
    
    let label = '';
    let color = '';
    
    if (score <= 2) {
      label = 'Weak';
      color = 'bg-red-500';
    } else if (score === 3) {
      label = 'Fair';
      color = 'bg-orange-500';
    } else if (score === 4) {
      label = 'Good';
      color = 'bg-yellow-500';
    } else {
      label = 'Strong';
      color = 'bg-green-500';
    }

    setPasswordStrength({ score, label, color });
  }, [password]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (password !== confirmPassword) {
      setError('Passwords do not match.');
      return;
    }
    setIsLoading(true);
    setError('');
    setMessage('');
    try {
      const res = await authAPI.resetPassword(token, password);
      setMessage(res.data.message);
      setTimeout(() => navigate('/login'), 3000); // Redirect to login after 3 seconds
    } catch (err) {
      setError(err.response?.data?.error || 'Failed to reset password.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-mint/5 via-white to-mint/10 py-12 px-4">
      <motion.div
        className="max-w-md w-full"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
      >
        <div className="bg-white rounded-2xl shadow-2xl p-8 border border-gray-100">
          {/* Header with Icon */}
          <div className="text-center mb-8">
            <motion.div
              initial={{ scale: 0 }}
              animate={{ scale: 1 }}
              transition={{ delay: 0.2, type: "spring", stiffness: 200 }}
              className="inline-flex items-center justify-center w-16 h-16 bg-mint/10 rounded-full mb-4"
            >
              <ShieldCheck className="w-8 h-8 text-mint" />
            </motion.div>
            <h2 className="text-3xl font-bold text-charcoal mb-2">Reset Your Password</h2>
            <p className="text-sm text-gray-600">
              Create a strong, secure password for your ShockWave account
            </p>
          </div>

          <form onSubmit={handleSubmit} className="space-y-6">
            {/* Error Alert */}
            {error && (
              <motion.div
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                className="bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg text-sm flex items-start gap-3"
              >
                <X className="w-5 h-5 flex-shrink-0 mt-0.5" />
                <span>{error}</span>
              </motion.div>
            )}

            {/* Success Alert */}
            {message && (
              <motion.div
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                className="bg-green-50 border border-green-200 text-green-700 p-4 rounded-lg text-sm flex items-start gap-3"
              >
                <Check className="w-5 h-5 flex-shrink-0 mt-0.5" />
                <div>
                  <p className="font-medium">{message}</p>
                  <p className="text-xs mt-1">Redirecting to login page...</p>
                </div>
              </motion.div>
            )}

            {/* New Password Field */}
            <div>
              <label htmlFor="password" className="block text-sm font-semibold text-charcoal mb-2">
                New Password
              </label>
              <div className="relative">
                <Lock className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
                <input
                  id="password"
                  type={showPassword ? 'text' : 'password'}
                  required
                  className="w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-mint focus:border-transparent transition-all"
                  placeholder="Enter new password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"
                >
                  {showPassword ? <EyeOff className="w-5 h-5" /> : <Eye className="w-5 h-5" />}
                </button>
              </div>

              {/* Password Strength Indicator */}
              {password && (
                <motion.div
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: 'auto' }}
                  className="mt-3 space-y-2"
                >
                  <div className="flex items-center gap-2">
                    <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                      <motion.div
                        initial={{ width: 0 }}
                        animate={{ width: `${(passwordStrength.score / 5) * 100}%` }}
                        className={`h-full ${passwordStrength.color} transition-all duration-300`}
                      />
                    </div>
                    <span className={`text-xs font-medium ${passwordStrength.color.replace('bg-', 'text-')}`}>
                      {passwordStrength.label}
                    </span>
                  </div>

                  {/* Password Requirements */}
                  <div className="bg-gray-50 rounded-lg p-3 space-y-1.5">
                    <p className="text-xs font-semibold text-gray-700 mb-2">Password must contain:</p>
                    {[
                      { key: 'minLength', label: 'At least 8 characters' },
                      { key: 'hasUpperCase', label: 'One uppercase letter' },
                      { key: 'hasLowerCase', label: 'One lowercase letter' },
                      { key: 'hasNumber', label: 'One number' },
                      { key: 'hasSpecialChar', label: 'One special character (!@#$%^&*)' },
                    ].map(({ key, label }) => (
                      <div key={key} className="flex items-center gap-2 text-xs">
                        {validations[key] ? (
                          <Check className="w-4 h-4 text-green-600" />
                        ) : (
                          <X className="w-4 h-4 text-gray-400" />
                        )}
                        <span className={validations[key] ? 'text-green-700' : 'text-gray-600'}>
                          {label}
                        </span>
                      </div>
                    ))}
                  </div>
                </motion.div>
              )}
            </div>

            {/* Confirm Password Field */}
            <div>
              <label htmlFor="confirmPassword" className="block text-sm font-semibold text-charcoal mb-2">
                Confirm New Password
              </label>
              <div className="relative">
                <Lock className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
                <input
                  id="confirmPassword"
                  type={showConfirmPassword ? 'text' : 'password'}
                  required
                  className={`w-full pl-10 pr-12 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-mint transition-all ${
                    confirmPassword && password !== confirmPassword
                      ? 'border-red-300 focus:border-red-300'
                      : 'border-gray-200 focus:border-transparent'
                  }`}
                  placeholder="Confirm new password"
                  value={confirmPassword}
                  onChange={(e) => setConfirmPassword(e.target.value)}
                />
                <button
                  type="button"
                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                  className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"
                >
                  {showConfirmPassword ? <EyeOff className="w-5 h-5" /> : <Eye className="w-5 h-5" />}
                </button>
              </div>
              {confirmPassword && password !== confirmPassword && (
                <motion.p
                  initial={{ opacity: 0, y: -5 }}
                  animate={{ opacity: 1, y: 0 }}
                  className="text-xs text-red-600 mt-1.5 flex items-center gap-1"
                >
                  <X className="w-3 h-3" />
                  Passwords do not match
                </motion.p>
              )}
              {confirmPassword && password === confirmPassword && (
                <motion.p
                  initial={{ opacity: 0, y: -5 }}
                  animate={{ opacity: 1, y: 0 }}
                  className="text-xs text-green-600 mt-1.5 flex items-center gap-1"
                >
                  <Check className="w-3 h-3" />
                  Passwords match
                </motion.p>
              )}
            </div>

            {/* Submit Button */}
            <button
              type="submit"
              disabled={isLoading || message || password !== confirmPassword || passwordStrength.score < 3}
              className="w-full bg-gradient-to-r from-mint to-mint-dark text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none flex items-center justify-center gap-2"
            >
              {isLoading ? (
                <>
                  <div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin" />
                  Resetting Password...
                </>
              ) : (
                <>
                  <ShieldCheck className="w-5 h-5" />
                  Reset Password
                </>
              )}
            </button>

            {/* Back to Login */}
            <div className="text-center pt-2">
              <Link
                to="/login"
                className="inline-flex items-center gap-2 text-sm text-gray-600 hover:text-mint transition-colors"
              >
                <ArrowLeft className="w-4 h-4" />
                Back to Login
              </Link>
            </div>
          </form>
        </div>

        {/* Security Note */}
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.3 }}
          className="mt-6 text-center"
        >
          <p className="text-xs text-gray-500 flex items-center justify-center gap-2">
            <Lock className="w-3 h-3" />
            Your password is encrypted and secure
          </p>
        </motion.div>
      </motion.div>
    </div>
  );
};

export default ResetPassword;
</file>

<file path="FrontEnd/pages/SavedProjects.jsx">
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { listingAPI } from '../services/api';
import { motion } from 'framer-motion';

const SavedProjects = () => {
    const [savedProjects, setSavedProjects] = useState([]);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        const fetchSavedProjects = async () => {
            try {
                const res = await listingAPI.getBookmarkedListings();
                setSavedProjects(res.data);
            } catch (error) {
                console.error("Failed to fetch saved projects", error);
            } finally {
                setLoading(false);
            }
        };
        fetchSavedProjects();
    }, []);

    if (loading) {
        return <div className="p-8 text-center">Loading your saved projects...</div>;
    }

    return (
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <h1 className="text-3xl font-bold text-gray-900 mb-6">Saved Projects</h1>
            <div className="space-y-6">
                {savedProjects.length === 0 ? (
                    <div className="text-center py-16 bg-white rounded-lg shadow-md">
                        <h3 className="text-xl font-semibold text-charcoal">You haven't saved any projects yet.</h3>
                        <p className="text-charcoal-light mt-2">
                            Click the bookmark icon on a project to save it for later.
                        </p>
                        <Link to="/listings" className="mt-4 inline-block bg-mint text-white px-6 py-2 rounded-md">Browse Projects</Link>
                    </div>
                ) : (
                    savedProjects.map((listing, index) => (
                        <motion.div
                            key={listing.id}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: index * 0.05 }}
                        >
                            <Link to={`/listing/${listing.id}`} className="block bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-2 border-transparent hover:border-mint">
                                <div className="flex flex-col sm:flex-row justify-between">
                                    <div>
                                        <h2 className="text-xl font-semibold text-charcoal hover:text-mint">{listing.title}</h2>
                                        <p className="text-sm text-charcoal-light mt-1">Posted by {listing.owner?.name || 'N/A'}</p>
                                    </div>
                                    <div className="mt-4 sm:mt-0 text-left sm:text-right">
                                        <p className="text-lg font-bold text-mint">${listing.budget_min} - ${listing.budget_max}</p>
                                        <p className="text-sm text-charcoal-light">Budget</p>
                                    </div>
                                </div>
                                <p className="mt-4 text-charcoal line-clamp-2">{listing.description}</p>
                            </Link>
                        </motion.div>
                    ))
                )}
            </div>
        </div>
    );
};

export default SavedProjects;
</file>

<file path="FrontEnd/styles/App.css">
/* Root styles - optimized for full-width responsive layout */
#root {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Card styles */
.card {
  padding: 1.5rem;
  border-radius: 0.5rem;
  background: white;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  transition: all 0.3s ease;
}

.card:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  transform: translateY(-2px);
}

@media (min-width: 640px) {
  .card {
    padding: 2rem;
  }
}
</file>

<file path="FrontEnd/styles/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: 'Inter', system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* Color variables */
  --color-charcoal: #2D3436;
  --color-lightgray: #DFE6E9;
  --color-mint: #00CEC9;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  background-color: #F5F7F8;
  overflow-x: hidden;
  color: #2D3436;
}

/* Image optimization */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Improved transitions */
a, button {
  transition: all 0.2s ease;
}

button {
  cursor: pointer;
}

button:active {
  transform: scale(0.98);
}

/* Responsive container utility */
.container-responsive {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (min-width: 640px) {
  .container-responsive {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

@media (min-width: 1024px) {
  .container-responsive {
    max-width: 1280px;
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

/* Text utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.text-wrap-balance {
  text-wrap: balance;
}

/* Animations */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.5s ease-out;
}

/* Accessibility */
*:focus-visible {
  outline: 2px solid #00CEC9;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Mobile-friendly tap targets */
@media (max-width: 768px) {
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Safe area for notched devices */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
  }
}

/* Disable hover effects on touch devices */
@media (hover: none) {
  .hover\:scale-105:hover {
    transform: none;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}
</file>

<file path="PLATFORM_FLOW_DIAGRAM.md">
# üåä ShockWave Platform - Visual Flow Diagrams

## 1. High-Level Platform Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     SHOCKWAVE PLATFORM                          ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ   VISITORS   ‚îÇ    ‚îÇ  DESIGNERS   ‚îÇ    ‚îÇ  BUSINESSES  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ (Unauthent.) ‚îÇ    ‚îÇ (Registered) ‚îÇ    ‚îÇ (Registered) ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ         ‚îÇ                   ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                             ‚îÇ                                  ‚îÇ
‚îÇ                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ                   ‚îÇ   CORE PLATFORM   ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ                   ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ  ‚Ä¢ Authentication ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ  ‚Ä¢ User Profiles  ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ  ‚Ä¢ Messaging      ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ  ‚Ä¢ Projects       ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ  ‚Ä¢ Payments       ‚îÇ                       ‚îÇ
‚îÇ                   ‚îÇ  ‚Ä¢ Reviews        ‚îÇ                       ‚îÇ
‚îÇ                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ                             ‚îÇ                                  ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ                  ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ     ‚îÇ   DATABASE      ‚îÇ ‚îÇ  STORAGE ‚îÇ ‚îÇ  PAYMENT ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ   (Profiles,    ‚îÇ ‚îÇ  (Files, ‚îÇ ‚îÇ  GATEWAY ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ   Projects)     ‚îÇ ‚îÇ  Images) ‚îÇ ‚îÇ          ‚îÇ           ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 2. User Authentication Flow

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  LANDING    ‚îÇ
                    ‚îÇ  HOME PAGE  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ              ‚îÇ              ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ Browse   ‚îÇ   ‚îÇ  Login   ‚îÇ   ‚îÇ Register ‚îÇ
      ‚îÇ Public   ‚îÇ   ‚îÇ  Page    ‚îÇ   ‚îÇ  Page    ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ              ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ                ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ Existing    ‚îÇ  ‚îÇ    New     ‚îÇ
         ‚îÇ User Login  ‚îÇ  ‚îÇ  Account   ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ                ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ AUTHENTICATION ‚îÇ
                 ‚îÇ   SUCCESSFUL   ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ            ‚îÇ            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ Designer  ‚îÇ ‚îÇBusiness‚îÇ ‚îÇ  Admin   ‚îÇ
      ‚îÇ Dashboard ‚îÇ ‚îÇ  Dash  ‚îÇ ‚îÇ  Panel   ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 3. Designer Complete Journey

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  REGISTER    ‚îÇ
‚îÇ  as Designer ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  DASHBOARD           ‚îÇ
‚îÇ  ‚Ä¢ Stats: 0 projects ‚îÇ
‚îÇ  ‚Ä¢ Earnings: $0      ‚îÇ
‚îÇ  ‚Ä¢ Messages: 0       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∫ Step 1: Setup Profile
       ‚îÇ    ‚îú‚îÄ Add bio
       ‚îÇ    ‚îú‚îÄ Add skills
       ‚îÇ    ‚îú‚îÄ Set hourly rate
       ‚îÇ    ‚îú‚îÄ Add location
       ‚îÇ    ‚îî‚îÄ Upload portfolio
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∫ Step 2: Find Work
       ‚îÇ    ‚îú‚îÄ Browse projects (/listings)
       ‚îÇ    ‚îú‚îÄ Filter by category/budget
       ‚îÇ    ‚îú‚îÄ View project details
       ‚îÇ    ‚îî‚îÄ Submit proposal
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∫ Step 3: Get Hired
       ‚îÇ    ‚îú‚îÄ Proposal accepted
       ‚îÇ    ‚îú‚îÄ Receive notification
       ‚îÇ    ‚îî‚îÄ Project starts
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∫ Step 4: Work on Project
       ‚îÇ    ‚îú‚îÄ Communicate via Messages
       ‚îÇ    ‚îú‚îÄ Upload progress updates
       ‚îÇ    ‚îú‚îÄ Meet milestones
       ‚îÇ    ‚îî‚îÄ Submit deliverables
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∫ Step 5: Get Paid
       ‚îÇ    ‚îú‚îÄ Client reviews work
       ‚îÇ    ‚îú‚îÄ Client approves
       ‚îÇ    ‚îú‚îÄ Payment released from escrow
       ‚îÇ    ‚îî‚îÄ Funds transferred
       ‚îÇ
       ‚îî‚îÄ‚îÄ‚ñ∫ Step 6: Build Reputation
            ‚îú‚îÄ Receive client review
            ‚îú‚îÄ Rating updated (‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê)
            ‚îú‚îÄ Portfolio grows
            ‚îî‚îÄ Get more projects!
```

---

## 4. Business Complete Journey

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  REGISTER    ‚îÇ
‚îÇ  as Business ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  DASHBOARD           ‚îÇ
‚îÇ  ‚Ä¢ Active Projects   ‚îÇ
‚îÇ  ‚Ä¢ Total Spent       ‚îÇ
‚îÇ  ‚Ä¢ Messages          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∫ Option A: Browse Designers
       ‚îÇ    ‚îÇ
       ‚îÇ    ‚îú‚îÄ Go to Browse page (/browse)
       ‚îÇ    ‚îú‚îÄ Apply filters:
       ‚îÇ    ‚îÇ  ‚îú‚îÄ Search by name
       ‚îÇ    ‚îÇ  ‚îú‚îÄ Filter by skill
       ‚îÇ    ‚îÇ  ‚îú‚îÄ Filter by location
       ‚îÇ    ‚îÇ  ‚îî‚îÄ Filter by rate
       ‚îÇ    ‚îÇ
       ‚îÇ    ‚îú‚îÄ View designer profiles
       ‚îÇ    ‚îú‚îÄ Check portfolios & ratings
       ‚îÇ    ‚îú‚îÄ Contact designer
       ‚îÇ    ‚îî‚îÄ Negotiate & hire
       ‚îÇ
       ‚îî‚îÄ‚îÄ‚ñ∫ Option B: Post Project
            ‚îÇ
            ‚îú‚îÄ Create project listing
            ‚îú‚îÄ Add details:
            ‚îÇ  ‚îú‚îÄ Title
            ‚îÇ  ‚îú‚îÄ Description
            ‚îÇ  ‚îú‚îÄ Budget
            ‚îÇ  ‚îú‚îÄ Deadline
            ‚îÇ  ‚îî‚îÄ Required skills
            ‚îÇ
            ‚îú‚îÄ Post publicly
            ‚îÇ
            ‚îú‚îÄ Receive proposals
            ‚îÇ  ‚îú‚îÄ Designer 1 proposes
            ‚îÇ  ‚îú‚îÄ Designer 2 proposes
            ‚îÇ  ‚îî‚îÄ Designer 3 proposes
            ‚îÇ
            ‚îú‚îÄ Review & compare proposals
            ‚îÇ  ‚îú‚îÄ Check portfolios
            ‚îÇ  ‚îú‚îÄ Compare prices
            ‚îÇ  ‚îî‚îÄ Read cover letters
            ‚îÇ
            ‚îú‚îÄ Accept best proposal
            ‚îÇ
            ‚îú‚îÄ Project starts
            ‚îÇ  ‚îú‚îÄ Communicate via Messages
            ‚îÇ  ‚îú‚îÄ Monitor progress
            ‚îÇ  ‚îî‚îÄ Review deliverables
            ‚îÇ
            ‚îú‚îÄ Approve work
            ‚îÇ
            ‚îú‚îÄ Complete payment
            ‚îÇ  ‚îú‚îÄ Checkout page
            ‚îÇ  ‚îú‚îÄ Process payment
            ‚îÇ  ‚îî‚îÄ Release escrow
            ‚îÇ
            ‚îî‚îÄ Leave review
               ‚îî‚îÄ Rate designer (1-5 ‚≠ê)
```

---

## 5. Page Navigation Map

```
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ  HOME (/)   ‚îÇ
                        ‚îÇ   Public    ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                      ‚îÇ                      ‚îÇ
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  /login    ‚îÇ        ‚îÇ  /register ‚îÇ        ‚îÇ  /browse    ‚îÇ
  ‚îÇ  Public    ‚îÇ        ‚îÇ   Public   ‚îÇ        ‚îÇ   Public    ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                     ‚îÇ                       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
                   ‚îÇ                                  ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
              ‚îÇ  AUTH    ‚îÇ                           ‚îÇ
              ‚îÇ SUCCESS  ‚îÇ                           ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
                   ‚îÇ                                  ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
         ‚îÇ         ‚îÇ             ‚îÇ                  ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
    ‚îÇ/designer‚îÇ ‚îÇ/business‚îÇ ‚îÇ /admin  ‚îÇ            ‚îÇ
    ‚îÇdashboard‚îÇ ‚îÇdashboard‚îÇ ‚îÇ /admin  ‚îÇ            ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
         ‚îÇ        ‚îÇ              ‚îÇ                  ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
                  ‚îÇ                                  ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ             ‚îÇ                  ‚îÇ              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ/messages‚îÇ  ‚îÇ/dashboard‚îÇ  ‚îÇ/designer/:id  ‚îÇ  ‚îÇ/listing/:id ‚îÇ
‚îÇProtected‚îÇ  ‚îÇProtected ‚îÇ  ‚îÇ  Public       ‚îÇ  ‚îÇ  Public     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                    ‚îÇ
                                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                            ‚îÇ/checkout/:id   ‚îÇ
                                            ‚îÇ  Protected     ‚îÇ
                                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 6. Messaging System Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        MESSAGES PAGE (/messages)          ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Conversations  ‚îÇ  ‚îÇ  Chat Window    ‚îÇ‚îÇ
‚îÇ  ‚îÇ  (Left Panel)  ‚îÇ  ‚îÇ  (Right Panel)  ‚îÇ‚îÇ
‚îÇ  ‚îÇ                ‚îÇ  ‚îÇ                 ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Active Chats ‚îÇ  ‚îÇ ‚Ä¢ Message       ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Unread (3)   ‚îÇ  ‚îÇ   History       ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Search       ‚îÇ  ‚îÇ ‚Ä¢ Send Message  ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Filter       ‚îÇ  ‚îÇ ‚Ä¢ Attach File   ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ           ‚îÇ                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚îú‚îÄ‚îÄ‚ñ∫ Click Conversation
            ‚îÇ    ‚îî‚îÄ Load chat history
            ‚îÇ
            ‚îú‚îÄ‚îÄ‚ñ∫ Type & Send Message
            ‚îÇ    ‚îú‚îÄ Message sent
            ‚îÇ    ‚îú‚îÄ Other user receives
            ‚îÇ    ‚îî‚îÄ Notification sent
            ‚îÇ
            ‚îú‚îÄ‚îÄ‚ñ∫ Attach File (optional)
            ‚îÇ    ‚îú‚îÄ Upload file
            ‚îÇ    ‚îî‚îÄ Share with user
            ‚îÇ
            ‚îî‚îÄ‚îÄ‚ñ∫ Receive New Message
                 ‚îú‚îÄ Browser notification
                 ‚îú‚îÄ Unread badge appears
                 ‚îî‚îÄ Sound alert (optional)
```

---

## 7. Project Lifecycle Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PROJECT LIFECYCLE                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

BUSINESS SIDE                    DESIGNER SIDE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

1. Create Project               1. Browse Projects
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
2. Post Publicly  ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 2. Find Match
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
3. Wait for                     3. Submit Proposal
   Proposals                       ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
4. Review         ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 4. Wait for Response
   Proposals                       ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
5. Accept Best                  5. Proposal Accepted!
   Proposal                        ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
6. Deposit to     ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 6. Start Working
   Escrow                          ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
7. Monitor        ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 7. Submit Updates
   Progress                        ‚îÇ
   ‚îÇ              ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫   ‚îÇ
   ‚îÇ           Communication       ‚îÇ
   ‚îÇ              (Messages)       ‚îÇ
   ‚ñº                               ‚ñº
8. Review         ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 8. Submit Final
   Deliverables                    Deliverables
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
9. Approve Work                 9. Wait for Approval
   ‚îÇ                               ‚îÇ
   ‚ñº                               ‚ñº
10. Release       ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 10. Receive Payment
    Payment                         ‚îÇ
    ‚îÇ                               ‚îÇ
    ‚ñº                               ‚ñº
11. Leave Review  ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 11. Leave Review
    ‚îÇ                               ‚îÇ
    ‚ñº                               ‚ñº
   ‚úÖ COMPLETE                     ‚úÖ COMPLETE
```

---

## 8. Payment & Escrow Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            SECURE PAYMENT SYSTEM                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Step 1: PROJECT STARTS
   ‚îú‚îÄ Business accepts proposal
   ‚îî‚îÄ Escrow account created
           ‚îÇ
           ‚ñº
Step 2: DEPOSIT TO ESCROW
   ‚îú‚îÄ Business deposits full amount
   ‚îú‚îÄ Payment held securely
   ‚îî‚îÄ Designer notified
           ‚îÇ
           ‚ñº
Step 3: WORK IN PROGRESS
   ‚îú‚îÄ Designer works on project
   ‚îú‚îÄ Money stays in escrow
   ‚îî‚îÄ Protected for both parties
           ‚îÇ
           ‚ñº
Step 4: DELIVERABLES SUBMITTED
   ‚îú‚îÄ Designer uploads final work
   ‚îî‚îÄ Business receives notification
           ‚îÇ
           ‚ñº
Step 5: REVIEW PERIOD
   ‚îú‚îÄ Business reviews work
   ‚îÇ
   ‚îú‚îÄ‚îÄ‚ñ∫ APPROVE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ                        ‚îÇ
   ‚îî‚îÄ‚îÄ‚ñ∫ REQUEST REVISIONS   ‚îÇ
           ‚îÇ                ‚îÇ
           ‚ñº                ‚îÇ
      Designer makes        ‚îÇ
      changes & resubmits   ‚îÇ
           ‚îÇ                ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
Step 6: PAYMENT RELEASE
   ‚îú‚îÄ Escrow releases funds
   ‚îú‚îÄ Designer receives payment
   ‚îú‚îÄ Platform fee deducted
   ‚îî‚îÄ Transaction complete ‚úÖ
           ‚îÇ
           ‚ñº
Step 7: REVIEWS EXCHANGED
   ‚îú‚îÄ Both parties leave reviews
   ‚îî‚îÄ Ratings updated
```

---

## 9. Search & Filter Flow (Browse Page)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     BROWSE DESIGNERS (/browse)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                       ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  SEARCH  ‚îÇ          ‚îÇ  FILTERS   ‚îÇ
   ‚îÇ  Input   ‚îÇ          ‚îÇ  Panel     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                      ‚îÇ
        ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ  ‚îÇ
        ‚ñº  ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  APPLY FILTERS  ‚îÇ
   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
   ‚îÇ ‚Ä¢ Search: ""    ‚îÇ
   ‚îÇ ‚Ä¢ Skill: ""     ‚îÇ
   ‚îÇ ‚Ä¢ Location: ""  ‚îÇ
   ‚îÇ ‚Ä¢ Min Rate: $   ‚îÇ
   ‚îÇ ‚Ä¢ Max Rate: $   ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   RESULTS GRID      ‚îÇ
   ‚îÇ                     ‚îÇ
   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
   ‚îÇ  ‚îÇ 1 ‚îÇ ‚îÇ 2 ‚îÇ ‚îÇ 3 ‚îÇ ‚îÇ
   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
   ‚îÇ  ‚îÇ 4 ‚îÇ ‚îÇ 5 ‚îÇ ‚îÇ 6 ‚îÇ ‚îÇ
   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚îú‚îÄ‚îÄ‚ñ∫ Hover Card
            ‚îÇ    ‚îî‚îÄ Preview info
            ‚îÇ
            ‚îî‚îÄ‚îÄ‚ñ∫ Click "View Profile"
                 ‚îî‚îÄ Navigate to /designer/:id
```

---

## 10. Responsive Mobile Navigation

```
DESKTOP VIEW                    MOBILE VIEW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Logo | Links | Auth ‚îÇ        ‚îÇ Logo | ‚ò∞     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ
                               (Click ‚ò∞)
                                      ‚îÇ
                                      ‚ñº
                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                               ‚îÇ Mobile Menu  ‚îÇ
                               ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                               ‚îÇ ‚Ä¢ Browse     ‚îÇ
                               ‚îÇ ‚Ä¢ Find Work  ‚îÇ
                               ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
                               ‚îÇ ‚Ä¢ Dashboard  ‚îÇ
                               ‚îÇ ‚Ä¢ Messages   ‚îÇ
                               ‚îÇ ‚Ä¢ Logout     ‚îÇ
                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 11. User States & Permissions

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              USER ROLE MATRIX                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                    ‚îÇ
‚îÇ  Page/Feature      ‚îÇ Visitor ‚îÇ Designer ‚îÇ Business‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ  Home              ‚îÇ    ‚úÖ   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Browse Designers  ‚îÇ    ‚úÖ   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  View Profiles     ‚îÇ    ‚úÖ   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Login/Register    ‚îÇ    ‚úÖ   ‚îÇ    ‚ùå    ‚îÇ    ‚ùå   ‚îÇ
‚îÇ  Dashboard         ‚îÇ    ‚ùå   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Messages          ‚îÇ    ‚ùå   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Post Project      ‚îÇ    ‚ùå   ‚îÇ    ‚ùå    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Submit Proposal   ‚îÇ    ‚ùå   ‚îÇ    ‚úÖ    ‚îÇ    ‚ùå   ‚îÇ
‚îÇ  Browse Projects   ‚îÇ    ‚ùå   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Payment/Checkout  ‚îÇ    ‚ùå   ‚îÇ    ‚úÖ    ‚îÇ    ‚úÖ   ‚îÇ
‚îÇ  Admin Panel       ‚îÇ    ‚ùå   ‚îÇ    ‚ùå    ‚îÇ  Admin  ‚îÇ
‚îÇ                                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Legend: ‚úÖ = Allowed  ‚ùå = Not Allowed
```

---

## 12. Error Handling & Edge Cases

```
SCENARIO                        FLOW
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                        ‚îÄ‚îÄ‚îÄ‚îÄ

User Not Logged In
   ‚îú‚îÄ Tries to access Dashboard
   ‚îÇ  ‚îî‚îÄ‚ñ∫ Redirect to Login
   ‚îÇ
   ‚îú‚îÄ Tries to send message
   ‚îÇ  ‚îî‚îÄ‚ñ∫ Show "Login Required" modal
   ‚îÇ
   ‚îî‚îÄ Tries to hire designer
      ‚îî‚îÄ‚ñ∫ Redirect to Register

Invalid Credentials
   ‚îú‚îÄ Enter wrong password
   ‚îÇ  ‚îî‚îÄ‚ñ∫ Show error: "Invalid credentials"
   ‚îÇ
   ‚îî‚îÄ Username not found
      ‚îî‚îÄ‚ñ∫ Show error: "User not found"

Payment Failure
   ‚îú‚îÄ Card declined
   ‚îÇ  ‚îî‚îÄ‚ñ∫ Show error + retry option
   ‚îÇ
   ‚îî‚îÄ Insufficient funds
      ‚îî‚îÄ‚ñ∫ Show error + alternative methods

No Results Found
   ‚îú‚îÄ Search returns empty
   ‚îÇ  ‚îî‚îÄ‚ñ∫ Show "No designers found"
   ‚îÇ       ‚îî‚îÄ‚ñ∫ Suggest: "Try different filters"
   ‚îÇ
   ‚îî‚îÄ Adjust filters
      ‚îî‚îÄ‚ñ∫ Re-search

Network Error
   ‚îú‚îÄ API call fails
   ‚îÇ  ‚îî‚îÄ‚ñ∫ Show retry button
   ‚îÇ
   ‚îî‚îÄ Timeout
      ‚îî‚îÄ‚ñ∫ Show error toast
```

---

## 13. Notification System Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        NOTIFICATION TRIGGERS              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

EVENT                    ‚Üí NOTIFICATION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

New Message              ‚Üí Badge on Messages icon
                          ‚Üí Browser notification
                          ‚Üí Email (optional)

Proposal Accepted        ‚Üí Dashboard alert
                          ‚Üí Email notification
                          ‚Üí Push notification

Payment Received         ‚Üí Dashboard notification
                          ‚Üí Email confirmation
                          ‚Üí Transaction receipt

New Review               ‚Üí Profile update alert
                          ‚Üí Email notification

Project Milestone        ‚Üí Progress notification
                          ‚Üí Reminder email

Deadline Approaching     ‚Üí Warning notification
                          ‚Üí Email reminder (24h)
```

---

## 14. Data Flow Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              FRONTEND (React)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Pages   ‚îÇ  ‚îÇComponents‚îÇ  ‚îÇ Context  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  (Views) ‚îÇ  ‚îÇ  (UI)    ‚îÇ  ‚îÇ (State)  ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ       ‚îÇ             ‚îÇ              ‚îÇ            ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                     ‚îÇ                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚îÇ API Calls
                      ‚îÇ (HTTP/REST)
                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              BACKEND (Node.js)                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ   API    ‚îÇ  ‚îÇ  Auth    ‚îÇ  ‚îÇ  Logic   ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Routes  ‚îÇ  ‚îÇ  Middleware ‚îÇ (Business)‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ       ‚îÇ             ‚îÇ              ‚îÇ            ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                     ‚îÇ                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚îÇ Database Queries
                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              DATABASE (PostgreSQL)               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Users   ‚îÇ  ‚îÇ Projects ‚îÇ  ‚îÇ Messages ‚îÇ     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ
‚îÇ  ‚îÇ Profiles ‚îÇ  ‚îÇ Proposals‚îÇ  ‚îÇ Reviews  ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

**End of Visual Flow Diagrams** üìä

*These diagrams complement the detailed USER_FLOW.md guide*
</file>

<file path="postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})
</file>

<file path=".gitignore">
# Dependencies

node_modules/
package-lock.json


# Environment Variables

.env
*.env


# Database

*.db


# Temporary Files

*.tmp
</file>

<file path="BackEnd/check-db.js">
import mongoose from 'mongoose';
import dotenv from 'dotenv';
import connectDB from './config/database.js';
import User from './models/userModel.js';

dotenv.config();

const verifyDatabase = async () => {
  try {
    // Connect to the database
    await connectDB();
    console.log('\n‚úÖ DATABASE VERIFICATION\n');
    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');

    // Fetch all users
    const users = await User.find({}).select('id username name role is_active');

    console.log(`üìä Total Users: ${users.length}\n`);

    users.forEach(user => {
      console.log(`${user.role === 'designer' ? 'üë®‚Äçüé®' : user.role === 'business' ? 'üíº' : 'üîê'} ${user.role.toUpperCase()}`);
      console.log(`   ID: ${user.id}`);
      console.log(`   Username: ${user.username}`);
      console.log(`   Name: ${user.name}`);
      console.log(`   Active: ${user.is_active ? 'Yes' : 'No'}`);
      console.log('');
    });

    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');
  } catch (error) {
    console.error('‚ùå Database verification failed:', error);
  } finally {
    // Disconnect from the database
    await mongoose.disconnect();
    console.log('MongoDB connection closed.');
    process.exit(0);
  }
};

verifyDatabase();
</file>

<file path="BackEnd/controllers/dashboardController.js">
import Order from '../models/orderModel.js';
import Review from '../models/reviewModel.js';
import Message from '../models/messageModel.js';

// Get dashboard stats for the logged-in user

export const getDashboardStats = async (req, res, next) => {
  try {
    if (!req.user) {
      return res.status(401).json({ error: 'Not authenticated' });
    }
    const userId = req.user.id;
    const role = req.user.role;

    let projectsQuery;
    let financialQuery;

    if (role === 'designer') {
      projectsQuery = { seller: userId, status: { $in: ['in_progress', 'delivered'] } };
      financialQuery = { seller: userId, status: 'completed' };
    } else { // 'business' role
      projectsQuery = { buyer: userId, status: { $in: ['in_progress', 'delivered'] } };
      financialQuery = { buyer: userId, status: 'completed' };
    }

    const [projectsCount, financialResult, reviewsCount, messagesCount] = await Promise.all([
      Order.countDocuments(projectsQuery),
      Order.aggregate([
        { $match: financialQuery },
        { $group: { _id: null, total: { $sum: '$amount' } } }
      ]),
      Review.countDocuments({ reviewee: userId }),
      Message.countDocuments({ recipient: userId, is_read: false })
    ]);

    const stats = {
      projects: projectsCount || 0,
      earnings: financialResult[0]?.total || 0.00,
      reviews: reviewsCount || 0,
      messages: messagesCount || 0,
    };

    res.json(stats);
  } catch (error) {
    console.error("Error in getDashboardStats:", error);
    next(error);
  }
};
</file>

<file path="BackEnd/controllers/ordersController.js">
import { validationResult } from 'express-validator';
import Order from '../models/orderModel.js';
import Proposal from '../models/proposalModel.js';
import Listing from '../models/listingModel.js';
import User from '../models/userModel.js';
import ProgressUpdate from '../models/progressUpdateModel.js';

export const createOrder = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) return res.status(400).json({ errors: errors.array() });

    const { proposal_id } = req.body;
    const buyerId = req.user.id;

    const proposal = await Proposal.findById(proposal_id).populate('listing').populate('designer');
    if (!proposal) return res.status(404).json({ error: 'Proposal not found' });
    if (proposal.listing.owner.toString() !== buyerId) return res.status(403).json({ error: 'You are not authorized' });
    if (!['pending', 'shortlisted'].includes(proposal.status)) return res.status(400).json({ error: 'Proposal already processed' });

    const amount = proposal.price_offered;
    const platform_fee = amount * 0.10;

    const order = new Order({
      buyer: buyerId,
      seller: proposal.designer._id,
      listing: proposal.listing._id,
      proposal: proposal_id,
      amount,
      platform_fee,
      status: 'in_progress' // Set directly to in_progress
    });
    await order.save();

    proposal.status = 'accepted';
    await proposal.save();

    await Listing.findByIdAndUpdate(proposal.listing._id, { status: 'in_progress' });

    res.status(201).json({ 
      message: 'Order created successfully! The project is now active.',
      orderId: order.id
    });
  } catch (error) { next(error); }
};

export const getUserOrders = async (req, res, next) => {
  try {
    const userId = req.user.id;
    const query = req.user.role === 'designer' ? { seller: userId } : { buyer: userId };
    const orders = await Order.find(query)
      .populate('buyer', 'name')
      .populate('seller', 'name')
      .populate({ path: 'listing', select: 'title' })
      .sort({ createdAt: -1 })
      .lean();
    res.json(orders.map(o => ({ ...o, id: o._id, listing_title: o.listing?.title || 'N/A' })));
  } catch (error) { next(error); }
};

export const getOrderById = async (req, res, next) => {
  try {
    const order = await Order.findById(req.params.id)
      .populate('buyer', 'name profile.avatar_url')
      .populate('seller', 'name profile.avatar_url')
      .populate('listing', 'title description')
      .populate('proposal', 'price_offered delivery_time')
      .lean();
    if (!order) return res.status(404).json({ error: 'Order not found' });
    if (order.buyer._id.toString() !== req.user.id && order.seller._id.toString() !== req.user.id) {
      return res.status(403).json({ error: 'Not authorized' });
    }
    const updates = await ProgressUpdate.find({ order: req.params.id }).populate('author', 'name role').sort({ created_at: 'asc' }).lean();
    res.json({ ...order, id: order._id, progress_updates: updates });
  } catch (error) { next(error); }
};

export const updateOrderStatus = async (req, res, next) => {
  try {
    const { status } = req.body;
    const order = await Order.findById(req.params.id);
    if (!order) return res.status(404).json({ error: 'Order not found' });

    const isBuyer = order.buyer.toString() === req.user.id;
    const isSeller = order.seller.toString() === req.user.id;
    if (!isBuyer && !isSeller) return res.status(403).json({ error: 'Not authorized' });

    const transitions = { in_progress: 'delivered', delivered: 'completed' };
    const roles = { delivered: 'seller', completed: 'buyer' };
    
    if (transitions[order.status] !== status) return res.status(400).json({ error: `Invalid status transition.` });
    if ((roles[status] === 'seller' && !isSeller) || (roles[status] === 'buyer' && !isBuyer)) {
      return res.status(403).json({ error: 'Action not allowed for your role.' });
    }

    order.status = status;
    await order.save();
    if (status === 'completed') await Listing.findByIdAndUpdate(order.listing, { status: 'completed' });

    res.json({ message: 'Order status updated', order });
  } catch (error) { next(error); }
};
</file>

<file path="BackEnd/controllers/uploadController.js">
import multer from 'multer';
import path from 'path';
import fs from 'fs';
import User from '../models/userModel.js';
import PortfolioItem from '../models/portfolioItemModel.js'; // Import the new model

const uploadDir = './uploads';
if (!fs.existsSync(uploadDir)) {
  fs.mkdirSync(uploadDir);
}

// Define allowed file types
const fileTypes = {
  avatar: /jpeg|jpg|png|gif/,
  document: /jpeg|jpg|png|pdf|doc|docx/
};

// Reusable storage engine
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, uploadDir);
  },
  filename: (req, file, cb) => {
    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
    cb(null, `${file.fieldname}-${uniqueSuffix}${path.extname(file.originalname)}`);
  }
});

// Reusable file filter
const createFileFilter = (type) => (req, file, cb) => {
  const allowed = fileTypes[type];
  if (!allowed) {
    return cb(new Error('Invalid upload type specified.'));
  }
  const mimetype = allowed.test(file.mimetype);
  const extname = allowed.test(path.extname(file.originalname).toLowerCase());

  if (mimetype && extname) {
    return cb(null, true);
  }
  cb(new Error(`File upload only supports the following filetypes: ${allowed}`));
};

// Specific upload middleware instances
const uploadAvatarMiddleware = multer({
  storage: storage,
  limits: { fileSize: 1024 * 1024 * 5 }, // 5MB
  fileFilter: createFileFilter('avatar')
}).single('avatar');

const uploadPortfolioMiddleware = multer({
  storage: storage,
  limits: { fileSize: 1024 * 1024 * 10 }, // 10MB
  fileFilter: createFileFilter('document')
}).single('file');


// @desc    Upload user avatar
// @route   POST /api/uploads/avatar
// @access  Private
export const uploadAvatar = (req, res, next) => {
  uploadAvatarMiddleware(req, res, async (err) => {
    if (err) {
      return res.status(400).json({ error: err.message });
    }
    if (!req.file) {
      return res.status(400).json({ error: 'Please select a file to upload.' });
    }

    const avatarUrl = `/uploads/${req.file.filename}`;

    try {
      await User.findByIdAndUpdate(
        req.user.id,
        { $set: { 'profile.avatar_url': avatarUrl } }
      );
      res.json({ message: 'Avatar uploaded successfully', avatarUrl });
    } catch (dbError) {
      next(dbError);
    }
  });
};


// @desc    Upload a portfolio item
// @route   POST /api/uploads/portfolio
// @access  Private (Designer only)
export const uploadPortfolioItem = (req, res, next) => {
  uploadPortfolioMiddleware(req, res, async (err) => {
    if (err) {
      return res.status(400).json({ error: err.message });
    }
    if (!req.file) {
      return res.status(400).json({ error: 'Please select a file to upload.' });
    }
    const { title, description } = req.body;
    if (!title) {
        return res.status(400).json({ error: 'Title is required for portfolio item.' });
    }

    const file_url = `/uploads/${req.file.filename}`;
    const file_type = path.extname(req.file.originalname).substring(1);

    try {
      const portfolioItem = new PortfolioItem({
        designer: req.user.id,
        title,
        description,
        file_url,
        file_type
      });
      await portfolioItem.save();

      res.status(201).json({ 
        message: 'Portfolio item uploaded successfully', 
        item: portfolioItem 
      });

    } catch (dbError) {
      next(dbError);
    }
  });
};


// @desc    Delete a portfolio item
// @route   DELETE /api/uploads/portfolio/:id
// @access  Private (Designer only)
export const deletePortfolioItem = async (req, res, next) => {
    try {
        const { id } = req.params;
        const designerId = req.user.id;
        
        const item = await PortfolioItem.findById(id);
        
        if (!item) {
            return res.status(404).json({ error: 'Portfolio item not found' });
        }
        
        if (item.designer.toString() !== designerId) {
            return res.status(403).json({ error: 'You are not authorized to delete this item' });
        }
        
        // Optional: Delete file from server filesystem
        const filePath = path.join(uploadDir, path.basename(item.file_url));
        if (fs.existsSync(filePath)) {
            fs.unlinkSync(filePath);
        }
        
        await item.deleteOne();
        
        res.json({ message: 'Portfolio item deleted successfully' });
        
    } catch (error) {
        next(error);
    }
};
</file>

<file path="BackEnd/middleware/errorHandler.js">
export const errorHandler = (err, req, res, next) => {
  console.error('Error:', err);

  // Validation errors
  if (err.name === 'ValidationError') {
    return res.status(400).json({
      error: 'Validation Error',
      details: err.details || err.message
    });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({
      error: 'Invalid token'
    });
  }

  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({
      error: 'Token expired'
    });
  }

  // MongoDB errors
  if (err.code === 11000) { // Duplicate key error
    return res.status(409).json({
      error: 'Resource already exists'
    });
  }

  // Mongoose validation errors
  if (err.name === 'CastError') {
    return res.status(400).json({
      error: 'Invalid ID format'
    });
  }

  // File upload errors
  if (err.code === 'LIMIT_FILE_SIZE') {
    return res.status(413).json({
      error: 'File too large'
    });
  }

  // Stripe errors
  if (err.type === 'StripeCardError') {
    return res.status(402).json({
      error: 'Payment failed',
      message: err.message
    });
  }

  // Default error
  res.status(err.status || 500).json({
    error: err.message || 'Internal Server Error',
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
};
</file>

<file path="BackEnd/models/messageModel.js">
import mongoose from 'mongoose';

const messageSchema = new mongoose.Schema({
  thread_id: {
    type: String,
    required: true,
    index: true,
  },
  sender: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  recipient: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  body: {
    type: String,
    required: true,
  },
  attachments: {
    type: [String],
    default: [],
  },
  is_read: {
    type: Boolean,
    default: false,
  },
  is_flagged: {
    type: Boolean,
    default: false,
    index: true, // Add index for efficient filtering of flagged threads
  },
}, {
  timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' },
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

messageSchema.virtual('id').get(function() {
  return this._id.toHexString();
});

const Message = mongoose.model('Message', messageSchema);

export default Message;
</file>

<file path="BackEnd/models/orderModel.js">
import mongoose from 'mongoose';

const orderSchema = new mongoose.Schema({
  buyer: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  seller: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  listing: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Listing',
  },
  proposal: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Proposal',
  },
  amount: {
    type: Number,
    required: true,
  },
  platform_fee: {
    type: Number,
    required: true,
  },
  status: {
    type: String,
    enum: ['in_progress', 'delivered', 'completed', 'cancelled', 'disputed'],
    default: 'in_progress',
  },
}, {
  timestamps: true,
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

orderSchema.virtual('id').get(function() {
  return this._id.toHexString();
});


const Order = mongoose.model('Order', orderSchema);

export default Order;
</file>

<file path="BackEnd/models/proposalModel.js">
import mongoose from 'mongoose';

const proposalSchema = new mongoose.Schema({
  listing: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'Listing',
  },
  designer: {
    type: mongoose.Schema.Types.ObjectId,
    required: true,
    ref: 'User',
  },
  message: {
    type: String,
    required: true,
  },
  price_offered: {
    type: Number,
    required: true,
  },
  delivery_time: {
    type: Number, // in days
  },
  status: {
    type: String,
    enum: ['pending', 'accepted', 'rejected', 'shortlisted'],
    default: 'pending',
  },
}, {
  timestamps: true,
  toJSON: { virtuals: true },
  toObject: { virtuals: true }
});

proposalSchema.virtual('id').get(function() {
  return this._id.toHexString();
});


const Proposal = mongoose.model('Proposal', proposalSchema);

export default Proposal;
</file>

<file path="BackEnd/models/userModel.js">
// BackEnd/models/userModel.js
import mongoose from 'mongoose';
import bcrypt from 'bcryptjs';

const userSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
    trim: true,
  },
  email: {
    type: String,
    required: true,
    unique: true,
    lowercase: true,
    trim: true,
    index: true,
  },
  username: {
    type: String,
    unique: true,
    sparse: true, // allows null but unique when exists
  },
  password_hash: {
    type: String,
    required: true,
  },
  role: {
    type: String,
    enum: ['designer', 'business', 'admin'],
    default: 'designer',
  },
  is_active: {
    type: Boolean,
    default: true,
  },
  profile: {
    avatar_url: { type: String, default: '' },
    bio: { type: String, default: '' },
    skills: [String],
    hourly_rate: { type: Number },
    company_name: { type: String },
    website: { type: String },
    location: { type: String },
  },
  saved_listings: [{
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Listing',
  }],
}, {
  timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' },
});

// Virtual for password
userSchema.virtual('password').set(function(password) {
  this.password_hash = bcrypt.hashSync(password, 12);
});

// Method to compare password
userSchema.methods.comparePassword = function(password) {
  return bcrypt.compareSync(password, this.password_hash);
};

const User = mongoose.model('User', userSchema);

export default User;
</file>

<file path="BackEnd/routes/adminRoutes.js">
import express from 'express';
import {
  getAllUsers,
  updateUserStatus,
  getPlatformAnalytics,
  getAllMessageThreads,
  getMessagesForModeration,
  toggleFlagMessageThread,
} from '../controllers/adminController.js';

const router = express.Router();

// User management
router.get('/users', getAllUsers);
router.patch('/users/:id/status', updateUserStatus);

// Analytics
router.get('/analytics', getPlatformAnalytics);

// Content Moderation
router.get('/messages', getAllMessageThreads); // Get all threads
router.get('/messages/:threadId', getMessagesForModeration); // Get messages within a thread
router.patch('/messages/:threadId/flag', toggleFlagMessageThread); // Flag/unflag a thread

export default router;
</file>

<file path="BackEnd/routes/messagesRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import {
  sendMessage,
  getUserThreads,
  getMessagesInThread,
} from '../controllers/messagesController.js';
import { authenticateToken } from '../middleware/auth.js';

const router = express.Router();

// Validation chain for sending a message
const sendMessageValidation = [
  body('recipient_id').isMongoId().withMessage('Valid recipient ID is required'),
  body('body').trim().isLength({ min: 1 }).withMessage('Message cannot be empty'),
  body('attachments').optional().isArray(),
];

// Send a new message (creates thread automatically)
router.post('/', authenticateToken, sendMessageValidation, sendMessage);

// Get all conversation threads for the user
router.get('/threads', authenticateToken, getUserThreads);

// Get all messages in a specific thread
router.get('/:threadId', authenticateToken, getMessagesInThread);

export default router;
</file>

<file path="BackEnd/routes/profileRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import { getProfileById, updateProfile, searchProfiles } from '../controllers/profileController.js';
import { authenticateToken, optionalAuth } from '../middleware/auth.js';

const router = express.Router();

const updateProfileValidation = [
  body('bio').optional().isLength({ max: 1000 }),
  body('skills').optional().isArray(),
  body('location').optional().isLength({ max: 100 }),
  body('hourly_rate').optional().isFloat({ min: 0 }),
  body('portfolio_urls').optional().isArray(),
  body('social_links').optional().isObject()
];

// IMPORTANT: Order matters. The general search '/' must come before the specific '/:id'.
router.get('/', searchProfiles); 
router.get('/:id', optionalAuth, getProfileById);
router.put('/:id', authenticateToken, updateProfileValidation, updateProfile);

export default router;
</file>

<file path="BackEnd/routes/reviewsRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import { authenticateToken } from '../middleware/auth.js';
import { createReview, getReviewsForUser } from '../controllers/reviewsController.js';

const router = express.Router();

const createReviewValidation = [
  body('order_id').isMongoId().withMessage('A valid Order ID is required.'),
  body('reviewee_id').isMongoId().withMessage('A valid Reviewee ID is required.'),
  body('rating').isInt({ min: 1, max: 5 }).withMessage('Rating must be between 1 and 5.'),
  body('comment').optional().isString().trim().isLength({ max: 1000 })
];

router.post('/', authenticateToken, createReviewValidation, createReview);
router.get('/user/:userId', getReviewsForUser);

export default router;
</file>

<file path="BackEnd/routes/uploadRoutes.js">
import express from 'express';
import { authenticateToken, requireRole } from '../middleware/auth.js';
import { 
    uploadAvatar, 
    uploadPortfolioItem,
    deletePortfolioItem
} from '../controllers/uploadController.js';

const router = express.Router();

// Avatar upload (all users)
router.post('/avatar', authenticateToken, uploadAvatar);

// Portfolio item upload (designers only)
router.post('/portfolio', authenticateToken, requireRole(['designer']), uploadPortfolioItem);

// Portfolio item deletion (designers only)
router.delete('/portfolio/:id', authenticateToken, requireRole(['designer']), deletePortfolioItem);

export default router;
</file>

<file path="BackEnd/scripts/init.js">
import mongoose from 'mongoose';
import dotenv from 'dotenv';
import connectDB from '../config/database.js';

// Load Models
import User from '../models/userModel.js';
import Listing from '../models/listingModel.js';
import Proposal from '../models/proposalModel.js';
import Order from '../models/orderModel.js';
import Message from '../models/messageModel.js';
import Review from '../models/reviewModel.js';
import PortfolioItem from '../models/portfolioItemModel.js';
import Invoice from '../models/invoiceModel.js';

dotenv.config();

const clearDatabase = async () => {
  try {
    console.log('üóëÔ∏è  Clearing existing data...');
    // Order matters for logs, but not for Mongo's parallel deletion
    await Invoice.deleteMany({});
    await Review.deleteMany({});
    await Message.deleteMany({});
    await Order.deleteMany({});
    await Proposal.deleteMany({});
    await PortfolioItem.deleteMany({});
    await Listing.deleteMany({});
    await User.deleteMany({});
    console.log('‚úÖ Database cleared');
  } catch (error) {
    console.error('‚ùå Error clearing database:', error);
    process.exit(1);
  }
};

const createTestAccounts = async () => {
  try {
    console.log('üë• Creating test accounts...\n');

    const accounts = [
      {
        email: 'designer@creative.com',
        password_hash: 'design2024',
        name: 'Creative Designer',
        role: 'designer',
        is_email_verified: true,
        profile: {
          bio: 'Professional designer specializing in branding and visual identity. Over 10 years of experience.',
          skills: ['Logo Design', 'Branding', 'UI/UX', 'Illustration'],
          location: 'New York, USA',
          hourly_rate: 75,
        },
      },
      {
        email: 'business@startup.com',
        password_hash: 'startup2024',
        name: 'Tech Startup Co',
        role: 'business',
        is_email_verified: true,
        profile: {
          bio: 'Growing tech company looking for talented designers to help us build the next big thing.',
        },
      },
      {
        email: 'admin@shockwave.com',
        password_hash: 'admin2024',
        name: 'System Administrator',
        role: 'admin',
        is_email_verified: true,
        profile: {
          bio: 'Platform administrator.',
          skills: ['Platform Management'],
        },
      },
    ];

    for (const account of accounts) {
      // The password will be hashed by the pre-save middleware in the User model
      const user = new User(account);
      await user.save();
      
      console.log(`‚úÖ Created ${account.role.toUpperCase()} account:`);
      console.log(`   Email: ${account.email}`);
      console.log(`   Password: ${account.password_hash}`); // Note: this is the plain text before hashing
      console.log(`   Name: ${account.name}\n`);
    }

    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
    console.log('üéâ TEST ACCOUNTS READY FOR TESTING');
    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
    console.log('\nüìã DESIGNER ACCOUNT:');
    console.log('   Email: designer@creative.com');
    console.log('   Password: design2024');
    console.log('\nüíº BUSINESS ACCOUNT:');
    console.log('   Email: business@startup.com');
    console.log('   Password: startup2024');
    console.log('\nüîê ADMIN ACCOUNT:');
    console.log('   Email: admin@shockwave.com');
    console.log('   Password: admin2024');
    console.log('\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');

  } catch (error) {
    console.error('‚ùå Error creating test accounts:', error);
    process.exit(1);
  }
};

const init = async () => {
  console.log('\nüöÄ Initializing ShockWave Digital Marketplace with MongoDB...\n');
  await connectDB();
  await clearDatabase();
  // await createTestAccounts(); // COMMENTED OUT - No test accounts in production
  console.log('‚úÖ Initialization complete!\n');
  await mongoose.disconnect();
  process.exit(0);
};

init();
</file>

<file path="FrontEnd/components/Navbar.jsx">
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { motion, AnimatePresence } from 'framer-motion';

const Navbar = () => {
  const { user, isAuthenticated, logout } = useAuth();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [avatarUrl, setAvatarUrl] = useState(null);

  // This useEffect correctly handles setting the avatar URL
  // It only runs when the 'user' object changes.
  useEffect(() => {
    if (isAuthenticated && user) {
      const url = user.avatar_url
        ? `${import.meta.env.VITE_SERVER_URL || 'http://localhost:5000'}${user.avatar_url}`
        : `https://ui-avatars.com/api/?name=${user.name.replace(' ', '+')}&background=00CEC9&color=fff`;
      setAvatarUrl(url);
    } else {
      setAvatarUrl(null); // Clear the avatar on logout
    }
  }, [user, isAuthenticated]);

  const handleLogout = async () => {
    try {
      await logout();
      setMobileMenuOpen(false);
    } catch (error) {
      console.error('Logout failed:', error);
    }
  };

  const closeMobileMenu = () => {
    setMobileMenuOpen(false);
  };

  return (
    <motion.nav 
      className="bg-white shadow-lg sticky top-0 z-50"
      initial={{ y: -100 }} 
      animate={{ y: 0 }}
      transition={{ duration: 0.5 }}
    >
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          {/* Logo */}
          <div className="flex items-center">
            <Link to="/" className="flex-shrink-0" onClick={closeMobileMenu}>
              <h1 className="text-xl sm:text-2xl font-bold text-mint hover:text-mint-dark transition-colors">
                ShockWave
              </h1>
            </Link>
            
            {/* Desktop Navigation Links */}
            <div className="hidden md:ml-8 md:flex md:space-x-4 lg:space-x-8">
              <Link to="/browse" className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-sm font-medium transition-all">
                Browse Designers
              </Link>
              <Link to="/listings" className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-sm font-medium transition-all">
                Find Work
              </Link>
            </div>
          </div>

          {/* Desktop Auth Section */}
          <div className="hidden md:flex items-center space-x-2 lg:space-x-4">
            {isAuthenticated && user ? (
              <>
                <Link to="/dashboard" className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-sm font-medium transition-all">
                  Dashboard
                </Link>
                <Link to="/messages" className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-sm font-medium transition-all">
                  Messages
                </Link>
                <div className="flex items-center space-x-3 border-l border-lightgray-dark pl-4 ml-2">
                  {/* Conditionally render the image only when avatarUrl is ready */}
                  {avatarUrl && <img src={avatarUrl} alt={user.name} className="w-8 h-8 rounded-full object-cover bg-lightgray" />}
                  <span className="text-sm text-charcoal hidden lg:inline">
                    Hello, {user.name}
                  </span>
                  <button onClick={handleLogout} className="bg-mint text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-mint-dark transition-colors">
                    Logout
                  </button>
                </div>
              </>
            ) : (
              <>
                <Link to="/login" className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-sm font-medium transition-all">
                  Login
                </Link>
                <Link to="/register" className="bg-mint text-white px-3 lg:px-4 py-2 rounded-md text-sm font-medium hover:bg-mint-dark transition-colors shadow-sm">
                  Sign Up
                </Link>
              </>
            )}
          </div>

          {/* Mobile Menu Button */}
          <div className="flex md:hidden">
            <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="inline-flex items-center justify-center p-2 rounded-md text-charcoal hover:text-mint hover:bg-mint/5 focus:outline-none" aria-expanded="false">
              <span className="sr-only">Open main menu</span>
              {!mobileMenuOpen ? (
                <svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
              ) : (
                <svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" /></svg>
              )}
            </button>
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      <AnimatePresence>
        {mobileMenuOpen && (
          <motion.div className="md:hidden border-t-2 border-mint" initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} transition={{ duration: 0.3 }}>
            <div className="px-2 pt-2 pb-3 bg-white shadow-lg flex flex-col gap-1">
              <Link to="/browse" onClick={closeMobileMenu} className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-base font-medium transition-all">Browse Designers</Link>
              <Link to="/listings" onClick={closeMobileMenu} className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-base font-medium transition-all">Find Work</Link>
              {isAuthenticated && user ? (
                <>
                  <div className="border-t border-lightgray-dark pt-2 mt-2">
                    <div className="px-3 py-2 text-sm text-charcoal-light">Logged in as <span className="font-medium text-charcoal">{user.name}</span></div>
                  </div>
                  <Link to="/dashboard" onClick={closeMobileMenu} className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-base font-medium transition-all">Dashboard</Link>
                  <Link to="/messages" onClick={closeMobileMenu} className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-base font-medium transition-all">Messages</Link>
                  <button onClick={handleLogout} className="w-full text-left text-white bg-mint hover:bg-mint-dark px-3 py-2 rounded-md text-base font-medium transition-colors mt-2">Logout</button>
                </>
              ) : (
                <div className="border-t border-lightgray-dark pt-2 mt-2 flex flex-col gap-1">
                  <Link to="/login" onClick={closeMobileMenu} className="text-charcoal hover:text-mint hover:bg-mint/5 px-3 py-2 rounded-md text-base font-medium transition-all">Login</Link>
                  <Link to="/register" onClick={closeMobileMenu} className="text-white bg-mint hover:bg-mint-dark px-3 py-2 rounded-md text-base font-medium transition-colors shadow-sm">Sign Up</Link>
                </div>
              )}
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.nav>
  );
};

export default Navbar;
</file>

<file path="FrontEnd/components/ReviewForm.jsx">
import { useState } from 'react';
import { reviewAPI } from '../services/api';

const StarInput = ({ rating, setRating, disabled }) => {
  return (
    <div className="flex">
      {[...Array(5)].map((_, index) => {
        const starValue = index + 1;
        return (
          <span
            key={starValue}
            className={`cursor-pointer text-3xl ${disabled ? 'cursor-not-allowed' : ''} ${starValue <= rating ? 'text-yellow-400' : 'text-gray-300'}`}
            onClick={() => !disabled && setRating(starValue)}
          >
            ‚òÖ
          </span>
        );
      })}
    </div>
  );
};

const ReviewForm = ({ orderId, revieweeId, onReviewSubmitted }) => {
  const [rating, setRating] = useState(0);
  const [comment, setComment] = useState('');
  const [error, setError] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (rating === 0) {
      setError('Please select a star rating.');
      return;
    }
    setError('');
    setIsSubmitting(true);
    try {
      await reviewAPI.createReview({
        order_id: orderId,
        reviewee_id: revieweeId,
        rating: rating,
        comment: comment,
      });
      onReviewSubmitted(); // Notify parent to refetch data
    } catch (err) {
      setError(err.response?.data?.error || 'Failed to submit review.');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="bg-gray-50 rounded-lg p-6 mt-6 border">
      <h3 className="text-xl font-semibold text-charcoal mb-4">Leave a Review</h3>
      <form onSubmit={handleSubmit} className="space-y-4">
        {error && <div className="text-red-500 bg-red-100 p-3 rounded-md">{error}</div>}
        <div>
          <label className="block text-sm font-medium text-charcoal mb-2">Your Rating</label>
          <StarInput rating={rating} setRating={setRating} disabled={isSubmitting} />
        </div>
        <div>
          <label htmlFor="comment" className="block text-sm font-medium text-charcoal mb-2">Your Comments</label>
          <textarea
            id="comment"
            value={comment}
            onChange={(e) => setComment(e.target.value)}
            rows="4"
            className="w-full p-2 border-2 border-lightgray-dark rounded-md"
            placeholder="Share your experience..."
            disabled={isSubmitting}
          ></textarea>
        </div>
        <div className="text-right">
          <button
            type="submit"
            disabled={isSubmitting}
            className="bg-mint text-white px-6 py-2 rounded-md hover:bg-mint-dark disabled:opacity-50"
          >
            {isSubmitting ? 'Submitting...' : 'Submit Review'}
          </button>
        </div>
      </form>
    </div>
  );
};

export default ReviewForm;
</file>

<file path="FrontEnd/context/AuthContext.jsx">
import { createContext, useContext, useReducer, useEffect } from 'react';
import { authAPI } from '../services/api';

const AuthContext = createContext();

const authReducer = (state, action) => {
  switch (action.type) {
    case 'LOGIN_START':
      return { ...state, loading: true, error: null };
    case 'LOGIN_SUCCESS':
      return { 
        ...state, 
        loading: false, 
        user: action.payload.user, 
        isAuthenticated: true,
        error: null 
      };
    case 'LOGIN_FAILURE':
      return { 
        ...state, 
        loading: false, 
        error: action.payload, 
        isAuthenticated: false,
        user: null 
      };
    case 'LOGOUT':
      return { 
        ...state, 
        user: null, 
        isAuthenticated: false, 
        loading: false,
        error: null 
      };
    case 'SET_USER':
      return {
        ...state,
        user: action.payload,
        isAuthenticated: true,
        loading: false
      };
    case 'SET_LOADING':
      return { ...state, loading: action.payload };
    default:
      return state;
  }
};

const initialState = {
  user: null,
  isAuthenticated: false,
  loading: true,
  error: null
};

export const AuthProvider = ({ children }) => {
  const [state, dispatch] = useReducer(authReducer, initialState);

  // Check if user is logged in on app start
  useEffect(() => {
    const checkAuth = async () => {
      try {
        const token = localStorage.getItem('accessToken');
        if (token) {
          const response = await authAPI.getCurrentUser();
          dispatch({ type: 'SET_USER', payload: response.data.user });
        } else {
          dispatch({ type: 'SET_LOADING', payload: false });
        }
      } catch (error) {
        localStorage.removeItem('accessToken');
        dispatch({ type: 'SET_LOADING', payload: false });
      }
    };

    checkAuth();
  }, []);

  const login = async (username, password) => {
    dispatch({ type: 'LOGIN_START' });
    try {
      const response = await authAPI.login(username, password);
      localStorage.setItem('accessToken', response.data.accessToken);
      dispatch({ type: 'LOGIN_SUCCESS', payload: response.data });
      return response.data;
    } catch (error) {
      const errorMessage = error.response?.data?.error || 'Login failed';
      dispatch({ type: 'LOGIN_FAILURE', payload: errorMessage });
      throw error;
    }
  };

  const register = async (userData) => {
    dispatch({ type: 'LOGIN_START' });
    try {
      const response = await authAPI.register(userData);
      // Backend returns { message: "User created successfully..." }
      // Don't auto-login - user needs to verify email first
      dispatch({ type: 'SET_LOADING', payload: false });
      return response.data; // Return the success message for display
    } catch (error) {
      const errorMessage = error.response?.data?.error || 'Registration failed';
      dispatch({ type: 'LOGIN_FAILURE', payload: errorMessage });
      throw error;
    }
  };

  const logout = async () => {
    try {
      await authAPI.logout();
    } catch (error) {
      console.error('Logout error:', error);
    } finally {
      localStorage.removeItem('accessToken');
      dispatch({ type: 'LOGOUT' });
    }
  };

  const checkAuth = async () => {
    try {
      const token = localStorage.getItem('accessToken');
      if (token) {
        const response = await authAPI.getCurrentUser();
        dispatch({ type: 'SET_USER', payload: response.data.user });
      }
    } catch (error) {
      localStorage.removeItem('accessToken');
      dispatch({ type: 'LOGOUT' });
    }
  };

  const value = {
    ...state,
    login,
    register,
    logout,
    checkAuth
  };

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
</file>

<file path="FrontEnd/pages/AdminPanel.jsx">
import { useAuth } from '../context/AuthContext';
import { useState, useEffect } from 'react';
import { adminAPI } from '../services/api';
import { Line, Bar } from 'react-chartjs-2';
import { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, BarElement, Title, Tooltip, Legend } from 'chart.js';
import AdminMessagesView from './AdminMessagesView'; // Import the new component

ChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, BarElement, Title, Tooltip, Legend);

const AdminPanel = () => {
  const { user } = useAuth();
  const [view, setView] = useState('dashboard'); // 'dashboard', 'users', or 'messages'
  
  if (!user || user.role !== 'admin') {
    return (
      <div className="text-center p-8"><h2 className="text-2xl font-bold">Access Denied</h2><p>You do not have permission to access this page.</p></div>
    );
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h1 className="text-3xl font-bold text-gray-900 mb-6">Admin Panel</h1>
      <div className="flex border-b mb-6">
        <TabButton name="dashboard" currentView={view} setView={setView}>Dashboard</TabButton>
        <TabButton name="users" currentView={view} setView={setView}>Users</TabButton>
        <TabButton name="messages" currentView={view} setView={setView}>Messages</TabButton>
      </div>

      {view === 'dashboard' && <DashboardView />}
      {view === 'users' && <UsersView />}
      {view === 'messages' && <AdminMessagesView />}
    </div>
  );
};

const TabButton = ({ name, currentView, setView, children }) => (
    <button onClick={() => setView(name)} className={`px-4 py-2 ${currentView === name ? 'border-b-2 border-mint font-semibold text-mint' : 'text-gray-500'}`}>
        {children}
    </button>
);

const DashboardView = () => {
    const [analytics, setAnalytics] = useState(null);
    useEffect(() => { adminAPI.getAnalytics().then(res => setAnalytics(res.data)).catch(console.error); }, []);
    if (!analytics) return <p>Loading analytics...</p>;

    const chartOptions = { responsive: true, plugins: { legend: { position: 'top' } } };
    const userGrowthData = {
        labels: analytics.charts.userGrowth.map(d => d._id),
        datasets: [{ label: 'New Users', data: analytics.charts.userGrowth.map(d => d.count), borderColor: '#00CEC9', backgroundColor: 'rgba(0, 206, 201, 0.2)', fill: true }],
    };
    const projectGrowthData = {
        labels: analytics.charts.projectGrowth.map(d => d._id),
        datasets: [{ label: 'New Projects', data: analytics.charts.projectGrowth.map(d => d.count), backgroundColor: 'rgba(45, 52, 54, 0.8)' }],
    };

    return (
        <div>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <StatCard title="Total Users" value={analytics.summary.totalUsers} />
                <StatCard title="Designers" value={analytics.summary.totalDesigners} />
                <StatCard title="Businesses" value={analytics.summary.totalBusinesses} />
                <StatCard title="Total Projects" value={analytics.summary.totalProjects} />
            </div>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div className="bg-white p-4 rounded-lg shadow"><h3 className="font-bold mb-2">User Growth (30 Days)</h3><Line options={chartOptions} data={userGrowthData} /></div>
                <div className="bg-white p-4 rounded-lg shadow"><h3 className="font-bold mb-2">Project Growth (30 Days)</h3><Bar options={chartOptions} data={projectGrowthData} /></div>
            </div>
        </div>
    );
};

const UsersView = () => {
    const [users, setUsers] = useState([]);
    useEffect(() => { adminAPI.getUsers().then(res => setUsers(res.data)).catch(console.error); }, []);
    
    const handleStatusToggle = async (userId, currentStatus) => {
        if (!window.confirm(`Are you sure you want to ${currentStatus ? 'suspend' : 'reactivate'} this user?`)) return;
        try {
            const res = await adminAPI.updateUserStatus(userId, !currentStatus);
            setUsers(users.map(u => u._id === userId ? { ...u, is_active: res.data.user.is_active } : u));
        } catch (error) { alert("Could not update user status."); }
    };

    return (
        <div className="bg-white p-4 rounded-lg shadow overflow-x-auto">
            <table className="w-full text-left">
                <thead className="bg-gray-50"><tr><th className="p-3">Name</th><th className="p-3">Email</th><th className="p-3">Role</th><th className="p-3">Status</th><th className="p-3">Actions</th></tr></thead>
                <tbody>
                    {users.map(user => (
                        <tr key={user._id} className="border-b hover:bg-gray-50">
                            <td className="p-3">{user.name}</td><td className="p-3">{user.email}</td><td className="p-3 capitalize">{user.role}</td>
                            <td className="p-3"><span className={`px-2 py-1 text-xs rounded-full ${user.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>{user.is_active ? 'Active' : 'Suspended'}</span></td>
                            <td className="p-3"><button onClick={() => handleStatusToggle(user._id, user.is_active)} className={`px-3 py-1 text-sm rounded-md text-white ${user.is_active ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'}`}>{user.is_active ? 'Suspend' : 'Reactivate'}</button></td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    );
};

const StatCard = ({ title, value }) => (
    <div className="bg-white p-4 rounded-lg shadow"><div className="text-sm text-gray-500">{title}</div><div className="text-2xl font-bold">{value}</div></div>
);

export default AdminPanel;
</file>

<file path="FrontEnd/pages/Browse.jsx">
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { motion } from 'framer-motion';
import { profileAPI } from '../services/api';

// A small, reusable component to display the star rating on the card
const MiniStarRating = ({ rating, reviewCount }) => {
  if (!rating) return <div className="h-5"></div>; // Keep height consistent for layout
  return (
    <div className="flex items-center mt-1">
      <span className="text-yellow-400">‚òÖ</span>
      <span className="ml-1 text-sm font-semibold text-charcoal">
        {parseFloat(rating).toFixed(1)}
      </span>
      <span className="ml-2 text-sm text-charcoal-light">({reviewCount} reviews)</span>
    </div>
  );
};

const Browse = () => {
  const [profiles, setProfiles] = useState([]);
  const [loading, setLoading] = useState(true);
  const [filters, setFilters] = useState({
    search: '',
    skill: '',
    location: '',
    min_rate: '',
    max_rate: ''
  });

  // Fetch profiles whenever filters change
  useEffect(() => {
    // A debounce could be added here in a real app to prevent excessive API calls
    const fetchProfiles = async () => {
      try {
        setLoading(true);
        const response = await profileAPI.searchProfiles(filters);
        setProfiles(response.data.profiles);
      } catch (error) {
        console.error('Failed to fetch profiles:', error);
      } finally {
        setLoading(false);
      }
    };
    fetchProfiles();
  }, [filters]);

  const handleFilterChange = (e) => {
    setFilters({
      ...filters,
      [e.target.name]: e.target.value
    });
  };

  return (
    <div className="min-h-screen bg-lightgray-light">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-charcoal mb-2">Browse Designers</h1>
          <p className="text-charcoal-light text-lg">Find the perfect creative partner for your next project.</p>
        </div>

        {/* Filters Bar */}
        <div className="bg-white p-6 rounded-lg shadow-md mb-8 border-2 border-mint/20">
          <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
            <input type="text" name="search" placeholder="Search by name, bio..." className="px-4 py-2 border-2 border-lightgray-dark rounded-md" value={filters.search} onChange={handleFilterChange}/>
            <input type="text" name="skill" placeholder="Skill (e.g., logo design)" className="px-4 py-2 border-2 border-lightgray-dark rounded-md" value={filters.skill} onChange={handleFilterChange}/>
            <input type="text" name="location" placeholder="Location" className="px-4 py-2 border-2 border-lightgray-dark rounded-md" value={filters.location} onChange={handleFilterChange}/>
            <input type="number" name="min_rate" placeholder="Min rate ($)" className="px-4 py-2 border-2 border-lightgray-dark rounded-md" value={filters.min_rate} onChange={handleFilterChange}/>
            <input type="number" name="max_rate" placeholder="Max rate ($)" className="px-4 py-2 border-2 border-lightgray-dark rounded-md" value={filters.max_rate} onChange={handleFilterChange}/>
          </div>
        </div>

        {/* Results Grid */}
        {loading ? (
             <div className="text-center py-16"><div className="animate-spin rounded-full h-16 w-16 border-b-4 border-mint mx-auto"></div></div>
        ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {profiles.length === 0 ? (
                <div className="col-span-full text-center py-16 bg-white rounded-lg shadow-md">
                <p className="text-charcoal-light text-lg">No designers found matching your criteria.</p>
                </div>
            ) : (
                profiles.map((profile, index) => (
                <motion.div
                    key={profile.user_id}
                    className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow border-2 border-transparent hover:border-mint flex flex-col"
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: index * 0.05 }}
                    whileHover={{ scale: 1.02 }}
                >
                    <div className="p-6 flex-grow">
                    <div className="flex items-center mb-4">
                        <img 
                        src={profile.avatar_url ? `${import.meta.env.VITE_API_URL || 'http://localhost:5000'}${profile.avatar_url}` : `https://ui-avatars.com/api/?name=${profile.name.replace(' ', '+')}`}
                        alt={profile.name}
                        className="w-16 h-16 rounded-full object-cover border-2"
                        />
                        <div className="ml-4">
                        <h3 className="text-lg font-semibold text-charcoal">{profile.name}</h3>
                        <p className="text-charcoal-light text-sm">{profile.location || 'Location not specified'}</p>
                        </div>
                    </div>
                    
                    <p className="text-charcoal mb-4 line-clamp-3 h-20">
                        {profile.bio || 'No bio available. Click to view the full profile for more details.'}
                    </p>
                    
                    <div className="flex flex-wrap gap-2 mb-4 h-10">
                        {profile.skills.slice(0, 3).map((skill, idx) => (
                        <span key={idx} className="px-3 py-1 bg-mint/10 text-mint text-xs font-semibold rounded-full">{skill}</span>
                        ))}
                        {profile.skills.length > 3 && (
                        <span className="px-3 py-1 bg-lightgray text-charcoal-light text-xs font-semibold rounded-full">+{profile.skills.length - 3} more</span>
                        )}
                    </div>
                    </div>
                    
                    <div className="bg-lightgray-light p-4 flex justify-between items-center">
                    <div>
                        {profile.hourly_rate && <p className="text-lg font-bold text-mint">${profile.hourly_rate}/hr</p>}
                        <MiniStarRating rating={profile.avg_rating} reviewCount={profile.review_count} />
                    </div>
                    <Link to={`/designer/${profile.user_id}`} className="bg-charcoal text-white px-4 py-2 rounded-md hover:bg-charcoal-light transition-colors text-sm font-semibold">
                        View Profile
                    </Link>
                    </div>
                </motion.div>
                ))
            )}
            </div>
        )}
      </div>
    </div>
  );
};

export default Browse;
</file>

<file path="FrontEnd/pages/Dashboard.jsx">
import { useAuth } from '../context/AuthContext';
import { motion } from 'framer-motion';
import { Link } from 'react-router-dom';
import { useState, useEffect } from 'react';
import { dashboardAPI, orderAPI } from '../services/api';

const Dashboard = () => {
  const { user, loading: authLoading } = useAuth();
  const [stats, setStats] = useState({ projects: 0, earnings: 0, messages: 0, reviews: 0 });
  const [orders, setOrders] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchData = async () => {
      if (!user) return;
      try {
        setLoading(true);
        const [statsRes, ordersRes] = await Promise.all([
            dashboardAPI.getStats(),
            orderAPI.getOrders()
        ]);
        setStats(statsRes.data);
        setOrders(ordersRes.data);
      } catch (error) {
        console.error("Failed to fetch dashboard data", error);
      } finally {
        setLoading(false);
      }
    };

    if (!authLoading && user) {
      fetchData();
    }
  }, [user, authLoading]);
  
  if (authLoading || loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-lightgray-light">
        <div className="animate-spin rounded-full h-32 w-32 border-b-4 border-mint"></div>
      </div>
    );
  }

  if (!user) return null;

  return (
    <div className="min-h-screen bg-lightgray-light">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
          <div className="mb-8"><h1 className="text-3xl font-bold text-charcoal mb-2">Welcome, {user.name}!</h1></div>
          <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <StatCard title="Active Projects" value={stats.projects} />
            <StatCard title={user.role === 'designer' ? 'Total Earnings' : 'Total Spent'} value={`$${stats.earnings.toFixed(2)}`} />
            <StatCard title="Unread Messages" value={stats.messages} />
            <StatCard title="Reviews Received" value={stats.reviews} />
          </div>
          {user.role === 'designer' ? <DesignerDashboard orders={orders} /> : <BusinessDashboard orders={orders} />}
        </motion.div>
      </div>
    </div>
  );
};

const StatCard = ({ title, value }) => (
    <div className="bg-white p-6 rounded-lg shadow-md border-l-4 border-mint"><h3 className="text-lg font-semibold text-charcoal mb-2">{title}</h3><p className="text-3xl font-bold text-mint">{value}</p></div>
);

const DesignerDashboard = ({ orders }) => (
  <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <div className="lg:col-span-2 space-y-8">
        <ActionPanel links={[{ to: "/listings", text: "Find Work", primary: true }, { to: "/projects/saved", text: "Saved Projects" }, { to: "/invoices", text: "Manage Invoices" }]} />
        <OrdersList orders={orders} title="Your Projects" />
    </div>
    <div className="lg:col-span-1"><SidePanel title="Your Profile" links={[{ to: `/designer/${useAuth().user.id}`, text: "View Public Profile" }, { to: "/profile/edit", text: "Edit Profile & Portfolio" }]} /></div>
  </div>
);

const BusinessDashboard = ({ orders }) => (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div className="lg:col-span-2 space-y-8">
            <ActionPanel links={[{ to: "/listings/new", text: "Post New Project", primary: true }, { to: "/browse", text: "Browse Designers" }, { to: "/invoices", text: "Manage Invoices" }]} />
            <OrdersList orders={orders} title="Your Projects" />
        </div>
        <div className="lg:col-span-1"><SidePanel title="Your Profile" links={[{ to: `/profile/edit`, text: "Edit Company Profile" }]} /></div>
    </div>
);

const ActionPanel = ({ links }) => (
    <div className="bg-white p-6 rounded-lg shadow-md"><h2 className="text-xl font-semibold text-charcoal mb-4">Quick Actions</h2><div className="flex flex-wrap gap-4">{links.map(link => (<Link key={link.to} to={link.to} className={link.primary ? "bg-mint text-white px-6 py-3 rounded-md hover:bg-mint-dark" : "bg-charcoal text-white px-6 py-3 rounded-md hover:bg-charcoal-light"}>{link.text}</Link>))}</div></div>
);

const SidePanel = ({ title, links }) => (
    <div className="bg-white p-6 rounded-lg shadow-md"><h2 className="text-xl font-semibold text-charcoal mb-4">{title}</h2><ul className="space-y-2">{links.map(link => (<li key={link.to}><Link to={link.to} className="text-mint hover:underline">{link.text}</Link></li>))}</ul></div>
);

const OrdersList = ({ orders, title }) => (
    <div className="bg-white p-6 rounded-lg shadow-md"><h2 className="text-xl font-semibold text-charcoal mb-4">{title}</h2>{orders.length === 0 ? <p className="text-charcoal-light">No projects to show.</p> : (<div className="space-y-4">{orders.map(order => (<Link to={`/order/${order.id}`} key={order.id} className="block border p-4 rounded-lg hover:bg-lightgray-light"><div className="flex justify-between items-center"><div><p className="font-bold text-charcoal">{order.listing_title}</p><p className="text-sm text-charcoal-light">with {useAuth().user.role === 'designer' ? order.buyer.name : order.seller.name}</p></div><span className="text-sm font-semibold capitalize px-2 py-1 rounded-full bg-mint/10 text-mint">{order.status.replace('_', ' ')}</span></div></Link>))}</div>)}</div>
);

export default Dashboard;
</file>

<file path="FrontEnd/pages/Register.jsx">
import { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { motion } from 'framer-motion';

const Register = () => {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    password: '',
    confirmPassword: '',
    role: '' // Start with no role selected
  });
  const [step, setStep] = useState(1); // Step 1 for role selection, Step 2 for form
  const [isLoading, setIsLoading] = useState(false);
  const { register } = useAuth();
  const [error, setError] = useState('');
  const [message, setMessage] = useState('');

  const handleRoleSelect = (role) => {
    setFormData({ ...formData, role });
    setStep(2);
  };

  const handleChange = (e) => {
    setError('');
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (formData.password !== formData.confirmPassword) {
      setError('Passwords do not match');
      return;
    }
    setIsLoading(true);
    setError('');
    setMessage('');
    try {
      const { confirmPassword, ...userData } = formData;
      const res = await register(userData);
      setMessage(res.message);
    } catch (err) {
      setError(err.response?.data?.error || 'Registration failed.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-lightgray-light via-white to-mint/5 py-12 px-4 sm:px-6 lg:px-8">
      <motion.div className="max-w-md w-full" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
        <div className="bg-white rounded-2xl shadow-xl p-8 border-2 border-mint/20">
          
          {message ? (
              <div className="text-center">
                  <h2 className="text-2xl font-bold text-charcoal mb-4">Registration Successful!</h2>
                  <p className="text-charcoal-light">{message}</p>
                  <Link to="/login" className="mt-6 inline-block bg-mint text-white py-2 px-4 rounded-lg">Proceed to Login</Link>
              </div>
          ) : (
            <>
              {step === 1 && <RoleSelection onSelect={handleRoleSelect} />}
              {step === 2 && <RegistrationForm formData={formData} onChange={handleChange} onSubmit={handleSubmit} isLoading={isLoading} error={error} setStep={setStep} />}
            </>
          )}

          <div className="mt-6 text-center">
            <p className="text-sm text-charcoal-light">
              Already have an account?{' '}
              <Link to="/login" className="font-medium text-mint hover:text-mint-dark">
                Sign in
              </Link>
            </p>
          </div>
        </div>
      </motion.div>
    </div>
  );
};

const RoleSelection = ({ onSelect }) => (
  <div className="text-center">
    <h2 className="text-3xl font-bold text-charcoal mb-2">Join ShockWave</h2>
    <p className="text-sm text-charcoal-light mb-8">First, tell us who you are.</p>
    <div className="space-y-4">
      <button onClick={() => onSelect('designer')} className="w-full text-left p-6 border-2 border-lightgray-dark rounded-lg hover:border-mint group">
        <h3 className="font-bold text-lg text-charcoal group-hover:text-mint">I'm a Designer</h3>
        <p className="text-charcoal-light">Looking for projects and to showcase my work.</p>
      </button>
      <button onClick={() => onSelect('business')} className="w-full text-left p-6 border-2 border-lightgray-dark rounded-lg hover:border-mint group">
        <h3 className="font-bold text-lg text-charcoal group-hover:text-mint">I'm a Business</h3>
        <p className="text-charcoal-light">Looking to hire talented designers for projects.</p>
      </button>
    </div>
  </div>
);

const RegistrationForm = ({ formData, onChange, onSubmit, isLoading, error, setStep }) => (
  <>
    <button onClick={() => setStep(1)} className="text-sm text-mint mb-4">&larr; Back to role selection</button>
    <div className="text-center mb-8">
        <h2 className="text-3xl font-bold text-charcoal mb-2">Create Your {formData.role === 'designer' ? 'Designer' : 'Business'} Account</h2>
        <p className="text-sm text-charcoal-light">Let's get you started.</p>
    </div>
    <form onSubmit={onSubmit} className="space-y-5">
      {error && <div className="bg-red-100 text-red-700 p-3 rounded-md text-sm">{error}</div>}
      <input type="hidden" name="role" value={formData.role} />
      <InputField label="Full Name" name="name" type="text" value={formData.name} onChange={onChange} placeholder="Enter your full name" />
      <InputField label="Email" name="email" type="email" value={formData.email} onChange={onChange} placeholder="you@example.com" />
      <InputField label="Password" name="password" type="password" value={formData.password} onChange={onChange} placeholder="Create a password (min 6 chars)" />
      <InputField label="Confirm Password" name="confirmPassword" type="password" value={formData.confirmPassword} onChange={onChange} placeholder="Confirm your password" />
      <button type="submit" disabled={isLoading} className="w-full bg-mint text-white py-3 rounded-lg font-medium hover:bg-mint-dark disabled:opacity-50">
        {isLoading ? 'Creating account...' : 'Create Account'}
      </button>
    </form>
  </>
);

const InputField = ({ label, name, type, value, onChange, placeholder }) => (
    <div>
        <label htmlFor={name} className="block text-sm font-medium text-charcoal mb-2">{label}</label>
        <input id={name} name={name} type={type} required value={value} onChange={onChange} placeholder={placeholder} className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" />
    </div>
);

export default Register;
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåä</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="ShockWave - Connect graphic designers with businesses. A marketplace for creative talent." />
    <title>ShockWave - Digital Marketplace for Designers</title>
  </head>
  <body>
    <div id="root"></div>
    <!-- 
      BEFORE: <script type="module" src="/src/main.jsx"></script>
      AFTER:
    -->
    <script type="module" src="/FrontEnd/main.jsx"></script>
  </body>
</html>
</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    // BEFORE: "./src/**/*.{js,ts,jsx,tsx}",
    // AFTER:
    "./FrontEnd/**/*.{js,ts,jsx,tsx}", 
  ],
  theme: {
    extend: {
      colors: {
        charcoal: {
          DEFAULT: '#2D3436',
          light: '#3d4547',
          dark: '#1d2426',
        },
        lightgray: {
          DEFAULT: '#DFE6E9',
          light: '#F5F7F8',
          dark: '#B2BEC3',
        },
        mint: {
          DEFAULT: '#00CEC9',
          light: '#55EFC4',
          dark: '#00B894',
        },
        primary: {
          50: '#e6fffe',
          100: '#b3fffc',
          200: '#80fffa',
          300: '#4dffef',
          400: '#1afff7',
          500: '#00CEC9',
          600: '#00b5b0',
          700: '#009c98',
          800: '#008380',
          900: '#006a68',
        }
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { transform: 'translateY(10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        }
      }
    },
  },
  plugins: [],
}
</file>

<file path="BackEnd/config/database.js">
import mongoose from 'mongoose';

const connectDB = async () => {
  try {
    const conn = await mongoose.connect(process.env.MONGO_URI);
    console.log(`‚úÖ MongoDB Connected: ${conn.connection.host}`);
  } catch (error) {
    console.error(`‚ùå Error connecting to MongoDB: ${error.message}`);
    console.error('\nüí° Make sure MongoDB is running!');
    console.error('   - Windows: Run "net start MongoDB" or start mongod.exe manually');
    console.error('   - Install MongoDB from: https://www.mongodb.com/try/download/community\n');
    process.exit(1);
  }
};

export default connectDB;
</file>

<file path="BackEnd/controllers/authController.js">
import bcrypt from 'bcrypt';
import jwt from 'jsonwebtoken';
import { validationResult } from 'express-validator';
import User from '../models/userModel.js';
import { generateVerificationToken, generateResetToken } from '../utils/tokenUtils.js';
import { sendVerificationEmail, sendPasswordResetEmail } from '../services/emailService.js';

// Generate JWT tokens
const generateTokens = (user) => {
  const accessToken = jwt.sign(
    { userId: user.id, role: user.role }, 
    process.env.JWT_SECRET, 
    { expiresIn: '15m' }
  );
  
  const refreshToken = jwt.sign(
    { userId: user.id }, 
    process.env.JWT_REFRESH_SECRET, 
    { expiresIn: '7d' }
  );

  return { accessToken, refreshToken };
};

// Set refresh token cookie
const setRefreshTokenCookie = (res, refreshToken) => {
    res.cookie('refreshToken', refreshToken, {
      httpOnly: true,
      secure: process.env.NODE_ENV === 'production',
      sameSite: 'strict',
      maxAge: 7 * 24 * 60 * 60 * 1000 // 7 days
    });
};

// @desc    Register a new user
// @route   POST /api/auth/register
// @access  Public
export const registerUser = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { email, password, name, role } = req.body;

    const existingUser = await User.findOne({ email });
    if (existingUser) {
      return res.status(409).json({ error: 'An account with this email already exists' });
    }
    
    const verificationToken = generateVerificationToken();
    const newUser = new User({
      email,
      password_hash: password, // Will be hashed by userModel pre-save hook
      name,
      role,
      email_verification_token: verificationToken,
      email_verification_expires: Date.now() + 3600000, // 1 hour from now
    });

    await newUser.save();
    
    // Send verification email (mocked for now)
    await sendVerificationEmail(newUser.email, verificationToken);

    res.status(201).json({
      message: 'User created successfully. Please check your email to verify your account.',
    });
  } catch (error) {
    next(error);
  }
};


// @desc    Authenticate user & get token
// @route   POST /api/auth/login
// @access  Public
export const loginUser = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { email, password } = req.body;

    const user = await User.findOne({ email }).select('+password_hash');

    if (!user || !user.is_active) {
      return res.status(401).json({ error: 'Invalid credentials or account disabled' });
    }
    
    // if (!user.is_email_verified) {
    //     return res.status(403).json({ error: 'Please verify your email before logging in.' });
    // }

    const isValidPassword = user.comparePassword(password);
    if (!isValidPassword) {
      return res.status(401).json({ error: 'Invalid credentials' });
    }

    user.last_login = new Date();
    await user.save();

    const { accessToken, refreshToken } = generateTokens(user);

    setRefreshTokenCookie(res, refreshToken);

    res.json({
      message: 'Login successful',
      user: { id: user.id, email: user.email, name: user.name, role: user.role },
      accessToken
    });
  } catch (error) {
    next(error);
  }
};


// @desc    Refresh access token
// @route   POST /api/auth/refresh
// @access  Public
export const refreshToken = async (req, res, next) => {
  try {
    const { refreshToken } = req.cookies;
    if (!refreshToken) {
      return res.status(401).json({ error: 'Refresh token required' });
    }

    jwt.verify(refreshToken, process.env.JWT_REFRESH_SECRET, async (err, decoded) => {
      if (err) {
        return res.status(403).json({ error: 'Invalid refresh token' });
      }

      const user = await User.findOne({ _id: decoded.userId, is_active: true })
        .select('id email name role');
      
      if (!user) {
        return res.status(403).json({ error: 'User not found' });
      }

      const { accessToken } = generateTokens(user);
      res.json({ accessToken, user: { id: user.id, email: user.email, name: user.name, role: user.role } });
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Logout user
// @route   POST /api/auth/logout
// @access  Private
export const logoutUser = (req, res) => {
  res.clearCookie('refreshToken');
  res.json({ message: 'Logged out successfully' });
};

// @desc    Get current user profile
// @route   GET /api/auth/me
// @access  Private
export const getMe = (req, res) => {
  res.json({ user: req.user });
};


// @desc    Verify user email
// @route   GET /api/auth/verify-email/:token
// @access  Public
export const verifyEmail = async (req, res, next) => {
    try {
        const { token } = req.params;
        const user = await User.findOne({
            email_verification_token: token,
            email_verification_expires: { $gt: Date.now() },
        });
        
        if (!user) {
            return res.status(400).json({ error: 'Invalid or expired verification token.' });
        }
        
        user.is_email_verified = true;
        user.email_verification_token = undefined;
        user.email_verification_expires = undefined;
        await user.save();
        
        res.json({ message: 'Email verified successfully. You can now log in.' });
        
    } catch (error) {
        next(error);
    }
};


// @desc    Request password reset
// @route   POST /api/auth/forgot-password
// @access  Public
export const forgotPassword = async (req, res, next) => {
    try {
        const { email } = req.body;
        const user = await User.findOne({ email });
        
        if (!user) {
            return res.status(404).json({ error: 'User with that email does not exist.' });
        }
        
        const resetToken = generateResetToken();
        user.password_reset_token = resetToken;
        user.password_reset_expires = Date.now() + 3600000; // 1 hour
        await user.save();
        
        // Send password reset email
        await sendPasswordResetEmail(user.email, resetToken);
        
        res.json({ message: 'Password reset email sent. Please check your inbox.' });
        
    } catch (error) {
        next(error);
    }
};

// @desc    Reset password with token
// @route   POST /api/auth/reset-password/:token
// @access  Public
export const resetPassword = async (req, res, next) => {
    try {
        const { token } = req.params;
        const { password } = req.body;
        
        const user = await User.findOne({
            password_reset_token: token,
            password_reset_expires: { $gt: Date.now() },
        });
        
        if (!user) {
            return res.status(400).json({ error: 'Invalid or expired password reset token.' });
        }
        
        // The pre-save hook in userModel will hash the password
        user.password_hash = password;
        user.password_reset_token = undefined;
        user.password_reset_expires = undefined;
        await user.save();
        
        res.json({ message: 'Password has been reset successfully.' });

    } catch (error) {
        next(error);
    }
};
</file>

<file path="BackEnd/middleware/auth.js">
import jwt from 'jsonwebtoken';
import User from '../models/userModel.js';

export const authenticateToken = (req, res, next) => {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN

  if (!token) {
    return res.status(401).json({ error: 'Access token required' });
  }

  jwt.verify(token, process.env.JWT_SECRET, async (err, decoded) => {
    if (err) {
      return res.status(403).json({ error: 'Invalid or expired token' });
    }

    // Get user from database
    const user = await User.findOne({ _id: decoded.userId, is_active: true })
      .select('role name email')
      .lean();
    
    if (!user) {
      return res.status(403).json({ error: 'User not found or inactive' });
    }

    req.user = { id: user._id.toString(), email: user.email, role: user.role, name: user.name };
    next();
  });
};

export const requireRole = (roles) => {
  return (req, res, next) => {
    if (!req.user) {
      return res.status(401).json({ error: 'Authentication required' });
    }

    if (!roles.includes(req.user.role)) {
      return res.status(403).json({ error: 'Insufficient permissions' });
    }

    next();
  };
};

export const optionalAuth = (req, res, next) => {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1];

  if (!token) {
    return next();
  }

  jwt.verify(token, process.env.JWT_SECRET, async (err, decoded) => {
    if (!err) {
      const user = await User.findOne({ _id: decoded.userId, is_active: true })
        .select('role name email')
        .lean();
      if (user) {
        req.user = { id: user._id.toString(), email: user.email, role: user.role, name: user.name };
      }
    }
    next();
  });
};
</file>

<file path="BackEnd/routes/authRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import {
  registerUser,
  loginUser,
  refreshToken,
  logoutUser,
  getMe,
  verifyEmail,
  forgotPassword,
  resetPassword
} from '../controllers/authController.js';
import { authenticateToken } from '../middleware/auth.js';

const router = express.Router();

// Validation middleware
const registerValidation = [
  body('email').isEmail().withMessage('Please enter a valid email').normalizeEmail(),
  body('password').isLength({ min: 6 }).withMessage('Password must be at least 6 characters long'),
  body('name').notEmpty().withMessage('Name is required').trim(),
  body('role').isIn(['designer', 'business']).withMessage('Invalid role selected')
];

const loginValidation = [
  body('email').isEmail().normalizeEmail(),
  body('password').notEmpty()
];

const forgotPasswordValidation = [
  body('email').isEmail().withMessage('Please enter a valid email').normalizeEmail()
];

const resetPasswordValidation = [
  body('password').isLength({ min: 6 }).withMessage('Password must be at least 6 characters long')
];

// Routes
router.post('/register', registerValidation, registerUser);
router.post('/login', loginValidation, loginUser);
router.post('/refresh', refreshToken);
router.post('/logout', authenticateToken, logoutUser);
router.get('/me', authenticateToken, getMe);

// Email Verification and Password Reset
router.get('/verify-email/:token', verifyEmail);
router.post('/forgot-password', forgotPasswordValidation, forgotPassword);
router.post('/reset-password/:token', resetPasswordValidation, resetPassword);


export default router;
</file>

<file path="BackEnd/routes/listingsRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import { authenticateToken, requireRole } from '../middleware/auth.js';
import { 
  getAllListings, 
  getListingById, 
  createListing,
  createProposal,
  getProposalsForListing,
  updateProposalStatus,
  toggleBookmark,
  getBookmarkedListings
} from '../controllers/listingsController.js';

const router = express.Router();

// Validation Middleware
const createListingValidation = [
  body('title').notEmpty().withMessage('Title is required'),
  body('description').notEmpty().withMessage('Description is required'),
  body('budget_min').isFloat({ gt: 0 }).withMessage('Minimum budget must be a positive number'),
  body('budget_max').isFloat().custom((value, { req }) => {
    if (parseFloat(value) < parseFloat(req.body.budget_min)) {
      throw new Error('Maximum budget must be greater than or equal to the minimum budget.');
    }
    return true;
  }),
];

const createProposalValidation = [
  body('message').notEmpty().withMessage('A message is required for your proposal'),
  body('price_offered').isFloat({ gt: 0 }).withMessage('Offered price must be a positive number'),
  body('delivery_time').isInt({ gt: 0 }).withMessage('Delivery time must be a positive number of days')
];

// --- Listing Routes ---
router.get('/', getAllListings);
router.get('/bookmarked', authenticateToken, requireRole(['designer']), getBookmarkedListings);
router.get('/:id', getListingById);
router.post(
  '/', 
  authenticateToken, 
  requireRole(['business']), 
  createListingValidation,
  createListing
);

// --- Bookmark Routes ---
router.post('/:id/bookmark', authenticateToken, requireRole(['designer']), toggleBookmark);

// --- Proposal Routes ---
router.get(
  '/:id/proposals',
  authenticateToken,
  requireRole(['business']),
  getProposalsForListing
);

router.post(
  '/:id/proposals', 
  authenticateToken, 
  requireRole(['designer']), 
  createProposalValidation,
  createProposal
);

router.patch(
  '/:listingId/proposals/:proposalId',
  authenticateToken,
  requireRole(['business']),
  updateProposalStatus
);

export default router;
</file>

<file path="BackEnd/routes/ordersRoutes.js">
import express from 'express';
import { body } from 'express-validator';
import { authenticateToken, requireRole } from '../middleware/auth.js';
import {
  createOrder,
  getUserOrders,
  getOrderById,
  updateOrderStatus,
} from '../controllers/ordersController.js';
import { createProgressUpdate } from '../controllers/progressUpdateController.js';

const router = express.Router();

const createOrderValidation = [
  body('proposal_id').isMongoId().withMessage('Valid proposal ID is required')
];

const updateStatusValidation = [
  body('status').isIn(['delivered', 'completed', 'cancelled']).withMessage('Invalid status value')
];

const createUpdateValidation = [
    body('message').notEmpty().trim().withMessage('An update message is required.')
];

// Order Management
router.post('/', authenticateToken, requireRole(['business']), createOrderValidation, createOrder);
router.get('/', authenticateToken, getUserOrders);
router.get('/:id', authenticateToken, getOrderById);
router.patch('/:id/status', authenticateToken, updateStatusValidation, updateOrderStatus);

// Progress Updates (nested under an order)
router.post('/:orderId/updates', authenticateToken, requireRole(['designer']), createUpdateValidation, createProgressUpdate);

export default router;
</file>

<file path="FrontEnd/App.jsx">
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { AuthProvider } from './context/AuthContext';
import Navbar from './components/Navbar';
import Footer from './components/Footer';
import Home from './pages/Home';
import Login from './pages/Login';
import Register from './pages/Register';
import Browse from './pages/Browse';
import Profile from './pages/Profile';
import ProfileEdit from './pages/ProfileEdit.jsx';
import Dashboard from './pages/Dashboard';
import Messages from './pages/Messages';
import Listings from './pages/Listings.jsx';
import CreateListing from './pages/CreateListing.jsx';
import ListingDetail from './pages/ListingDetail';
import OrderDetail from './pages/OrderDetail';
import AdminPanel from './pages/AdminPanel';
import PrivateRoute from './components/PrivateRoute';
import SavedProjects from './pages/SavedProjects';
import ForgotPassword from './pages/ForgotPassword';
import ResetPassword from './pages/ResetPassword';
import Invoices from './pages/Invoices';
import InvoiceDetail from './pages/InvoiceDetail';
import { motion } from 'framer-motion';
import './styles/App.css';

function App() {
  return (
    <AuthProvider>
      <Router>
        <div className="min-h-screen bg-lightgray-light flex flex-col">
          <Navbar />
          <motion.main className="flex-grow" initial={{ opacity: 0 }} animate={{ opacity: 1 }}>
            <Routes>
              {/* Public Routes */}
              <Route path="/" element={<Home />} />
              <Route path="/login" element={<Login />} />
              <Route path="/register" element={<Register />} />
              <Route path="/forgot-password" element={<ForgotPassword />} />
              <Route path="/reset-password/:token" element={<ResetPassword />} />
              <Route path="/browse" element={<Browse />} />
              <Route path="/designer/:id" element={<Profile />} />
              <Route path="/listings" element={<Listings />} />
              <Route path="/listing/:id" element={<ListingDetail />} />

              {/* Protected Routes */}
              <Route path="/dashboard" element={<PrivateRoute><Dashboard /></PrivateRoute>} />
              <Route path="/messages" element={<PrivateRoute><Messages /></PrivateRoute>} />
              <Route path="/profile/edit" element={<PrivateRoute><ProfileEdit /></PrivateRoute>} />
              <Route path="/order/:id" element={<PrivateRoute><OrderDetail /></PrivateRoute>} />
              <Route path="/invoices" element={<PrivateRoute><Invoices /></PrivateRoute>} />
              <Route path="/invoice/:id" element={<PrivateRoute><InvoiceDetail /></PrivateRoute>} />
              
              {/* Role-Specific Routes */}
              <Route path="/projects/saved" element={<PrivateRoute roles={['designer']}><SavedProjects /></PrivateRoute>} />
              <Route path="/listings/new" element={<PrivateRoute roles={['business']}><CreateListing /></PrivateRoute>} />
              
              {/* Admin Route */}
              <Route path="/admin/*" element={<PrivateRoute roles={['admin']}><AdminPanel /></PrivateRoute>} />
            </Routes>
          </motion.main>
          <Footer />
        </div>
      </Router>
    </AuthProvider>
  );
}

export default App;
</file>

<file path="FrontEnd/pages/Login.jsx">
import { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { motion } from 'framer-motion';

const Login = () => {
  const [formData, setFormData] = useState({
    email: '',
    password: ''
  });
  const [isLoading, setIsLoading] = useState(false);
  const { login, error } = useAuth();
  const navigate = useNavigate();

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    try {
      await login(formData.email, formData.password);
      navigate('/dashboard');
    } catch (err) {
      console.error('Login failed:', err);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-lightgray-light via-white to-mint/5 py-12 px-4 sm:px-6 lg:px-8">
      <motion.div 
        className="max-w-md w-full"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
      >
        <div className="bg-white rounded-2xl shadow-xl p-8 border-2 border-mint/20">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold text-charcoal mb-2">Welcome Back</h2>
            <p className="text-sm text-charcoal-light">Sign in to continue to ShockWave</p>
          </div>
          
          <form onSubmit={handleSubmit} className="space-y-6">
            {error && (
              <motion.div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm" initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }}>
                {error}
              </motion.div>
            )}
            
            <div>
              <label htmlFor="email" className="block text-sm font-medium text-charcoal mb-2">Email</label>
              <input id="email" name="email" type="email" required className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" placeholder="Enter your email" value={formData.email} onChange={handleChange}/>
            </div>

            <div>
              <label htmlFor="password" className="block text-sm font-medium text-charcoal mb-2">Password</label>
              <input id="password" name="password" type="password" required className="w-full px-4 py-3 border-2 border-lightgray-dark rounded-lg focus:outline-none focus:ring-2 focus:ring-mint" placeholder="Enter your password" value={formData.password} onChange={handleChange}/>
            </div>
            
            <div className="text-right text-sm">
                <Link to="/forgot-password" className="font-medium text-mint hover:text-mint-dark">
                    Forgot password?
                </Link>
            </div>

            <button type="submit" disabled={isLoading} className="w-full bg-mint text-white py-3 rounded-lg font-medium hover:bg-mint-dark disabled:opacity-50">
              {isLoading ? 'Signing in...' : 'Sign In'}
            </button>
          </form>

          <div className="mt-6 text-center">
            <p className="text-sm text-charcoal-light">
              Don't have an account?{' '}
              <Link to="/register" className="font-medium text-mint hover:text-mint-dark">
                Register here
              </Link>
            </p>
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export default Login;
</file>

<file path="FrontEnd/pages/Messages.jsx">
import { useState, useEffect, useRef } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { messageAPI } from '../services/api';
import { io } from 'socket.io-client';

const socket = io(import.meta.env.VITE_API_URL || 'http://localhost:5000', {
  autoConnect: false, // Do not connect automatically
  transports: ['polling', 'websocket']
});

const Messages = () => {
  const { user } = useAuth();
  const location = useLocation();
  const navigate = useNavigate();
  
  const [threads, setThreads] = useState([]);
  const [activeThread, setActiveThread] = useState(null);
  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState('');
  const [loading, setLoading] = useState(true);
  
  const messagesEndRef = useRef(null);

  const fetchThreads = async () => {
    if (!user) return [];
    setLoading(true);
    try {
      const res = await messageAPI.getThreads();
      setThreads(res.data);
      return res.data;
    } catch (error) {
      console.error("Failed to fetch threads:", error);
      return [];
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    if (user) {
      socket.connect();
      socket.emit('join_room', user.id);

      const handleReceiveMessage = (message) => {
        // If the message belongs to the currently active chat, add it to the view
        if (activeThread && message.thread_id === activeThread.thread_id) {
          setMessages((prev) => [...prev, message]);
        }
        // Always refresh the thread list to show the new "last message" and reorder
        fetchThreads();
      };
      socket.on('receive_message', handleReceiveMessage);

      // Initial data load and handling of "new conversation" state
      const initialize = async () => {
        const allThreads = await fetchThreads();
        const newConversationUser = location.state?.newConversationWith;

        if (newConversationUser) {
          // Find if a thread already exists with this user
          const existingThread = allThreads.find(t => t.participant_id === newConversationUser.id);
          if (existingThread) {
            handleThreadClick(existingThread);
          } else {
            // Create a temporary placeholder thread to start the conversation
            const placeholder = {
              thread_id: [user.id, newConversationUser.id].sort().join('-'),
              participant_id: newConversationUser.id,
              participant_name: newConversationUser.name,
              last_message: 'Start the conversation!',
              isPlaceholder: true,
            };
            setThreads(prev => [placeholder, ...prev]);
            setActiveThread(placeholder);
            setMessages([]);
          }
          // Clear the location state to prevent re-triggering
          navigate(location.pathname, { replace: true, state: {} });
        } else if (allThreads.length > 0 && !activeThread) {
            // Select the first thread by default
            handleThreadClick(allThreads[0]);
        }
      };
      initialize();
      
      return () => {
        socket.off('receive_message', handleReceiveMessage);
        socket.disconnect();
      };
    }
  }, [user, location.state]);

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  const handleThreadClick = async (thread) => {
    setActiveThread(thread);
    if (thread.isPlaceholder) {
      setMessages([]);
      return;
    }
    try {
      const res = await messageAPI.getMessages(thread.participant_id);
      setMessages(res.data);
    } catch (error) {
      console.error("Failed to fetch messages:", error);
    }
  };
  
  const handleSendMessage = (e) => {
    e.preventDefault();
    if (newMessage.trim() === '' || !activeThread) return;
    
    // Emit the event to the server. The server is the source of truth.
    socket.emit('send_message', {
      sender_id: user.id,
      recipient_id: activeThread.participant_id,
      body: newMessage,
    });
    setNewMessage('');
  };

  if (loading) {
    return <div className="p-4 text-center">Loading conversations...</div>;
  }

  return (
    <div className="h-[calc(100vh-8rem)] flex bg-white max-w-7xl mx-auto my-8 rounded-lg shadow-lg border-2 border-mint/20 overflow-hidden">
      {/* Left Panel: Conversation Threads */}
      <div className="w-1/3 border-r-2 border-lightgray flex flex-col">
        <div className="p-4 border-b-2 border-lightgray">
          <h2 className="text-xl font-bold text-charcoal">Conversations</h2>
        </div>
        <div className="overflow-y-auto flex-1">
          {threads.length === 0 ? (
            <p className="p-4 text-charcoal-light">No conversations yet.</p>
          ) : (
            <ul>
              {threads.map(thread => (
                <li key={thread.thread_id} onClick={() => handleThreadClick(thread)} className={`p-4 cursor-pointer hover:bg-lightgray-light border-b border-lightgray ${activeThread?.thread_id === thread.thread_id ? 'bg-mint/10' : ''}`}>
                  <p className="font-semibold text-charcoal">{thread.participant_name}</p>
                  <p className="text-sm text-charcoal-light truncate">{thread.last_message}</p>
                </li>
              ))}
            </ul>
          )}
        </div>
      </div>
      
      {/* Right Panel: Active Chat */}
      <div className="w-2/3 flex flex-col bg-lightgray-light">
        {activeThread ? (
          <>
            <div className="p-4 border-b-2 border-lightgray bg-white flex items-center">
              <h2 className="text-xl font-bold text-charcoal">{activeThread.participant_name}</h2>
            </div>
            <div className="flex-1 p-4 overflow-y-auto">
                {messages.map((msg) => (
                  <div key={msg.id} className={`flex ${msg.sender_id === user.id ? 'justify-end' : 'justify-start'} mb-4`}>
                    <div className={`max-w-md p-3 rounded-lg shadow-sm ${msg.sender_id === user.id ? 'bg-mint text-white' : 'bg-white text-charcoal'}`}>
                      <p>{msg.body}</p>
                      <p className={`text-xs mt-1 text-right ${msg.sender_id === user.id ? 'text-white/70' : 'text-charcoal-light'}`}>{new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</p>
                    </div>
                  </div>
                ))}
              <div ref={messagesEndRef} />
            </div>
            <div className="p-4 bg-white border-t-2 border-lightgray">
              <form onSubmit={handleSendMessage} className="flex">
                <input type="text" value={newMessage} onChange={(e) => setNewMessage(e.target.value)} placeholder="Type a message..." className="flex-1 p-2 border-2 border-lightgray-dark rounded-l-lg focus:ring-mint focus:border-mint"/>
                <button type="submit" className="px-4 py-2 bg-mint text-white rounded-r-lg hover:bg-mint-dark font-semibold">Send</button>
              </form>
            </div>
          </>
        ) : (
          <div className="flex-1 flex items-center justify-center text-charcoal-light text-center">
            <p>Select a conversation to start chatting,<br />or contact a designer from their profile page.</p>
          </div>
        )}
      </div>
    </div>
  );
};

export default Messages;
</file>

<file path="FrontEnd/pages/Profile.jsx">
import { useParams, useNavigate } from 'react-router-dom';
import { useState, useEffect } from 'react';
import { profileAPI, reviewAPI } from '../services/api';
import { motion } from 'framer-motion';
import { useAuth } from '../context/AuthContext';

const StarRating = ({ rating, reviewCount }) => {
  if (!rating) return <div className="text-sm text-charcoal-light">No reviews yet</div>;
  const fullStars = Math.floor(rating);
  const halfStar = rating % 1 !== 0;
  const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);

  return (
    <div className="flex items-center">
      {[...Array(fullStars)].map((_, i) => <span key={`full_${i}`} className="text-yellow-400 text-xl">‚òÖ</span>)}
      {halfStar && <span className="text-yellow-400 text-xl">‚òÜ</span>}
      {[...Array(emptyStars)].map((_, i) => <span key={`empty_${i}`} className="text-gray-300 text-xl">‚òÖ</span>)}
      {reviewCount > 0 && <span className="ml-2 text-charcoal-light text-sm">({reviewCount} reviews)</span>}
    </div>
  );
};

const Profile = () => {
  const { id } = useParams();
  const { user, isAuthenticated } = useAuth();
  const navigate = useNavigate();
  const [profile, setProfile] = useState(null);
  const [reviews, setReviews] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchProfileData = async () => {
      try {
        setLoading(true);
        const [profileRes, reviewsRes] = await Promise.all([
          profileAPI.getProfile(id),
          reviewAPI.getReviewsForUser(id)
        ]);
        setProfile(profileRes.data);
        setReviews(reviewsRes.data);
      } catch (error) {
        console.error('Failed to fetch profile data:', error);
      } finally {
        setLoading(false);
      }
    };
    fetchProfileData();
  }, [id]);

  const handleContact = () => {
    navigate('/messages', { 
      state: { 
        newConversationWith: {
          id: profile.user_id,
          name: profile.name,
        } 
      } 
    });
  };

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-32 w-32 border-b-4 border-mint"></div>
      </div>
    );
  }

  if (!profile) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <h2 className="text-2xl font-bold text-charcoal">Designer profile not found.</h2>
      </div>
    );
  }

  const SERVER_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000';
  const avatarUrl = profile.avatar_url ? `${SERVER_BASE_URL}${profile.avatar_url}` : `https://ui-avatars.com/api/?name=${profile.name.replace(' ', '+')}`;
  const showContactButton = isAuthenticated && user?.role === 'business' && user?.id !== profile.user_id;

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="bg-white rounded-lg shadow-lg overflow-hidden">
        <div className="bg-gradient-to-r from-charcoal to-charcoal-light p-8 text-white">
          <div className="flex flex-col sm:flex-row items-center gap-6">
            <img src={avatarUrl} alt={profile.name} className="w-24 h-24 rounded-full object-cover border-4 border-mint bg-white"/>
            <div>
              <h1 className="text-3xl font-bold">{profile.name}</h1>
              <p className="text-xl capitalize text-lightgray">{profile.role}</p>
              <div className="mt-2"><StarRating rating={profile.avg_rating} reviewCount={profile.review_count} /></div>
            </div>
          </div>
        </div>
        
        <div className="p-8">
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div className="lg:col-span-2">
              <section className="mb-8">
                <h2 className="text-2xl font-bold text-charcoal mb-4">About Me</h2>
                <p className="text-charcoal-light leading-relaxed">{profile.bio || 'No bio available.'}</p>
              </section>

              {profile.role === 'designer' && (
                  <section className="mb-8">
                      <h2 className="text-2xl font-bold text-charcoal mb-4">Portfolio</h2>
                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                          {profile.portfolio_items?.length > 0 ? (
                              profile.portfolio_items.map(item => (
                                  <a href={`${SERVER_BASE_URL}${item.file_url}`} target="_blank" rel="noreferrer" key={item._id} className="border rounded-lg p-4 hover:shadow-md hover:border-mint">
                                      <p className="font-bold">{item.title}</p>
                                      <p className="text-sm text-gray-600">{item.description}</p>
                                      <p className="text-xs text-mint mt-2 uppercase">View {item.file_type}</p>
                                  </a>
                              ))
                          ) : (
                              <p className="text-charcoal-light">No portfolio items have been uploaded yet.</p>
                          )}
                      </div>
                  </section>
              )}

              <section>
                <h2 className="text-2xl font-bold text-charcoal mb-4">Reviews</h2>
                <div className="space-y-6">
                  {reviews.length > 0 ? (
                    reviews.map(review => (
                      <div key={review.id} className="border-b border-lightgray pb-4 last:border-b-0">
                        <div className="flex items-center mb-2">
                          <StarRating rating={review.rating} />
                          <p className="ml-auto text-sm text-charcoal-light">{new Date(review.created_at).toLocaleDateString()}</p>
                        </div>
                        <p className="text-charcoal">{review.comment}</p>
                        <p className="text-sm font-semibold text-charcoal-light mt-2">- {review.reviewer_name}</p>
                      </div>
                    ))
                  ) : (
                    <p className="text-charcoal-light">This user has not received any reviews yet.</p>
                  )}
                </div>
              </section>
            </div>

            <div className="lg:col-span-1">
              <div className="bg-lightgray-light p-6 rounded-lg sticky top-24">
                <h3 className="text-lg font-semibold text-charcoal mb-4">Quick Info</h3>
                
                {profile.hourly_rate && (
                  <div className="mb-4">
                    <p className="text-sm text-charcoal-light">Hourly Rate</p>
                    <p className="text-2xl font-bold text-mint">${profile.hourly_rate}/hr</p>
                  </div>
                )}
                
                <div className="mb-4">
                  <p className="text-sm text-charcoal-light">Member Since</p>
                  <p className="font-medium">{new Date(profile.user_created_at).toLocaleDateString()}</p>
                </div>

                {showContactButton && (
                  <button 
                    onClick={handleContact}
                    className="w-full bg-mint text-white py-3 px-4 rounded-md hover:bg-mint-dark transition-colors font-semibold"
                  >
                    Contact Designer
                  </button>
                )}
              </div>
            </div>
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export default Profile;
</file>

<file path="FrontEnd/pages/ProfileEdit.jsx">
import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { profileAPI, uploadAPI } from '../services/api';
import { motion } from 'framer-motion';

const ProfileEdit = () => {
  const { user, checkAuth, loading: authLoading } = useAuth();
  const navigate = useNavigate();

  const [formData, setFormData] = useState({ bio: '', skills: '', location: '', hourly_rate: '' });
  const [portfolioItems, setPortfolioItems] = useState([]);
  
  const [avatarFile, setAvatarFile] = useState(null);
  const [avatarPreview, setAvatarPreview] = useState('');

  const [portfolioFile, setPortfolioFile] = useState(null);
  const [portfolioTitle, setPortfolioTitle] = useState('');
  const [portfolioDescription, setPortfolioDescription] = useState('');
  
  const [pageLoading, setPageLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false);
  const [isUploading, setIsUploading] = useState(false);
  const [error, setError] = useState(null);

  const fetchProfile = async () => {
    try {
      const res = await profileAPI.getProfile(user.id);
      setFormData({
        bio: res.data.bio || '',
        skills: (res.data.skills || []).join(', '),
        location: res.data.location || '',
        hourly_rate: res.data.hourly_rate || ''
      });
      setPortfolioItems(res.data.portfolio_items || []);
      if (res.data.avatar_url) {
        setAvatarPreview(`${import.meta.env.VITE_API_URL || 'http://localhost:5000'}${res.data.avatar_url}`);
      }
    } catch (err) {
      setError('Could not load your profile data.');
    } finally {
      setPageLoading(false);
    }
  };

  useEffect(() => {
    if (!authLoading && user) {
      fetchProfile();
    }
  }, [user, authLoading]);

  const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });
  const handleAvatarChange = (e) => {
    const file = e.target.files[0];
    if (file) {
      setAvatarFile(file);
      setAvatarPreview(URL.createObjectURL(file));
    }
  };
  const handlePortfolioFileChange = (e) => setPortfolioFile(e.target.files[0]);

  const handleProfileSave = async (e) => {
    e.preventDefault();
    setIsSaving(true);
    setError(null);
    try {
      if (avatarFile) {
        const avatarFormData = new FormData();
        avatarFormData.append('avatar', avatarFile);
        await uploadAPI.uploadAvatar(avatarFormData);
      }
      
      const profileData = {
        ...formData,
        skills: formData.skills.split(',').map(skill => skill.trim()).filter(Boolean),
        hourly_rate: formData.hourly_rate ? parseFloat(formData.hourly_rate) : null,
      };
      await profileAPI.updateProfile(user.id, profileData);
      
      await checkAuth(); // Refresh user context
      alert("Profile updated successfully!");
    } catch (err) {
      setError(err.response?.data?.error || 'Failed to update profile.');
    } finally {
      setIsSaving(false);
    }
  };

  const handlePortfolioUpload = async (e) => {
    e.preventDefault();
    if (!portfolioFile || !portfolioTitle) {
      setError("A title and file are required for portfolio items.");
      return;
    }
    setIsUploading(true);
    setError(null);
    try {
        const portfolioFormData = new FormData();
        portfolioFormData.append('file', portfolioFile);
        portfolioFormData.append('title', portfolioTitle);
        portfolioFormData.append('description', portfolioDescription);

        await uploadAPI.uploadPortfolioItem(portfolioFormData);
        // Reset form and refetch profile to show new item
        setPortfolioFile(null);
        setPortfolioTitle('');
        setPortfolioDescription('');
        document.getElementById('portfolio-file-input').value = '';
        fetchProfile();
    } catch(err) {
        setError(err.response?.data?.error || 'Failed to upload portfolio item.');
    } finally {
        setIsUploading(false);
    }
  };

  const handleDeletePortfolioItem = async (itemId) => {
    if (!window.confirm("Are you sure you want to delete this portfolio item?")) return;
    try {
        await uploadAPI.deletePortfolioItem(itemId);
        setPortfolioItems(portfolioItems.filter(item => item._id !== itemId));
    } catch (err) {
        setError(err.response?.data?.error || 'Failed to delete item.');
    }
  };
  
  if (pageLoading || authLoading) {
    return <div className="min-h-screen flex items-center justify-center">Loading profile...</div>;
  }

  return (
    <div className="min-h-screen bg-lightgray-light py-12 px-4">
      <motion.div className="max-w-4xl mx-auto" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>
        {error && <div className="bg-red-100 text-red-700 p-3 rounded-md mb-6">{error}</div>}
        
        {/* Profile Details Form */}
        <div className="bg-white rounded-2xl shadow-xl p-8 border-2 border-mint/20 mb-8">
          <h1 className="text-3xl font-bold text-charcoal mb-6">Edit Your Profile</h1>
          <form onSubmit={handleProfileSave} className="space-y-6">
            <div>
              <label className="block text-sm font-medium text-charcoal mb-2">Profile Picture</label>
              <div className="flex items-center gap-4">
                <img src={avatarPreview || `https://ui-avatars.com/api/?name=${user.name.replace(' ', '+')}`} alt="Avatar Preview" className="w-20 h-20 rounded-full object-cover border-2"/>
                <input type="file" accept="image/*" onChange={handleAvatarChange} className="file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-mint/10 file:text-mint hover:file:bg-mint/20"/>
              </div>
            </div>
            <div>
              <label htmlFor="bio" className="block text-sm font-medium text-charcoal mb-2">Bio</label>
              <textarea id="bio" name="bio" rows="4" className="w-full p-2 border-2 rounded-lg" value={formData.bio} onChange={handleChange}></textarea>
            </div>
            <div>
              <label htmlFor="skills" className="block text-sm font-medium text-charcoal mb-2">Skills (comma separated)</label>
              <input id="skills" name="skills" type="text" className="w-full p-2 border-2 rounded-lg" value={formData.skills} onChange={handleChange} />
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label htmlFor="location" className="block text-sm font-medium text-charcoal mb-2">Location</label>
                <input id="location" name="location" type="text" className="w-full p-2 border-2 rounded-lg" value={formData.location} onChange={handleChange} />
              </div>
              {user.role === 'designer' && (
                <div>
                  <label htmlFor="hourly_rate" className="block text-sm font-medium text-charcoal mb-2">Hourly Rate ($)</label>
                  <input id="hourly_rate" name="hourly_rate" type="number" step="0.01" className="w-full p-2 border-2 rounded-lg" value={formData.hourly_rate} onChange={handleChange} />
                </div>
              )}
            </div>
            <div className="flex justify-end gap-4 pt-4">
              <button type="button" onClick={() => navigate('/dashboard')} className="px-6 py-2 rounded-lg bg-lightgray">Cancel</button>
              <button type="submit" disabled={isSaving} className="px-6 py-2 rounded-lg text-white bg-mint hover:bg-mint-dark disabled:opacity-50">{isSaving ? 'Saving...' : 'Save Changes'}</button>
            </div>
          </form>
        </div>

        {/* Portfolio Management Section */}
        {user.role === 'designer' && (
          <div className="bg-white rounded-2xl shadow-xl p-8 border-2 border-mint/20">
              <h2 className="text-2xl font-bold text-charcoal mb-6">Manage Portfolio</h2>
              {/* Upload Form */}
              <form onSubmit={handlePortfolioUpload} className="space-y-4 p-4 border rounded-lg bg-lightgray-light mb-8">
                  <h3 className="font-semibold text-lg">Upload New Item</h3>
                  <div>
                      <label htmlFor="portfolioTitle" className="block text-sm font-medium text-charcoal mb-1">Title</label>
                      <input id="portfolioTitle" type="text" value={portfolioTitle} onChange={(e) => setPortfolioTitle(e.target.value)} required className="w-full p-2 border-2 rounded-lg" />
                  </div>
                  <div>
                      <label htmlFor="portfolioDescription" className="block text-sm font-medium text-charcoal mb-1">Description (Optional)</label>
                      <textarea id="portfolioDescription" value={portfolioDescription} onChange={(e) => setPortfolioDescription(e.target.value)} rows="2" className="w-full p-2 border-2 rounded-lg"></textarea>
                  </div>
                  <div>
                      <label htmlFor="portfolio-file-input" className="block text-sm font-medium text-charcoal mb-1">File (Image, PDF, DOC)</label>
                      <input id="portfolio-file-input" type="file" required onChange={handlePortfolioFileChange} accept=".jpg, .jpeg, .png, .pdf, .doc, .docx" className="w-full text-sm text-charcoal file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-mint/10 file:text-mint hover:file:bg-mint/20"/>
                  </div>
                  <button type="submit" disabled={isUploading} className="px-6 py-2 rounded-lg text-white bg-mint hover:bg-mint-dark disabled:opacity-50">{isUploading ? 'Uploading...' : 'Upload Item'}</button>
              </form>
              
              {/* Existing Items */}
              <h3 className="font-semibold text-lg mb-4">Your Items</h3>
              <div className="space-y-4">
                  {portfolioItems.length > 0 ? portfolioItems.map(item => (
                      <div key={item._id} className="flex items-center justify-between p-3 border rounded-lg">
                          <div>
                              <p className="font-bold">{item.title}</p>
                              <p className="text-sm text-gray-500">{item.description}</p>
                          </div>
                          <button onClick={() => handleDeletePortfolioItem(item._id)} className="text-red-500 hover:text-red-700 font-semibold">Delete</button>
                      </div>
                  )) : <p>You have no portfolio items yet.</p>}
              </div>
          </div>
        )}
      </motion.div>
    </div>
  );
};

export default ProfileEdit;
</file>

<file path="BackEnd/controllers/listingsController.js">
import { validationResult } from 'express-validator';
import Listing from '../models/listingModel.js';
import Proposal from '../models/proposalModel.js';
import User from '../models/userModel.js';

// @desc    Get all listings
// @route   GET /api/listings
// @access  Public
export const getAllListings = async (req, res, next) => {
  try {
    const listings = await Listing.find({ status: 'open' })
      .populate('owner', 'name')
      .sort({ createdAt: -1 })
      .lean();
    
    const formattedListings = listings.map(listing => ({
      ...listing,
      id: listing._id,
      owner_name: listing.owner?.name,
      created_at: listing.createdAt,
      updated_at: listing.updatedAt
    }));
    
    res.json(formattedListings);
  } catch (error) {
    next(error);
  }
};

// @desc    Get a single listing by ID
// @route   GET /api/listings/:id
// @access  Public
export const getListingById = async (req, res, next) => {
  try {
    const listing = await Listing.findById(req.params.id)
      .populate('owner', 'name')
      .lean();

    if (!listing) {
      return res.status(404).json({ error: 'Listing not found' });
    }
    
    const formattedListing = {
      ...listing,
      id: listing._id,
      owner_id: listing.owner._id,
      owner_name: listing.owner?.name,
      created_at: listing.createdAt,
      updated_at: listing.updatedAt
    };
    
    res.json(formattedListing);
  } catch (error)
 {
    next(error);
  }
};

// @desc    Create a new listing
// @route   POST /api/listings
// @access  Private (Business only)
export const createListing = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { title, description, budget_min, budget_max, deadline, tags } = req.body;
    const owner = req.user.id;

    const listing = new Listing({
      owner,
      title,
      description,
      budget_min,
      budget_max,
      deadline,
      tags: tags || []
    });

    await listing.save();
    
    res.status(201).json({ id: listing.id, message: 'Listing created successfully' });
  } catch (error) {
    next(error);
  }
};

// @desc    Submit a proposal to a listing
// @route   POST /api/listings/:id/proposals
// @access  Private (Designer only)
export const createProposal = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { message, price_offered, delivery_time } = req.body;

    const proposal = new Proposal({
      listing: req.params.id,
      designer: req.user.id,
      message,
      price_offered,
      delivery_time
    });

    await proposal.save();
    res.status(201).json({ message: 'Proposal submitted successfully', proposal });
  } catch (error) {
    next(error);
  }
};

// @desc    Get all proposals for a specific listing
// @route   GET /api/listings/:id/proposals
// @access  Private (Listing Owner only)
export const getProposalsForListing = async (req, res, next) => {
  try {
    const proposals = await Proposal.find({ listing: req.params.id })
      .populate('designer', 'name profile.avatar_url')
      .sort({ createdAt: -1 })
      .lean();
    res.json(proposals);
  } catch (error) {
    next(error);
  }
};

// @desc    Update a proposal's status
// @route   PATCH /api/listings/:listingId/proposals/:proposalId
// @access  Private (Listing Owner only)
export const updateProposalStatus = async (req, res, next) => {
    try {
        const { status } = req.body;
        const proposal = await Proposal.findByIdAndUpdate(req.params.proposalId, { status }, { new: true });
        res.json({ message: 'Proposal status updated', proposal });
    } catch (error) {
        next(error);
    }
};

// @desc    Bookmark or unbookmark a listing
// @route   POST /api/listings/:id/bookmark
// @access  Private (Designer only)
export const toggleBookmark = async (req, res, next) => {
    try {
        const listingId = req.params.id;
        const userId = req.user.id;
        
        const user = await User.findById(userId);
        
        const isBookmarked = user.profile.saved_projects.includes(listingId);
        
        if (isBookmarked) {
            // Remove from bookmarks
            user.profile.saved_projects.pull(listingId);
        } else {
            // Add to bookmarks
            user.profile.saved_projects.push(listingId);
        }
        
        await user.save();
        
        res.json({ 
            message: isBookmarked ? 'Project removed from bookmarks' : 'Project bookmarked successfully',
            isBookmarked: !isBookmarked
        });

    } catch (error) {
        next(error);
    }
};

// @desc    Get all bookmarked listings for a user
// @route   GET /api/listings/bookmarked
// @access  Private (Designer only)
export const getBookmarkedListings = async (req, res, next) => {
    try {
        const user = await User.findById(req.user.id).populate({
            path: 'profile.saved_projects',
            model: 'Listing',
            populate: {
                path: 'owner',
                model: 'User',
                select: 'name'
            }
        });
        
        if (!user) {
            return res.status(404).json({ error: 'User not found' });
        }
        
        const formattedListings = user.profile.saved_projects.map(listing => ({
            ...listing.toObject(),
            id: listing._id,
        }));

        res.json(formattedListings);
        
    } catch (error) {
        next(error);
    }
};
</file>

<file path="BackEnd/controllers/messagesController.js">
import { validationResult } from 'express-validator';
import Message from '../models/messageModel.js';
import User from '../models/userModel.js';

// @desc    Send a message (creates thread if needed)
// @route   POST /api/messages
// @access  Private
export const sendMessage = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { recipient_id, body, attachments = [] } = req.body;
    const sender_id = req.user.id;

    if (sender_id === recipient_id) {
      return res.status(400).json({ error: 'You cannot send a message to yourself.' });
    }

    // Ensure recipient exists
    const recipient = await User.findById(recipient_id);
    if (!recipient) {
      return res.status(404).json({ error: 'Recipient not found.' });
    }

    // Generate deterministic thread_id: smaller_id_larger_id
    const ids = [sender_id, recipient_id].sort();
    const thread_id = `thread_${ids[0]}_${ids[1]}`;

    const message = new Message({
      thread_id,
      sender: sender_id,
      recipient: recipient_id,
      body: body.trim(),
      attachments,
    });

    await message.save();

    // Populate sender and recipient for response
    const populatedMessage = await Message.findById(message._id)
      .populate('sender', 'name role profile.avatar_url')
      .populate('recipient', 'name role profile.avatar_url')
      .lean();

    res.status(201).json({
      message: 'Message sent successfully',
      data: {
        ...populatedMessage,
        id: populatedMessage._id,
      },
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Get all threads for the logged-in user
// @route   GET /api/messages/threads
// @access  Private
export const getUserThreads = async (req, res, next) => {
  try {
    const userId = req.user.id;

    const threads = await Message.aggregate([
      {
        $match: {
          $or: [{ sender: userId }, { recipient: userId }],
        },
      },
      {
        $sort: { created_at: -1 },
      },
      {
        $group: {
          _id: '$thread_id',
          lastMessage: { $first: '$body' },
          lastMessageDate: { $first: '$created_at' },
          unreadCount: {
            $sum: {
              $cond: [
                { $and: [{ $eq: ['$recipient', userId] }, { $eq: ['$is_read', false] }] },
                1,
                0,
              ],
            },
          },
          otherParticipant: {
            $first: {
              $cond: [
                { $eq: ['$sender', userId] },
                '$recipient',
                '$sender',
              ],
            },
          },
        },
      },
      {
        $lookup: {
          from: 'users',
          localField: 'otherParticipant',
          foreignField: '_id',
          as: 'participantInfo',
        },
      },
      { $unwind: '$participantInfo' },
      {
        $project: {
          thread_id: '$_id',
          last_message: '$lastMessage',
          last_message_date: '$lastMessageDate',
          unread_count: '$unreadCount',
          participant: {
            id: '$participantInfo._id',
            name: '$participantInfo.name',
            avatar_url: '$participantInfo.profile.avatar_url',
            role: '$participantInfo.role',
          },
          _id: 0,
        },
      },
      { $sort: { last_message_date: -1 } },
    ]);

    res.json(threads);
  } catch (error) {
    next(error);
  }
};

// @desc    Get all messages in a specific thread
// @route   GET /api/messages/:threadId
// @access  Private
export const getMessagesInThread = async (req, res, next) => {
  try {
    const { threadId } = req.params;
    const userId = req.user.id;

    const messages = await Message.find({ thread_id: threadId })
      .populate('sender', 'name role profile.avatar_url')
      .populate('recipient', 'name role profile.avatar_url')
      .sort({ created_at: 1 })
      .lean();

    // Security: ensure user is part of this thread
    const isParticipant = messages.some(
      (msg) => msg.sender._id.toString() === userId || msg.recipient._id.toString() === userId
    );

    if (!isParticipant) {
      return res.status(403).json({ error: 'You do not have access to this conversation.' });
    }

    // Mark all messages as read where current user is recipient
    await Message.updateMany(
      { thread_id: threadId, recipient: userId, is_read: false },
      { $set: { is_read: true } }
    );

    const formatted = messages.map((msg) => ({
      id: msg._id,
      thread_id: msg.thread_id,
      body: msg.body,
      attachments: msg.attachments,
      created_at: msg.created_at,
      is_read: msg.is_read,
      sender: {
        id: msg.sender._id,
        name: msg.sender.name,
        role: msg.sender.role,
        avatar_url: msg.sender.profile?.avatar_url || '',
      },
      recipient: {
        id: msg.recipient._id,
        name: msg.recipient.name,
        role: msg.recipient.role,
        avatar_url: msg.recipient.profile?.avatar_url || '',
      },
    }));

    res.json(formatted);
  } catch (error) {
    next(error);
  }
};
</file>

<file path="BackEnd/controllers/profileController.js">
import { validationResult } from 'express-validator';
import User from '../models/userModel.js';
import Review from '../models/reviewModel.js';
import PortfolioItem from '../models/portfolioItemModel.js';

// @desc    Get profile by user ID
// @route   GET /api/profiles/:id
// @access  Public
export const getProfileById = async (req, res, next) => {
  try {
    const { id } = req.params;
    const user = await User.findOne({ _id: id, is_active: true })
      .select('name role profile created_at')
      .lean();

    if (!user) {
      return res.status(404).json({ error: 'Profile not found' });
    }

    const reviewStats = await Review.aggregate([
      { $match: { reviewee: user._id } },
      { $group: {
        _id: null,
        avg_rating: { $avg: '$rating' },
        review_count: { $sum: 1 }
      }}
    ]);
    
    let portfolioItems = [];
    if (user.role === 'designer') {
        portfolioItems = await PortfolioItem.find({ designer: user._id }).sort({ createdAt: -1 }).lean();
    }

    const profile = {
      user_id: user._id,
      ...user.profile,
      name: user.name,
      role: user.role,
      user_created_at: user.created_at,
      avg_rating: reviewStats[0]?.avg_rating || null,
      review_count: reviewStats[0]?.review_count || 0,
      portfolio_items: portfolioItems
    };

    res.json(profile);
  } catch (error) {
    next(error);
  }
};

// @desc    Update a user's profile
// @route   PUT /api/profiles/:id
// @access  Private
export const updateProfile = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }
    const { id } = req.params;
    if (req.user.id !== id) {
      return res.status(403).json({ error: 'Not authorized to update this profile' });
    }
    const { bio, skills, location, hourly_rate, portfolio_urls, social_links } = req.body;
    const updates = {};
    if (bio !== undefined) updates['profile.bio'] = bio;
    if (skills !== undefined) updates['profile.skills'] = skills;
    if (location !== undefined) updates['profile.location'] = location;
    if (hourly_rate !== undefined) updates['profile.hourly_rate'] = hourly_rate;
    if (portfolio_urls !== undefined) updates['profile.portfolio_urls'] = portfolio_urls;
    if (social_links !== undefined) updates['profile.social_links'] = social_links;
    
    await User.findByIdAndUpdate(id, { $set: updates }, { new: true });
    res.json({ message: 'Profile updated successfully' });
  } catch (error) {
    next(error);
  }
};

// @desc    Search for designer profiles
// @route   GET /api/profiles
// @access  Public
export const searchProfiles = async (req, res, next) => {
  try {
    const {
      search = '',
      skill = '',
      location = '',
      min_rate = '',
      max_rate = '',
    } = req.query;

    const matchConditions = {
      is_active: true,
      role: 'designer'
    };

    if (search) {
      matchConditions.$or = [
        { name: { $regex: search, $options: 'i' } },
        { 'profile.bio': { $regex: search, $options: 'i' } },
        { 'profile.skills': { $regex: search, $options: 'i' } }
      ];
    }
    if (skill) {
      matchConditions['profile.skills'] = { $regex: `^${skill}$`, $options: 'i' };
    }
    if (location) {
      matchConditions['profile.location'] = { $regex: location, $options: 'i' };
    }
    
    if (min_rate || max_rate) {
        matchConditions['profile.hourly_rate'] = {};
        if (min_rate) matchConditions['profile.hourly_rate'].$gte = parseFloat(min_rate);
        if (max_rate) matchConditions['profile.hourly_rate'].$lte = parseFloat(max_rate);
    }

    const users = await User.find(matchConditions)
      .select('name role profile')
      .limit(50) // Limit results to prevent overload
      .lean();

    // Enhance profiles with review stats
    const profiles = await Promise.all(users.map(async (user) => {
      const reviewStats = await Review.aggregate([
        { $match: { reviewee: user._id } },
        { $group: {
          _id: null,
          avg_rating: { $avg: '$rating' },
          review_count: { $sum: 1 }
        }}
      ]);

      return {
        user_id: user._id,
        name: user.name,
        avatar_url: user.profile?.avatar_url || '',
        bio: user.profile?.bio || '',
        skills: user.profile?.skills || [],
        location: user.profile?.location || '',
        hourly_rate: user.profile?.hourly_rate,
        avg_rating: reviewStats[0]?.avg_rating ? parseFloat(reviewStats[0].avg_rating).toFixed(1) : null,
        review_count: reviewStats[0]?.review_count || 0
      };
    }));
    
    res.json({ profiles });
  } catch (error) {
    next(error);
  }
};
</file>

<file path="BackEnd/controllers/reviewsController.js">
import { validationResult } from 'express-validator';
import Review from '../models/reviewModel.js';
import Order from '../models/orderModel.js';

// @desc    Create a new review for an order
// @route   POST /api/reviews
// @access  Private
export const createReview = async (req, res, next) => {
  try {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }
    
    const reviewerId = req.user.id;
    const { order_id, reviewee_id, rating, comment } = req.body;

    const order = await Order.findById(order_id);

    if (!order) return res.status(404).json({ error: 'Order not found.' });
    if (order.status !== 'completed') return res.status(400).json({ error: 'You can only review completed orders.' });

    const isParticipant = order.buyer.toString() === reviewerId || order.seller.toString() === reviewerId;
    const isValidReviewee = reviewee_id === order.buyer.toString() || reviewee_id === order.seller.toString();
    if (!isParticipant || !isValidReviewee || reviewerId === reviewee_id) {
        return res.status(403).json({ error: 'You are not authorized to submit this review.' });
    }
   
    const existingReview = await Review.findOne({ order: order_id, reviewer: reviewerId });
    if (existingReview) {
      return res.status(409).json({ error: 'You have already submitted a review for this order.' });
    }

    const review = new Review({
      order: order_id,
      reviewer: reviewerId,
      reviewee: reviewee_id,
      rating,
      comment
    });

    await review.save();
    res.status(201).json({ message: 'Review submitted successfully.', review });
  } catch (error) {
    next(error);
  }
};

// @desc    Get all reviews for a specific user
// @route   GET /api/reviews/user/:userId
// @access  Public
export const getReviewsForUser = async (req, res, next) => {
  try {
    const { userId } = req.params;
    
    const reviews = await Review.find({ reviewee: userId })
      .populate('reviewer', 'name profile.avatar_url')
      .sort({ createdAt: -1 })
      .lean();

    const formattedReviews = reviews.map(r => ({
      id: r._id,
      rating: r.rating,
      comment: r.comment,
      created_at: r.createdAt,
      reviewer_name: r.reviewer.name,
      reviewer_avatar: r.reviewer.profile?.avatar_url || ''
    }));

    res.json(formattedReviews);
  } catch (error) {
    next(error);
  }
};
</file>

<file path="FrontEnd/pages/ListingDetail.jsx">
import { useState, useEffect } from 'react';
import { useParams, Link, useNavigate } from 'react-router-dom';
import { invoiceAPI } from '../services/api';
import { useAuth } from '../context/AuthContext';

const InvoiceDetail = () => {
  const { id } = useParams();
  const { user } = useAuth();
  const navigate = useNavigate();
  const [invoice, setInvoice] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchInvoice = async () => {
      try {
        const res = await invoiceAPI.getInvoice(id);
        setInvoice(res.data);
      } catch (err) {
        alert('Invoice not found or access denied');
        navigate('/invoices');
      } finally {
        setLoading(false);
      }
    };
    fetchInvoice();
  }, [id, navigate]);

  const handleMarkAsPaid = async () => {
    if (!window.confirm('Mark this invoice as paid? (External payment confirmed)')) return;
    try {
      await invoiceAPI.markAsPaid(id);
      setInvoice(prev => ({ ...prev, status: 'paid' }));
      alert('Invoice marked as paid!');
    } catch (err) {
      alert('Failed to update status');
    }
  };

  if (loading) return <div className="p-8 text-center">Loading invoice...</div>;
  if (!invoice) return null;

  const isBusiness = user.id === invoice.business.id;

  return (
    <div className="max-w-4xl mx-auto py-12 px-4">
      <div className="bg-white rounded-xl shadow-lg overflow-hidden">
        <div className="bg-mint text-white p-8">
          <h1 className="text-4xl font-bold">Invoice {invoice.invoice_number}</h1>
          <p className="text-xl mt-2">Project: {invoice.listing_title}</p>
        </div>

        <div className="p-8">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <div>
              <h3 className="font-bold text-lg mb-3">From</h3>
              <p className="font-semibold">{invoice.designer.name}</p>
              <p className="text-gray-600">{invoice.designer.email}</p>
            </div>
            <div>
              <h3 className="font-bold text-lg mb-3">To</h3>
              <p className="font-semibold">{invoice.business.name}</p>
              <p className="text-gray-600">{invoice.business.email}</p>
            </div>
          </div>

          <div className="border-t pt-6">
            <div className="flex justify-between items-center mb-4">
              <div>
                <p className="text-sm text-gray-600">Amount Due</p>
                <p className="text-4xl font-bold text-mint">${invoice.amount.toFixed(2)}</p>
              </div>
              <div className="text-right">
                <p className="text-sm text-gray-600">Status</p>
                <span className={`inline-block px-4 py-2 rounded-full text-white font-bold ${
                  invoice.status === 'paid' ? 'bg-green-500' : 'bg-yellow-500'
                }`}>
                  {invoice.status.toUpperCase()}
                </span>
              </div>
            </div>

            <div className="grid grid-cols-2 gap-4 text-sm">
              <div>
                <p className="text-gray-600">Issue Date</p>
                <p>{new Date(invoice.created_at).toLocaleDateString()}</p>
              </div>
              <div>
                <p className="text-gray-600">Due Date</p>
                <p>{new Date(invoice.due_date).toLocaleDateString()}</p>
              </div>
            </div>

            {invoice.notes && (
              <div className="mt-6 p-4 bg-gray-50 rounded-lg">
                <p className="font-semibold mb-2">Payment Instructions / Notes</p>
                <p className="whitespace-pre-wrap">{invoice.notes}</p>
              </div>
            )}

            <div className="mt-8 flex gap-4">
              {isBusiness && invoice.status !== 'paid' && (
                <button
                  onClick={handleMarkAsPaid}
                  className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg"
                >
                  Mark as Paid (External)
                </button>
              )}
              <Link
                to="/invoices"
                className="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-8 rounded-lg"
              >
                Back to Invoices
              </Link>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default InvoiceDetail;
</file>

<file path="FrontEnd/services/api.js">
import axios from 'axios';

// Get the base URL from environment variables, with a fallback for local development
const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000';

// --- 1. AXIOS INSTANCE CREATION ---
// This is the centralized API client. All requests from the frontend will go through this instance.
const api = axios.create({
  baseURL: API_BASE_URL,
  withCredentials: true, // Crucial for sending cookies (like the refresh token) to the backend
});

// --- 2. REQUEST INTERCEPTOR ---
// This function runs BEFORE every single API request is sent.
api.interceptors.request.use(
  (config) => {
    // Get the access token from localStorage.
    const token = localStorage.getItem('accessToken');
    if (token) {
      // If a token exists, automatically add the 'Authorization' header to the request.
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config; // Allow the request to proceed with the new header.
  },
  (error) => {
    // If there's an error creating the request, reject the promise.
    return Promise.reject(error);
  }
);

// --- 3. RESPONSE INTERCEPTOR ---
// This function runs AFTER an API response is received, but BEFORE it's passed to the component.
api.interceptors.response.use(
  // If the response is successful (e.g., status 200), just pass it through.
  (response) => response,
  // If the response has an error (e.g., status 403), this logic is triggered.
  async (error) => {
    const originalRequest = error.config;
    
    // This block handles expired access tokens. A 403 status is what our backend sends for this.
    // The `!originalRequest._retry` flag prevents an infinite loop of retries.
    if (error.response?.status === 403 && !originalRequest._retry) {
      originalRequest._retry = true;
      try {
        // Attempt to get a new access token using the refresh token cookie.
        const { data } = await axios.post(`${API_BASE_URL}/auth/refresh`, {}, { withCredentials: true });
        
        // Save the new access token.
        localStorage.setItem('accessToken', data.accessToken);
        
        // Update the authorization header on our original failed request.
        originalRequest.headers.Authorization = `Bearer ${data.accessToken}`;
        
        // Retry the original request with the new token.
        return api(originalRequest);
      } catch (refreshError) {
        // If the refresh fails, the user's session is truly expired.
        // Clear the token and redirect to the login page.
        localStorage.removeItem('accessToken');
        window.location.href = '/login';
        return Promise.reject(refreshError);
      }
    }
    
    // For any other errors, just pass them along.
    return Promise.reject(error);
  }
);

// --- 4. MODULAR API OBJECTS ---
// Grouping API calls by resource for clean code and easy importing.

export const authAPI = {
  register: (userData) => api.post('/auth/register', userData),
  login: (email, password) => api.post('/auth/login', { email, password }),
  logout: () => api.post('/auth/logout'),
  getCurrentUser: () => api.get('/auth/me'),
  forgotPassword: (email) => api.post('/auth/forgot-password', { email }),
  resetPassword: (token, password) => api.post(`/auth/reset-password/${token}`, { password }),
};

export const profileAPI = {
  getProfile: (id) => api.get(`/profiles/${id}`),
  updateProfile: (id, data) => api.put(`/profiles/${id}`, data),
  searchProfiles: (params) => api.get('/profiles', { params }),
};

export const dashboardAPI = {
  getStats: () => api.get('/dashboard/stats'),
};

export const listingAPI = {
  getListings: () => api.get('/listings'),
  getListing: (id) => api.get(`/listings/${id}`),
  createListing: (data) => api.post('/listings', data),
  submitProposal: (listingId, data) => api.post(`/listings/${listingId}/proposals`, data),
  getProposalsForListing: (listingId) => api.get(`/listings/${listingId}/proposals`),
  updateProposalStatus: (listingId, proposalId, status) => api.patch(`/listings/${listingId}/proposals/${proposalId}`, { status }),
  toggleBookmark: (listingId) => api.post(`/listings/${listingId}/bookmark`),
  getBookmarkedListings: () => api.get('/listings/bookmarked'),
};

export const orderAPI = {
  createOrder: (data) => api.post('/orders', data),
  getOrders: () => api.get('/orders'),
  getOrder: (id) => api.get(`/orders/${id}`),
  updateOrderStatus: (id, status) => api.patch(`/orders/${id}/status`, { status }),
  postProgressUpdate: (orderId, data) => api.post(`/orders/${orderId}/updates`, data),
};

export const messageAPI = {
  getThreads: () => api.get('/messages/threads'),
  getMessages: (participantId) => api.get(`/messages/threads/${participantId}`),
};

export const reviewAPI = {
  createReview: (data) => api.post('/reviews', data),
  getReviewsForUser: (userId) => api.get(`/reviews/user/${userId}`),
};

export const uploadAPI = {
  uploadAvatar: (formData) => api.post('/uploads/avatar', formData, { headers: { 'Content-Type': 'multipart/form-data' } }),
  uploadPortfolioItem: (formData) => api.post('/uploads/portfolio', formData, { headers: { 'Content-Type': 'multipart/form-data' } }),
  deletePortfolioItem: (id) => api.delete(`/uploads/portfolio/${id}`),
};

export const adminAPI = {
  getUsers: () => api.get('/admin/users'),
  updateUserStatus: (id, is_active) => api.patch(`/admin/users/${id}/status`, { is_active }),
  getAnalytics: () => api.get('/admin/analytics'),
  getAllMessageThreads: () => api.get('/admin/messages'),
  getMessagesForModeration: (threadId) => api.get(`/admin/messages/${threadId}`),
  toggleFlagThread: (threadId) => api.patch(`/admin/messages/${threadId}/flag`),
};

export const invoiceAPI = {
    getInvoices: () => api.get('/invoices'),
    createInvoice: (data) => api.post('/invoices', data),
};

export default api;
</file>

<file path="package.json">
{
  "name": "digital-marketplace-root",
  "private": true,
  "version": "1.0.0",
  "description": "Root package for ShockWave Digital Marketplace",
  "type": "module",
  "scripts": {
    "install:all": "npm install && cd BackEnd && npm install && cd ../FrontEnd && npm install",
    "dev": "concurrently \"npm:dev:client\" \"npm:dev:server\"",
    "dev:client": "cd FrontEnd && npm run dev",
    "dev:server": "cd BackEnd && npm run dev",
    "db:init": "cd BackEnd && npm run db:init",
    "build": "cd FrontEnd && npm run build",
    "lint": "cd FrontEnd && npm run lint",
    "preview": "cd FrontEnd && npm run preview"
  },
  "dependencies": {
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "react-router-dom": "^6.28.0",
    "axios": "^1.7.9",
    "framer-motion": "^11.15.0",
    "socket.io-client": "4.7.5",
    "chart.js": "^4.4.3",
    "react-chartjs-2": "^5.2.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^5.0.4",
    "vite": "^7.1.7",
    "tailwindcss": "^3.4.14",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.49",
    "concurrently": "^8.2.2"
  }
}
</file>

<file path="BackEnd/package.json">
{
  "name": "digital-marketplace-server",
  "version": "1.0.0",
  "description": "Backend API for Digital Marketplace",
  "main": "app.js",
  "type": "module",
  "scripts": {
    "dev": "nodemon app.js",
    "start": "node app.js",
    "test": "jest --watchAll",
    "test:coverage": "jest --coverage",
    "db:init": "node scripts/init.js"
  },
  "dependencies": {
    "bcrypt": "^5.1.1",
    "bcryptjs": "^3.0.3",
    "cookie-parser": "^1.4.7",
    "cors": "^2.8.5",
    "dotenv": "^16.4.7",
    "express": "^4.21.1",
    "express-rate-limit": "^7.4.1",
    "express-validator": "^7.2.0",
    "helmet": "^8.0.0",
    "jsonwebtoken": "^9.0.2",
    "mongoose": "^8.4.0",
    "multer": "^1.4.5-lts.1",
    "node-fetch": "^3.3.2",
    "nodemailer": "^6.9.18",
    "sharp": "^0.33.5",
    "socket.io": "4.7.5"
  },
  "devDependencies": {
    "jest": "^29.7.0",
    "nodemon": "^3.1.7",
    "supertest": "^7.0.0"
  }
}
</file>

<file path="BackEnd/app.js">
import dotenv from 'dotenv';
import path from 'path';
import { fileURLToPath } from 'url';

// Configure environment variables FIRST
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
const envPath = path.join(__dirname, '.env');
const result = dotenv.config({ path: envPath });

import express from 'express';
import cors from 'cors';
import helmet from 'helmet';
import cookieParser from 'cookie-parser';
import rateLimit from 'express-rate-limit';
import http from 'http';
import { Server } from 'socket.io';

import connectDB from './config/database.js';
import Message from './models/messageModel.js';

import authRoutes from './routes/authRoutes.js';
import profileRoutes from './routes/profileRoutes.js';
import listingRoutes from './routes/listingsRoutes.js';
import orderRoutes from './routes/ordersRoutes.js';
import messageRoutes from './routes/messagesRoutes.js';
import adminRoutes from './routes/adminRoutes.js';
import dashboardRoutes from './routes/dashboardRoutes.js';
import uploadRoutes from './routes/uploadRoutes.js';
import reviewsRoutes from './routes/reviewsRoutes.js';
import invoiceRoutes from './routes/invoiceRoutes.js';
import { errorHandler } from './middleware/errorHandler.js';
import { authenticateToken, requireRole } from './middleware/auth.js';

console.log('üîç MONGO_URI loaded:', process.env.MONGO_URI ? 'YES' : 'NO');
connectDB();
const app = express();
const server = http.createServer(app);

const allowedOrigins = [ 'http://localhost:5173', process.env.CLIENT_URL ].filter(Boolean);
const corsOptions = {
  origin: (origin, callback) => {
    if (!origin || allowedOrigins.includes(origin)) callback(null, true);
    else callback(new Error('Not allowed by CORS'));
  },
  credentials: true
};

const io = new Server(server, { cors: corsOptions });
const PORT = process.env.PORT || 5000;

app.use(helmet({ crossOriginResourcePolicy: { policy: "cross-origin" } }));
app.use(cors(corsOptions));
app.use(rateLimit({ windowMs: 15 * 60 * 1000, max: 100 }));
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true }));
app.use(cookieParser());
app.use('/uploads', express.static(path.join(__dirname, 'uploads')));

app.use('/api/auth', authRoutes);
app.use('/api/profiles', profileRoutes);
app.use('/api/listings', listingRoutes);
app.use('/api/orders', orderRoutes);
app.use('/api/messages', messageRoutes);
app.use('/api/admin', authenticateToken, requireRole(['admin']), adminRoutes);
app.use('/api/dashboard', dashboardRoutes);
app.use('/api/uploads', uploadRoutes);
app.use('/api/reviews', reviewsRoutes);
app.use('/api/invoices', invoiceRoutes);
app.get('/api/health', (req, res) => res.json({ status: 'OK' }));

io.on('connection', (socket) => { /* Socket logic remains */ });
app.use(errorHandler);

server.listen(PORT, () => console.log(`üöÄ Server running on port ${PORT}`));
</file>

<file path="README.md">
# ShockWave - Digital Marketplace Platform

> A comprehensive two-sided marketplace platform connecting talented graphic designers with businesses seeking creative services.

---

## Table of Contents

- [Features](#-features)
- [Tech Stack](#-tech-stack)
- [Getting Started](#-getting-started)
- [Project Structure](#-project-structure)
- [Configuration](#-configuration)
- [Testing](#-testing)
- [Documentation](#-documentation)
- [Deployment](#-deployment)
- [Troubleshooting](#-troubleshooting)

---

## Features

### For Designers
- **Professional Profiles** - Showcase skills, portfolio, and experience
- **Project Discovery** - Browse and bid on exciting design projects
- **Secure Payments** - Safe payment processing through integrated gateway
- **Portfolio Management** - Display your best work to attract clients
- **Direct Messaging** - Real-time communication with potential clients
- **Review System** - Build reputation through client reviews

###  For Businesses
- **Easy Project Posting** - Quick and efficient project creation
- **Designer Discovery** - Browse and filter talented designers
- **Proposal Management** - Review and compare designer proposals
- **Project Tracking** - Monitor progress from start to finish
- **Review System** - Rate designers for future references
- **Secure Payments** - Escrow-based payment protection

### For Administrators
- **User Management** - Comprehensive user oversight
- **Content Moderation** - Platform quality control
- **Transaction Monitoring** - Financial oversight
- **Dispute Resolution** - Conflict management tools
- **Platform Analytics** - Detailed insights and metrics

---

## Tech Stack

### Frontend
## Technology 

- React 
- Vite
- Tailwind CSS
- Framer Motion
- React Router

### Backend
## Technology 

- Node.js: JavaScript runtime environment  
- Express: Fast, minimalist web framework 
- MongoDB: NoSQL database with Mongoose ODM 
- JWT: Secure authentication tokens 
- Bcrypt: Password encryption 
- Stripe : Payment processing integration 
- Socket.io: Real-time server communication

---

## Getting Started

### Prerequisites

- **Node.js** (v18 or higher) - (https://nodejs.org/)
- **npm** (v9 or higher) - Comes with Node.js
- **Git** - (https://git-scm.com/)
- **MongoDB** (v5.0 or higher) - (https://www.mongodb.com/try/download/community)

### Installation

#### 1. Clone the Repository

```bash
git clone https://git@github.com:owen-stud123/ShockWave.git
cd ShockWave
```

#### 2. Install Dependencies

```bash
# Install frontend dependencies
npm install

# Install backend dependencies
npm run server:install

# Or install both at once
npm run install:all
```

#### 3. Environment Setup

Create a `.env` file in the `BackEnd` directory:

```bash
cd BackEnd
cp .env.example .env
```

Edit the `.env` file with your configuration:

```env
# Server Configuration
NODE_ENV=development
PORT=5000

# MongoDB Connection
MONGO_URI=mongodb://localhost:27017/shockwave_db

# JWT Authentication
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production_make_it_very_long_and_random
JWT_REFRESH_SECRET=your_super_secret_refresh_key_change_this_in_production_make_it_very_long_and_random

# Client URL
CLIENT_URL=http://localhost:5173

```

#### 4. Start MongoDB

```bash
# Windows - Start MongoDB service
net start MongoDB

# Or manually start mongod
mongod --dbpath="C:\Program Files\MongoDB\Server\7.0\data"

# macOS/Linux
sudo systemctl start mongod
# or
brew services start mongodb-community
```

#### 5. Initialize Database (Optional)

```bash
# From BackEnd directory - creates test accounts
node scripts/init.js

# Or use npm script
npm run db:init
```


#### 6. Start Development Servers

```bash
# From project root - starts both frontend and backend
npm run dev
```

Or start them separately:

```bash
# Terminal 1 - Frontend (from project root)
npm run dev:client

# Terminal 2 - Backend (from project root)
npm run dev:server
```


---

## Configuration

### Environment Variables

The backend requires several environment variables. Create a `.env` file in the `BackEnd` directory:

| Variable | Description | Required | Default |
|----------|-------------|----------|---------|
| `PORT` | Server port | No | 5000 |
| `NODE_ENV` | Environment | No | development |
| `MONGO_URI` | MongoDB connection string | **Yes** | mongodb://localhost:27017/shockwave_db |
| `JWT_SECRET` | Secret for JWT signing | **Yes** | - |
| `JWT_REFRESH_SECRET` | Secret for refresh tokens | **Yes** | - |
| `CLIENT_URL` | Frontend URL for CORS | No | http://localhost:5173 |

| 
| `MAX_FILE_SIZE` | Max upload size (bytes) | No | 10485760 (10MB) |
| `UPLOAD_PATH` | File upload directory | No | ./uploads |
| `RATE_LIMIT_WINDOW` | Rate limit time window | No | 900000 (15min) |
| `RATE_LIMIT_MAX` | Max requests per window | No | 100 |

### Database Configuration

The project uses **MongoDB** with Mongoose ODM for flexible, document-based data storage.

**MongoDB** (Development & Production):
- Install MongoDB Community Edition
- Default connection: `mongodb://localhost:27017/shockwave_db`
- Start MongoDB service before running the app
- Mongoose handles schema validation and relationships

**MongoDB Atlas** (Cloud - Optional):
- Create free cluster at [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
- Update `MONGO_URI` with your connection string
- Automatic scaling and backups
- Recommended for production deployment

---

---

## Documentation

Comprehensive documentation is available to help you understand and navigate the platform:


---



## User Roles & Capabilities

### Designer Role

**Capabilities:**
- ‚úÖ Create and manage professional profile
- ‚úÖ Upload and showcase portfolio
- ‚úÖ Browse available projects
- ‚úÖ Submit proposals to businesses
- ‚úÖ Create service listings (gigs)
- ‚úÖ Receive payments via platform
- ‚úÖ Communicate with clients
- ‚úÖ Receive and respond to reviews

**Restrictions:**
- ‚ùå Cannot post projects
- ‚ùå Cannot hire other designers
- ‚ùå Cannot access admin panel

### üíº Business Role

**Capabilities:**
- ‚úÖ Create company profile
- ‚úÖ Post project requirements
- ‚úÖ Browse designer portfolios
- ‚úÖ Review designer proposals
- ‚úÖ Hire designers
- ‚úÖ Make secure payments
- ‚úÖ Communicate with designers
- ‚úÖ Leave reviews and ratings

**Restrictions:**
- ‚ùå Cannot create service listings
- ‚ùå Cannot apply to projects
- ‚ùå Cannot access admin panel

### Admin Role

**Capabilities:**
- ‚úÖ All Designer and Business capabilities
- ‚úÖ User management (create, edit, delete)
- ‚úÖ Content moderation
- ‚úÖ Transaction monitoring
- ‚úÖ Dispute resolution
- ‚úÖ Platform analytics and reporting
- ‚úÖ System configuration

**Full Access:** All platform features and controls

---




---



## Troubleshooting

### Common Issues

#### MongoDB Connection Error

**Problem**: `Error connecting to MongoDB` or `MongooseServerSelectionError`

**Solution**:

-  Use MongoDB Atlas (cloud)
- Create free cluster at mongodb.com/cloud/atlas
- Update `MONGO_URI` in `.env` with connection string

#### Port Already in Use

**Problem**: `Error: Port 5000 is already in use`

**Solution**:
```bash
# Windows
netstat -ano | findstr :5000
taskkill /PID <PID> /F

# macOS/Linux
lsof -ti:5000 | xargs kill -9
```

Or change the port in `BackEnd/.env`:
```env
PORT=5001
```

#### JWT Token Errors

**Problem**: `Invalid token` or `Token expired`

**Solution**:
1. Clear browser localStorage
2. Log out and log back in
3. Check JWT_SECRET in `.env`
4. Verify JWT_EXPIRES_IN value

---

<div align="center">
  <strong><a href="#shockwave---digital-marketplace-platform">‚Üë Back to Top</a></strong><br>
  <strong>ShockWave ‚Äì Connect. Create. Collaborate.</strong>
</div>
</file>

</files>
